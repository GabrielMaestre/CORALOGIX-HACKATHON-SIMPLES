(()=>{var e={263:function(e,t,n){var r,o,i;!function(){"use strict";o=[n(343)],void 0===(i="function"==typeof(r=function(e){var t=/(^|@)\S+:\d+/,n=/^\s*at .*(\S+:\d+|\(native\))/m,r=/^(eval@)?(\[native code])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(n)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],""):n;var o=this.extractLocation(r?r[1]:n),i=r&&n||void 0,a=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new e({functionName:i,fileName:a,lineNumber:o[1],columnNumber:o[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(r)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),o=r&&r[1]?r[1]:void 0,i=this.extractLocation(t.replace(n,""));return new e({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),o=[],i=2,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e({fileName:s[2],lineNumber:s[1],source:r[i]}))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),o=[],i=0,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:r[i]}))}return o},parseOpera11:function(n){return n.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var n,r=t.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;i.match(/\(([^)]*)\)/)&&(n=i.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:a,args:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})}),this)}}})?r.apply(t,o):r)||(e.exports=i)}()},132:e=>{"use strict";function t(e){return"function"==typeof e}var n=console.error.bind(console);function r(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function o(e){e&&e.logger&&(t(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function i(e,o,i){if(e&&e[o]){if(!i)return n("no wrapper function"),void n((new Error).stack);if(t(e[o])&&t(i)){var a=e[o],s=i(a,o);return r(s,"__original",a),r(s,"__unwrap",(function(){e[o]===s&&r(e,o,a)})),r(s,"__wrapped",!0),r(e,o,s),s}n("original object and wrapper must be functions")}else n("no original function "+o+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}o.wrap=i,o.massWrap=function(e,t,r){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){i(e,t,r)}))})):n("must provide one or more functions to wrap on modules")},o.unwrap=a,o.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):n("must provide one or more functions to unwrap on modules")},e.exports=o},343:function(e,t){var n,r,o;!function(){"use strict";r=[],void 0===(o="function"==typeof(n=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}var r=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],i=["fileName","functionName","source"],a=["args"],s=["evalOrigin"],c=r.concat(o,i,a,s);function u(e){if(e)for(var n=0;n<c.length;n++)void 0!==e[c[n]]&&this["set"+t(c[n])](e[c[n]])}u.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof u)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new u(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+n+")":"[eval]:"+t+":"+n:r?r+" ("+e+":"+t+":"+n+")":e+":"+t+":"+n}},u.fromString=function(e){var t=e.indexOf("("),n=e.lastIndexOf(")"),r=e.substring(0,t),o=e.substring(t+1,n).split(","),i=e.substring(n+1);if(0===i.indexOf("@"))var a=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i,""),s=a[1],c=a[2],l=a[3];return new u({functionName:r,args:o||void 0,fileName:s,lineNumber:c||void 0,columnNumber:l||void 0})};for(var l=0;l<r.length;l++)u.prototype["get"+t(r[l])]=n(r[l]),u.prototype["set"+t(r[l])]=function(e){return function(t){this[e]=Boolean(t)}}(r[l]);for(var d=0;d<o.length;d++)u.prototype["get"+t(o[d])]=n(o[d]),u.prototype["set"+t(o[d])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(o[d]);for(var p=0;p<i.length;p++)u.prototype["get"+t(i[p])]=n(i[p]),u.prototype["set"+t(i[p])]=function(e){return function(t){this[e]=String(t)}}(i[p]);return u})?n.apply(t,r):n)||(e.exports=o)}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function i(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(uo){i(uo)}}function s(e){try{c(r.throw(e))}catch(uo){i(uo)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(uo){s=[6,uo],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function u(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var l="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},d="1.9.0",p=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var f=function(e){var t=new Set([e]),n=new Set,r=e.match(p);if(!r)return function(){return!1};var o=+r[1],i=+r[2],a=+r[3];if(null!=r[4])return function(t){return t===e};function s(e){return n.add(e),!1}function c(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(p);if(!r)return s(e);var u=+r[1],l=+r[2],d=+r[3];return null!=r[4]||o!==u?s(e):0===o?i===l&&a<=d?c(e):s(e):i<=l?c(e):s(e)}}(d),h=d.split(".")[0],m=Symbol.for("opentelemetry.js.api."+h),g=l;function v(e,t,n,r){var o;void 0===r&&(r=!1);var i=g[m]=null!==(o=g[m])&&void 0!==o?o:{version:d};if(!r&&i[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}if(i.version!==d){a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+d);return n.error(a.stack||a.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+d+"."),!0}function y(e){var t,n,r=null===(t=g[m])||void 0===t?void 0:t.version;if(r&&f(r))return null===(n=g[m])||void 0===n?void 0:n[e]}function E(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+d+".");var n=g[m];n&&delete n[e]}var b,S=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},T=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},_=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("verbose",this._namespace,e)},e}();function I(e,t,n){var r=y("diag");if(r)return n.unshift(t),r[e].apply(r,T([],S(n),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(b||(b={}));var C,O=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},w=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},R=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=y("diag");if(r)return r[e].apply(r,w([],O(t),!1))}}var t=this;t.setLogger=function(e,n){var r,o,i;if(void 0===n&&(n={logLevel:b.INFO}),e===t){var a=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=a.stack)&&void 0!==r?r:a.message),!1}"number"==typeof n&&(n={logLevel:n});var s=y("diag"),c=function(e,t){function n(n,r){var o=t[n];return"function"==typeof o&&e>=r?o.bind(t):function(){}}return e<b.NONE?e=b.NONE:e>b.ALL&&(e=b.ALL),t=t||{},{error:n("error",b.ERROR),warn:n("warn",b.WARN),info:n("info",b.INFO),debug:n("debug",b.DEBUG),verbose:n("verbose",b.VERBOSE)}}(null!==(o=n.logLevel)&&void 0!==o?o:b.INFO,e);if(s&&!n.suppressOverrideMessage){var u=null!==(i=(new Error).stack)&&void 0!==i?i:"<failed to generate stacktrace>";s.warn("Current logger will be overwritten from "+u),c.warn("Current logger will overwrite one already registered from "+u)}return v("diag",c,t,!0)},t.disable=function(){E("diag",t)},t.createComponentLogger=function(e){return new _(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),A=R.instance();function N(e){return Symbol.for(e)}!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(C||(C={}));var L,M=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var o=new e(n._currentContext);return o._currentContext.set(t,r),o},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},x=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},k=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},P=function(){function e(){}return e.prototype.active=function(){return M},e.prototype.with=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return t.call.apply(t,k([n],x(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),D=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},U=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},F="context",B=new P,G=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return v(F,e,R.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(r=this._getContextManager()).with.apply(r,U([e,t,n],D(o),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return y(F)||B},e.prototype.disable=function(){this._getContextManager().disable(),E(F,R.instance())},e}(),j=G.getInstance();!function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(L||(L={}));var W=["OTEL_SDK_DISABLED"];function H(e){return W.indexOf(e)>-1}var V=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function X(e){return V.indexOf(e)>-1}var Y=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function z(e){return Y.indexOf(e)>-1}var Z=1/0,K=128,J={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:b.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Z,OTEL_ATTRIBUTE_COUNT_LIMIT:K,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Z,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:K,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Z,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:K,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:L.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function q(e,t,n){if(void 0!==n[e]){var r=String(n[e]);t[e]="true"===r.toLowerCase()}}function Q(e,t,n,r,o){if(void 0===r&&(r=-1/0),void 0===o&&(o=1/0),void 0!==n[e]){var i=Number(n[e]);isNaN(i)||(t[e]=i<r?r:i>o?o:i)}}function $(e,t,n,r){void 0===r&&(r=",");var o=n[e];"string"==typeof o&&(t[e]=o.split(r).map((function(e){return e.trim()})))}var ee={ALL:b.ALL,VERBOSE:b.VERBOSE,DEBUG:b.DEBUG,INFO:b.INFO,WARN:b.WARN,ERROR:b.ERROR,NONE:b.NONE};function te(e,t,n){var r=n[e];if("string"==typeof r){var o=ee[r.toUpperCase()];null!=o&&(t[e]=o)}}function ne(e){var t={};for(var n in J){var r=n;if("OTEL_LOG_LEVEL"===r)te(r,t,e);else if(H(r))q(r,t,e);else if(X(r))Q(r,t,e);else if(z(r))$(r,t,e);else{var o=e[r];null!=o&&(t[r]=String(o))}}return t}var re="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{};function oe(){var e=ne(re);return Object.assign({},J,e)}var ie,ae=function(){function e(){var e=this;this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),se=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ce=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ue=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new ae}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,ce([this._that],se(n),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(o){this._deferred.reject(o)}}return this._deferred.promise},e}(),le=N("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function de(e){return!0===e.getValue(le)}!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(ie||(ie={}));var pe=function(e){A.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},n=e;null!==n;)Object.getOwnPropertyNames(n).forEach((function(e){if(!t[e]){var r=n[e];r&&(t[e]=String(r))}})),n=Object.getPrototypeOf(n);return t}(e))}(e))};function fe(e){try{pe(e)}catch(Pr){}}var he,me=function(){function e(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=oe();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new ue(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(A.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&C.SAMPLED&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then((function(){return e.onShutdown()})).then((function(){return e._flushAll()})).then((function(){return e._exporter.shutdown()}))},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&A.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(A.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,n){for(var r=[],o=0,i=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);o<i;o++)r.push(e._flushOneBatch());Promise.all(r).then((function(){t()})).catch(n)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,n){var r=setTimeout((function(){n(new Error("Timeout"))}),e._exportTimeoutMillis);j.with(j.active().setValue(le,!0),(function(){var o;e._finishedSpans.length<=e._maxExportBatchSize?(o=e._finishedSpans,e._finishedSpans=[]):o=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var i=function(){return e._exporter.export(o,(function(e){var o;clearTimeout(r),e.code===ie.SUCCESS?t():n(null!==(o=e.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))},a=null,s=0,c=o.length;s<c;s++){var u=o[s];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(null!=a||(a=[]),a.push(u.resource.waitForAsyncAttributes()))}null===a?i():Promise.all(a).then(i,(function(e){fe(e),n(e)}))}))}))},e.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally((function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(t){e._isExporting=!1,fe(t)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout((function(){return t()}),this._scheduledDelayMillis),this._timer)}},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ve=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.onInit(n),r}return ge(t,e),t.prototype.onInit=function(e){var t=this;!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&t.forceFlush()},this._pageHideListener=function(){t.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(me);function ye(e){return"string"==typeof e}function Ee(e,t,n){return void 0===n&&(n=!1),!!ye(e)&&(function(e){return e instanceof RegExp}(t)?t.test(e):!!ye(t)&&(n?e===t:e.includes(t)))}function be(e){return e?(+e^16*Math.random()>>+e/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,be)}!function(e){e.CONNECT_END="connectEnd",e.CONNECT_START="connectStart",e.DECODED_BODY_SIZE="decodedBodySize",e.DOM_COMPLETE="domComplete",e.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",e.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",e.DOM_INTERACTIVE="domInteractive",e.DOMAIN_LOOKUP_END="domainLookupEnd",e.DOMAIN_LOOKUP_START="domainLookupStart",e.ENCODED_BODY_SIZE="encodedBodySize",e.FETCH_START="fetchStart",e.LOAD_EVENT_END="loadEventEnd",e.LOAD_EVENT_START="loadEventStart",e.NAVIGATION_START="navigationStart",e.REDIRECT_END="redirectEnd",e.REDIRECT_START="redirectStart",e.REQUEST_START="requestStart",e.RESPONSE_END="responseEnd",e.RESPONSE_START="responseStart",e.SECURE_CONNECTION_START="secureConnectionStart",e.UNLOAD_EVENT_END="unloadEventEnd",e.UNLOAD_EVENT_START="unloadEventStart"}(he||(he={}));var Se=performance,Te=Math.pow(10,6),_e=Math.pow(10,9);function Ie(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*Te)]}function Ce(){var e=Se.timeOrigin;if("number"!=typeof e){var t=Se;e=t.timing&&t.timing.fetchStart}return e}function Oe(e){return Le(Ie(Ce()),Ie("number"==typeof e?e:Se.now()))}function we(e){if(Ae(e))return e;if("number"==typeof e)return e<Ce()?Oe(e):Ie(e);if(e instanceof Date)return Ie(e.getTime());throw TypeError("Invalid input type")}function Re(e){return e[0]*_e+e[1]}function Ae(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function Ne(e){return Ae(e)||"number"==typeof e||e instanceof Date}function Le(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=_e&&(n[1]-=_e,n[0]+=1),n}var Me=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function xe(e,t){return"string"==typeof t?e===t:!!e.match(t)}function ke(e,t){var n,r;if(!t)return!1;try{for(var o=Me(t),i=o.next();!i.done;i=o.next()){if(xe(e,i.value))return!0}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1}var Pe,De="exception.type",Ue="exception.message",Fe="exception.stacktrace",Be="http.method",Ge="http.url",je="http.host",We="http.scheme",He="http.status_code",Ve="http.user_agent",Xe="http.response_content_length",Ye="http.response_content_length_uncompressed",ze=De,Ze=Ue,Ke=Fe,Je=Be,qe=Ge,Qe=je,$e=We,et=He,tt=Ve,nt=Xe,rt=Ye;function ot(e,t){return t in e}function it(e,t,n,r){var o=void 0,i=void 0;ot(n,t)&&"number"==typeof n[t]&&(o=n[t]);var a=r||he.FETCH_START;if(ot(n,a)&&"number"==typeof n[a]&&(i=n[a]),void 0!==o&&void 0!==i&&o>=i)return e.addEvent(t,o),e}function at(e,t){it(e,he.FETCH_START,t),it(e,he.DOMAIN_LOOKUP_START,t),it(e,he.DOMAIN_LOOKUP_END,t),it(e,he.CONNECT_START,t),ot(t,"name")&&t.name.startsWith("https:")&&it(e,he.SECURE_CONNECTION_START,t),it(e,he.CONNECT_END,t),it(e,he.REQUEST_START,t),it(e,he.RESPONSE_START,t),it(e,he.RESPONSE_END,t);var n=t[he.ENCODED_BODY_SIZE];void 0!==n&&e.setAttribute(nt,n);var r=t[he.DECODED_BODY_SIZE];void 0!==r&&n!==r&&e.setAttribute(rt,r)}function st(){return"undefined"!=typeof location?location.origin:void 0}function ct(e,t,n,r,o,i){void 0===o&&(o=new WeakSet);var a=ut(e),s=function(e,t,n,r,o,i){var a=Re(t),s=Re(n),c=r.filter((function(t){var n=Re(we(t[he.FETCH_START])),r=Re(we(t[he.RESPONSE_END]));return t.initiatorType.toLowerCase()===(i||"xmlhttprequest")&&t.name===e&&n>=a&&r<=s}));c.length>0&&(c=c.filter((function(e){return!o.has(e)})));return c}(e=a.toString(),t,n,r,o,i);if(0===s.length)return{mainRequest:void 0};if(1===s.length)return{mainRequest:s[0]};var c=function(e){return e.slice().sort((function(e,t){var n=e[he.FETCH_START],r=t[he.FETCH_START];return n>r?1:n<r?-1:0}))}(s);if(a.origin!==st()&&c.length>1){var u=c[0],l=function(e,t,n){for(var r,o=Re(n),i=Re(we(t)),a=e[1],s=e.length,c=1;c<s;c++){var u=e[c],l=Re(we(u[he.FETCH_START])),d=o-Re(we(u[he.RESPONSE_END]));l>=i&&(!r||d<r)&&(r=d,a=u)}return a}(c,u[he.RESPONSE_END],n),d=u[he.RESPONSE_END];return l[he.FETCH_START]<d&&(l=u,u=void 0),{corsPreFlightRequest:u,mainRequest:l}}return{mainRequest:s[0]}}function ut(e){if("function"==typeof URL)return new URL(e,"undefined"!=typeof document?document.baseURI:"undefined"!=typeof location?location.href:void 0);var t=(Pe||(Pe=document.createElement("a")),Pe);return t.href=e,t}function lt(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return"/";var n=function(e,t){var n=e.nodeType,r=function(e){if(!e.parentNode)return 0;var t=[e.nodeType];e.nodeType===Node.CDATA_SECTION_NODE&&t.push(Node.TEXT_NODE);var n=Array.from(e.parentNode.childNodes);if(n=n.filter((function(n){var r=n.localName;return t.indexOf(n.nodeType)>=0&&r===e.localName})),n.length>=1)return n.indexOf(e)+1;return 0}(e),o="";if(n===Node.ELEMENT_NODE){var i=e.getAttribute("id");if(t&&i)return'//*[@id="'+i+'"]';o=e.localName}else if(n===Node.TEXT_NODE||n===Node.CDATA_SECTION_NODE)o="text()";else{if(n!==Node.COMMENT_NODE)return"";o="comment()"}if(o&&r>1)return"/"+o+"["+r+"]";return"/"+o}(e,t);if(t&&n.indexOf("@id")>0)return n;var r="";return e.parentNode&&(r+=lt(e.parentNode,!1)),r+=n}function dt(e,t){var n=t||[];return("string"==typeof n||n instanceof RegExp)&&(n=[n]),ut(e).origin===st()||n.some((function(t){return xe(e,t)}))}var pt="0000000000000000",ft="00000000000000000000000000000000",ht={traceId:ft,spanId:pt,traceFlags:C.NONE},mt=function(){function e(e){void 0===e&&(e=ht),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),gt=N("OpenTelemetry Context Key SPAN");function vt(e){return e.getValue(gt)||void 0}function yt(){return vt(G.getInstance().active())}function Et(e,t){return e.setValue(gt,t)}function bt(e){return e.deleteValue(gt)}function St(e,t){return Et(e,new mt(t))}function Tt(e){var t;return null===(t=vt(e))||void 0===t?void 0:t.spanContext()}var _t=/^([0-9a-f]{32})$/i,It=/^[0-9a-f]{16}$/i;function Ct(e){return _t.test(e)&&e!==ft}function Ot(e){return It.test(e)&&e!==pt}function wt(e){return Ct(e.traceId)&&Ot(e.spanId)}function Rt(e){return new mt(e)}var At=G.getInstance(),Nt=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=At.active()),Boolean(null==t?void 0:t.root))return new mt;var r,o=n&&Tt(n);return"object"==typeof(r=o)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&wt(o)?new mt(o):new mt},e.prototype.startActiveSpan=function(e,t,n,r){var o,i,a;if(!(arguments.length<2)){2===arguments.length?a=t:3===arguments.length?(o=t,a=n):(o=t,i=n,a=r);var s=null!=i?i:At.active(),c=this.startSpan(e,o,s),u=Et(s,c);return At.with(u,a,void 0,c)}},e}();var Lt=new Nt,Mt=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Lt},e}(),xt=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new Nt},e}()),kt=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!==(r=this.getDelegateTracer(e,t,n))&&void 0!==r?r:new Mt(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:xt},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)},e}(),Pt="trace",Dt=function(){function e(){this._proxyTracerProvider=new kt,this.wrapSpanContext=Rt,this.isSpanContextValid=wt,this.deleteSpan=bt,this.getSpan=vt,this.getActiveSpan=yt,this.getSpanContext=Tt,this.setSpan=Et,this.setSpanContext=St}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=v(Pt,this._proxyTracerProvider,R.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return y(Pt)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){E(Pt,R.instance()),this._proxyTracerProvider=new kt},e}().getInstance(),Ut=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ft=function(){function e(){}return e.prototype.createGauge=function(e,t){return Jt},e.prototype.createHistogram=function(e,t){return qt},e.prototype.createCounter=function(e,t){return Kt},e.prototype.createUpDownCounter=function(e,t){return Qt},e.prototype.createObservableGauge=function(e,t){return en},e.prototype.createObservableCounter=function(e,t){return $t},e.prototype.createObservableUpDownCounter=function(e,t){return tn},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),Bt=function(){},Gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ut(t,e),t.prototype.add=function(e,t){},t}(Bt),jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ut(t,e),t.prototype.add=function(e,t){},t}(Bt),Wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ut(t,e),t.prototype.record=function(e,t){},t}(Bt),Ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ut(t,e),t.prototype.record=function(e,t){},t}(Bt),Vt=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),Xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ut(t,e),t}(Vt),Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ut(t,e),t}(Vt),zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ut(t,e),t}(Vt),Zt=new Ft,Kt=new Gt,Jt=new Wt,qt=new Ht,Qt=new jt,$t=new Xt,en=new Yt,tn=new zt;var nn=new(function(){function e(){}return e.prototype.getMeter=function(e,t,n){return Zt},e}()),rn="metrics",on=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return v(rn,e,R.instance())},e.prototype.getMeterProvider=function(){return y(rn)||nn},e.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},e.prototype.disable=function(){E(rn,R.instance())},e}().getInstance(),an="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},sn=Symbol.for("io.opentelemetry.js.api.logs"),cn=an;var un,ln,dn,pn,fn,hn=function(){function e(){}return e.prototype.emit=function(e){},e}(),mn=(new hn,new(function(){function e(){}return e.prototype.getLogger=function(e,t,n){return new hn},e}())),gn=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalLoggerProvider=function(e){return cn[sn]?this.getLoggerProvider():(cn[sn]=(t=1,n=e,r=mn,function(e){return e===t?n:r}),e);var t,n,r},e.prototype.getLoggerProvider=function(){var e,t;return null!==(t=null===(e=cn[sn])||void 0===e?void 0:e.call(cn,1))&&void 0!==t?t:mn},e.prototype.getLogger=function(e,t,n){return this.getLoggerProvider().getLogger(e,t,n)},e.prototype.disable=function(){delete cn[sn]},e}(),vn=gn.getInstance(),yn=n(132),En=function(){return En=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},En.apply(this,arguments)},bn=function(){function e(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._wrap=yn.wrap,this._unwrap=yn.unwrap,this._massWrap=yn.massWrap,this._massUnwrap=yn.massUnwrap,this._config=En({enabled:!0},n),this._diag=A.createComponentLogger({namespace:e}),this._tracer=Dt.getTracer(e,t),this._meter=on.getMeter(e,t),this._logger=vn.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(e.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),e.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),e.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},e.prototype.getModuleDefinitions=function(){var e,t=null!==(e=this.init())&&void 0!==e?e:[];return Array.isArray(t)?t:[t]},e.prototype._updateMetricInstruments=function(){},e.prototype.getConfig=function(){return this._config},e.prototype.setConfig=function(e){this._config=En({},e)},e.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(e.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),e.prototype._runSpanCustomizationHook=function(e,t,n,r){if(e)try{e(n,r)}catch(uo){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},uo)}},e}(),Sn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tn=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o._config.enabled&&o.enable(),o}return Sn(t,e),t}(bn);!function(e){e.ERROR="error",e.NETWORK_REQUEST="network-request",e.LOG="log",e.USER_INTERACTION="user-interaction",e.WEB_VITALS="web-vitals",e.LONG_TASK="longtask",e.RESOURCES="resources",e.INTERNAL="internal",e.DOM="dom",e.CUSTOM_MEASUREMENT="custom-measurement",e.MEMORY_USAGE="memory-usage",e.SCREENSHOT="screenshot",e.CUSTOM_SPAN="custom-span"}(un||(un={})),function(e){e.Resource="resource",e.LongTask="longtask",e.Navigation="navigation",e.SoftNavigation="soft-navigation"}(ln||(ln={})),function(e){e.METHOD="http.method",e.URL="http.url",e.STATUS_CODE="http.status_code",e.HOST="http.host",e.SCHEME="http.scheme",e.STATUS_TEXT="http.status_text",e.RESPONSE_CONTENT_LENGTH="http.response_content_length"}(dn||(dn={})),function(e){e.PAGE="page",e.NETWORK_REQUEST="network_request"}(pn||(pn={})),function(e){e[e.Debug=1]="Debug",e[e.Verbose=2]="Verbose",e[e.Info=3]="Info",e[e.Warn=4]="Warn",e[e.Error=5]="Error",e[e.Critical=6]="Critical"}(fn||(fn={}));var _n=n(263),In=n.n(_n),Cn=6e4;function On(){return(new Date).getTime()}var wn={"Content-Encoding":"gzip"},Rn=1e3,An="rum_session",Nn="rum_prev_session",Ln={sessionSampleRate:100,onlyWithErrorConfig:{enable:!1}},Mn="rumSessionManager",xn="rumSessionRecorder",kn="rumSessionRecorderSegmentsMap",Pn="rumSnapshotManager",Dn={errorCount:0,viewCount:0,actionCount:0,hasRecording:!1,hasScreenshot:!1};function Un(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"__cx_global__",{get:function(){return this},configurable:!0});var e=__cx_global__;return delete Object.prototype.__cx_global__,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}var Fn=Un();function Bn(){return Fn[Pn]}function Gn(){return Fn[Mn]}function jn(){return Fn[xn]}function Wn(){return Fn[Ba]}var Hn="__globalSpan__",Vn="__customTracer__",Xn="__customTracerIgnoredInstruments__";function Yn(){return Fn[Hn]}function zn(){delete Fn[Hn]}function Zn(e){var t;return Yn()&&!(null===(t=Fn[Xn])||void 0===t?void 0:t.includes(e))}function Kn(e){var t,n=Yn();return n.withContext((function(){var r=n.startCustomSpan(e);t=r.span})),t}var Jn,qn="otelReady",Qn="attrProcessor";function $n(e){e[qn]=!0}function er(e,t){void 0===t&&(t={}),e.setAttribute(Ja.CUSTOM_LABELS,JSON.stringify(tr(t)))}function tr(e){var t;void 0===e&&(e={});var n=(null===(t=Fn[Qn])||void 0===t?void 0:t.getCustomLabels())||{};return r(r({},n),e)}!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(Jn||(Jn={}));var nr,rr="__cx_metadata__",or="errors",ir={TYPE:"error_type",STACK:"error_stack",MESSAGE:"error_message",DATA:"error_custom_data"};function ar(e,t){return i(this,void 0,Promise,(function(){var n,r,o,i,s,c;return a(this,(function(a){switch(a.label){case 0:return n=t.stack,r=t.message,o=t.name,i=!!(null==n?void 0:n.includes("at ")),t&&i?(s=Wn().supportMfe,c=In().parse({stack:n.substring(0,4096),message:r,name:o}).map((function(e){return{fileName:e.fileName,columnNumber:e.columnNumber,lineNumber:e.lineNumber,functionName:e.functionName}})),s?[4,sr(c,e)]:[3,2]):[3,3];case 1:a.sent(),a.label=2;case 2:e[ir.STACK]=c,a.label=3;case 3:return[2]}}))}))}function sr(e,t){return i(this,void 0,Promise,(function(){var n,o,i,s;return a(this,(function(a){switch(a.label){case 0:n=0,a.label=1;case 1:return n<e.length?[4,cr(e[n].fileName)]:[3,4];case 2:o=a.sent(),e[n]=r(r({},e[n]),o||{isShell:!0}),a.label=3;case 3:return n++,[3,1];case 4:return i=c(e,1),s=i[0],function(e,t){var n=t.app,r=t.version,o=t.isShell;o||er(e,{mfeApp:n,mfeVersion:r})}(t,s),[2]}}))}))}function cr(){return i(this,arguments,Promise,(function(e){var t,n,o,i,s,u,l,d;return void 0===e&&(e=""),a(this,(function(a){switch(a.label){case 0:if(n=Fn[rr],o="cx-metadata.json",i=c(e.match(/https?:\/\/.*\//),1),!(s=i[0]))return[3,7];if(u=void 0,null==n?void 0:n.has(s))return[3,6];a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch("".concat(s).concat(o),{cache:"no-cache"})];case 2:return u=a.sent(),l=[{}],[4,u.json()];case 3:return t=r.apply(void 0,[r.apply(void 0,l.concat([a.sent()])),{mfePath:s}]),[3,5];case 4:return d=a.sent(),Wn().debug&&console.warn("Coralogix Browser SDK - Error fetching metadata",d),[3,5];case 5:return Fn[rr]=n.set(s,t),[3,7];case 6:t=null==n?void 0:n.get(s),a.label=7;case 7:return[2,t]}}))}))}!function(e){e.CONSOLE="console",e.WINDOW="window",e.UNHANDLED_REJECTION="unhandledrejection",e.DOCUMENT="document",e.CAPTURED="captured"}(nr||(nr={}));var ur=function(e){return function(t){e.report(nr.WINDOW,t)}},lr=function(e){return function(t){e.report(nr.UNHANDLED_REJECTION,t.reason)}},dr=function(e){return function(t){e.report(nr.DOCUMENT,t)}};function pr(e){e.setAttribute(Ja.EVENT_TYPE,un.ERROR),e.setAttribute(Ja.SEVERITY,fn.Error)}var fr=function(e){function n(t){var n=e.call(this,or,"1",t)||this;return n.parseErrorObject=function(e){var t;return null!==(t=null==e?void 0:e.message)&&void 0!==t?t:JSON.stringify(e,ds())},Wn().supportMfe&&(Fn[rr]=new Map),n}return t(n,e),n.prototype.init=function(){},n.prototype.enable=function(){var e;(0,yn.wrap)(console,"error",(e=this,function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.report(nr.CONSOLE,n),t.apply(e,n)}})),Fn.addEventListener("error",ur(this)),Fn.addEventListener("unhandledrejection",lr(this)),document.documentElement.addEventListener("error",dr(this),{capture:!0})},n.prototype.disable=function(){(0,yn.unwrap)(console,"error"),Fn.removeEventListener("error",ur(this)),Fn.removeEventListener("unhandledrejection",lr(this)),document.documentElement.removeEventListener("error",dr(this),{capture:!0})},n.prototype.report=function(e,t){var n=this;if(!(t instanceof Array&&0===t.length))switch(!0){case t instanceof Error:this.reportError(e,t);break;case t instanceof ErrorEvent:this.reportErrorEvent(e,t);break;case t instanceof Event:this.reportEvent(e,t);break;case"string"==typeof t:this.reportString(e,t);break;case t instanceof Array:var r=t.find((function(e){return e instanceof Error})),o=t.map((function(e){return"string"==typeof e?e:n.parseErrorObject(e)})).join(" ");this.reportString(e,o,r);break;default:this.reportString(e,"string"==typeof t?t:this.getPossibleEventMessage(t))}},n.prototype.reportError=function(e,t,n,r){return i(this,void 0,void 0,(function(){var o,i,s,c;return a(this,(function(a){switch(a.label){case 0:return o=t.message,i=t.name,s=this.createSpan("error"),c=o.split("\n")[0],pr(s),s.setAttribute(Ja.SOURCE,e),s.setAttribute(ir.TYPE,i),s.setAttribute(ir.MESSAGE,c),n&&(s[ir.DATA]=JSON.stringify(n,ds())),r&&er(s,r),[4,ar(s,t)];case 1:return a.sent(),s.end(),[2]}}))}))},n.prototype.reportString=function(e,t,n){return i(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return pr(r=this.createSpan(e)),r.setAttribute(Ja.SOURCE,e),r.setAttribute(ir.MESSAGE,null==t?void 0:t.substring(0,1024)),n?[4,ar(r,n)]:[3,2];case 1:o.sent(),o.label=2;case 2:return r.end(),[2]}}))}))},n.prototype.reportErrorEvent=function(e,t){var n=t.error,r=t.message,o=null!=n?n:r;this.report(e,o)},n.prototype.reportEvent=function(e,t){if(t.target){var n=this.createSpan(e);pr(n),n.setAttribute(Ja.SOURCE,e),t.target&&(n.setAttribute("target_element",t.target.tagName),n.setAttribute("target_xpath",lt(t.target,!0)),n.setAttribute("target_src",t.target.src)),n.end()}},n.prototype.createSpan=function(e){return Zn(un.ERROR)?Kn(e):this.tracer.startSpan(e)},n.prototype.getPossibleEventMessage=function(e){var t=e||{},n=t.message,r=t.statusMessage;return n&&"string"==typeof n?n:r&&"string"==typeof r?r:JSON.stringify(e)},n}(Tn),hr=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),mr={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},gr={set:function(e,t,n){null!=e&&(e[t]=n)}},vr=N("OpenTelemetry Baggage Key");function yr(e){return e.getValue(vr)||void 0}function Er(){return yr(G.getInstance().active())}function br(e,t){return e.setValue(vr,t)}function Sr(e){return e.deleteValue(vr)}var Tr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},_r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ir=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=Tr(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=new e(this._entries);try{for(var a=_r(r),s=a.next();!s.done;s=a.next()){var c=s.value;i._entries.delete(c)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),Cr=Symbol("BaggageEntryMetadata"),Or=R.instance();function wr(e){return void 0===e&&(e={}),new Ir(new Map(Object.entries(e)))}var Rr,Ar="propagation",Nr=new hr,Lr=function(){function e(){this.createBaggage=wr,this.getBaggage=yr,this.getActiveBaggage=Er,this.setBaggage=br,this.deleteBaggage=Sr}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return v(Ar,e,R.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=gr),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=mr),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){E(Ar,R.instance())},e.prototype._getGlobalPropagator=function(){return y(Ar)||Nr},e}().getInstance();!function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(Rr||(Rr={}));var Mr;function xr(e,t,n){var r,o;try{o=e()}catch(uo){r=uo}finally{if(t(r,o),r&&!n)throw r;return o}}function kr(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}!function(e){e.COMPONENT="component",e.HTTP_ERROR_NAME="http.error_name",e.HTTP_STATUS_TEXT="http.status_text"}(Mr||(Mr={}));var Pr,Dr,Ur,Fr="0.52.1",Br=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gr="object"==typeof process&&"node"===(null===(Pr=process.release)||void 0===Pr?void 0:Pr.name),jr=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,"@opentelemetry/instrumentation-fetch",Fr,t)||this;return n.component="fetch",n.version=Fr,n.moduleName=n.component,n._usedResources=new WeakSet,n._tasksCount=0,n}return Br(t,e),t.prototype.init=function(){},t.prototype._addChildSpan=function(e,t){var n=this.tracer.startSpan("CORS Preflight",{startTime:t[he.FETCH_START]},Dt.setSpan(j.active(),e));this.getConfig().ignoreNetworkEvents||at(n,t),n.end(t[he.RESPONSE_END])},t.prototype._addFinalSpanAttributes=function(e,t){var n=ut(t.url);e.setAttribute(et,t.status),null!=t.statusText&&e.setAttribute(Mr.HTTP_STATUS_TEXT,t.statusText),e.setAttribute(Qe,n.host),e.setAttribute($e,n.protocol.replace(":","")),"undefined"!=typeof navigator&&e.setAttribute(tt,navigator.userAgent)},t.prototype._addHeaders=function(e,t){if(!dt(t,this.getConfig().propagateTraceHeaderCorsUrls)){var n={};return Lr.inject(j.active(),n),void(Object.keys(n).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}if(e instanceof Request)Lr.inject(j.active(),e.headers,{set:function(e,t,n){return e.set(t,"string"==typeof n?n:String(n))}});else if(e.headers instanceof Headers)Lr.inject(j.active(),e.headers,{set:function(e,t,n){return e.set(t,"string"==typeof n?n:String(n))}});else if(e.headers instanceof Map)Lr.inject(j.active(),e.headers,{set:function(e,t,n){return e.set(t,"string"==typeof n?n:String(n))}});else{n={};Lr.inject(j.active(),n),e.headers=Object.assign({},n,e.headers||{})}},t.prototype._clearResources=function(){0===this._tasksCount&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},t.prototype._createSpan=function(e,t){var n;if(void 0===t&&(t={}),!ke(e,this.getConfig().ignoreUrls)){var r=(t.method||"GET").toUpperCase(),o="HTTP "+r;return this.tracer.startSpan(o,{kind:Rr.CLIENT,attributes:(n={},n[Mr.COMPONENT]=this.moduleName,n[Je]=r,n[qe]=e,n)})}this._diag.debug("ignoring span as url matches ignored url")},t.prototype._findResourceAndAddNetworkEvents=function(e,t,n){var r=t.entries;if(!r.length){if(!performance.getEntriesByType)return;r=performance.getEntriesByType("resource")}var o=ct(t.spanUrl,t.startTime,n,r,this._usedResources,"fetch");if(o.mainRequest){var i=o.mainRequest;this._markResourceAsUsed(i);var a=o.corsPreFlightRequest;a&&(this._addChildSpan(e,a),this._markResourceAsUsed(a)),this.getConfig().ignoreNetworkEvents||at(e,i)}},t.prototype._markResourceAsUsed=function(e){this._usedResources.add(e)},t.prototype._endSpan=function(e,t,n){var r=this,o=Ie(Date.now()),i=Oe();this._addFinalSpanAttributes(e,n),setTimeout((function(){var n;null===(n=t.observer)||void 0===n||n.disconnect(),r._findResourceAndAddNetworkEvents(e,t,i),r._tasksCount--,r._clearResources(),e.end(o)}),300)},t.prototype._patchConstructor=function(){var e=this;return function(t){var n=e;return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=this,i=ut(e[0]instanceof Request?e[0].url:String(e[0])).href,a=e[0]instanceof Request?e[0]:e[1]||{},s=n._createSpan(i,a);if(!s)return t.apply(this,e);var c=n._prepareSpanData(i);function u(e,t){n._applyAttributesAfterFetch(e,a,t),n._endSpan(e,c,{status:t.status||0,statusText:t.message,url:i})}function l(e,t){n._applyAttributesAfterFetch(e,a,t),t.status>=200&&t.status<400?n._endSpan(e,c,t):n._endSpan(e,c,{status:t.status,statusText:t.statusText,url:i})}function d(e,t,n){try{var r=n.clone(),o=n.clone(),i=r.body;if(i){var a=i.getReader(),s=function(){a.read().then((function(t){t.done?l(e,o):s()}),(function(t){u(e,t)}))};s()}else l(e,n)}finally{t(n)}}function p(e,t,n){try{u(e,n)}finally{t(n)}}return new Promise((function(e,r){return j.with(Dt.setSpan(j.active(),s),(function(){return n._addHeaders(a,i),n._tasksCount++,t.apply(o,a instanceof Request?[a]:[i,a]).then(d.bind(o,s,e),p.bind(o,s,r))}))}))}}},t.prototype._applyAttributesAfterFetch=function(e,t,n){var r=this,o=this.getConfig().applyCustomAttributesOnSpan;o&&xr((function(){return o(e,t,n)}),(function(e){e&&r._diag.error("applyCustomAttributesOnSpan",e)}),!0)},t.prototype._prepareSpanData=function(e){var t=Oe(),n=[];if("function"!=typeof PerformanceObserver)return{entries:n,startTime:t,spanUrl:e};var r=new PerformanceObserver((function(t){t.getEntries().forEach((function(t){"fetch"===t.initiatorType&&t.name===e&&n.push(t)}))}));return r.observe({entryTypes:["resource"]}),{entries:n,observer:r,startTime:t,spanUrl:e}},t.prototype.enable=function(){Gr?this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()"):(kr(fetch)&&(this._unwrap(re,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(re,"fetch",this._patchConstructor()))},t.prototype.disable=function(){Gr||(this._unwrap(re,"fetch"),this._usedResources=new WeakSet)},t}(Tn),Wr=function(e){var t,n=e.traceParentInHeader,r=null===(t=null==n?void 0:n.options)||void 0===t?void 0:t.propagateTraceHeaderCorsUrls;(null==n?void 0:n.enabled)&&r&&(e.propagateTraceHeaderCorsUrls=r)},Hr=function(){function e(){var e=this;this.responseBodyParsers=new Map([[Dr.Json,function(t){return i(e,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return n=(e=JSON).stringify,[4,t.json()];case 1:return[2,n.apply(e,[r.sent()])]}}))}))}],[Dr.TextPlain,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,t.text()];case 1:return[2,e.sent()]}}))}))}],[Dr.TextHtml,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,t.text()];case 1:return[2,e.sent()]}}))}))}],[Dr.TextCss,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,t.text()];case 1:return[2,e.sent()]}}))}))}],[Dr.TextJavascript,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,t.text()];case 1:return[2,e.sent()]}}))}))}],[Dr.Xml,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,t.text()];case 1:return[2,e.sent()]}}))}))}],[Dr.FormData,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,t.text()];case 1:return[2,e.sent()]}}))}))}]]),this.requestBodySerializers=new Map([[Ur.String,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){return[2,t]}))}))}],[Ur.Blob,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){return[2,t.text()]}))}))}],[Ur.FormData,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){return[2,this.serializeFormData(t)]}))}))}],[Ur.URLSearchParams,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){return[2,t.toString()]}))}))}],[Ur.JsonObject,function(t){return i(e,void 0,void 0,(function(){return a(this,(function(e){return[2,JSON.stringify(t)]}))}))}]])}return e.prototype.resolveConfigForUrl=function(e,t){return void 0===t&&(t=[]),t.find((function(t){var n=t.url;return n===e||n instanceof RegExp&&n.test(e)}))},e.prototype.stringifyRequestBody=function(e){return i(this,void 0,Promise,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return(null==e?void 0:e.body)?[4,this.serializeRequestBody(e.body)]:[2,""];case 1:return t=n.sent(),[2,this.truncateIfExceedsLimit(t)]}}))}))},e.prototype.stringifyResponseBody=function(e){return i(this,void 0,Promise,(function(){var t,n,r,o;return a(this,(function(i){switch(i.label){case 0:return t=e.headers.get("content-type")||"",n=t.split(";")[0].trim(),(r=this.responseBodyParsers.get(n))?[4,r(e)]:[2,""];case 1:return o=i.sent(),[2,this.truncateIfExceedsLimit(o)]}}))}))},e.prototype.truncateIfExceedsLimit=function(e){return e.length>Ua?void 0:e},e.prototype.serializeRequestBody=function(e){return i(this,void 0,Promise,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return(t=this.requestBodySerializers.get(e.constructor.name))?[4,t(e)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n="",r.label=3;case 3:return[2,n]}}))}))},e.prototype.serializeFormData=function(e){var t="";return e.forEach((function(e,n){t+="".concat(n,": ").concat(e,"\n")})),t.trim()},e}();!function(e){e.Json="application/json",e.TextPlain="text/plain",e.TextHtml="text/html",e.TextCss="text/css",e.TextJavascript="application/javascript",e.Xml="application/xml",e.FormData="multipart/form-data"}(Dr||(Dr={})),function(e){e.String="String",e.Blob="Blob",e.FormData="FormData",e.URLSearchParams="URLSearchParams",e.JsonObject="JsonObject",e.Unknown="Unknown"}(Ur||(Ur={}));var Vr,Xr=function(){function e(){}return e.prototype.filterHeaders=function(e,t){if(void 0===t&&(t=[]),!e)return new Map;var n=this.normalizeHeaders(e),r=new Map;return t.forEach((function(e){var t=e.toLowerCase();n.has(t)&&r.set(e,n.get(t))})),r},e.prototype.normalizeHeaders=function(e){if("string"==typeof e)return this.normalizeHeadersFromString(e);var t=new Headers(e),n=new Map;return t.forEach((function(e,t){n.set(t.toLowerCase(),e)})),n},e.prototype.normalizeHeadersFromString=function(e){var t=new Map;return e?(e.trim().split(/\r\n/).forEach((function(e){var n=c(e.split(": ",2),2),r=n[0],o=n[1];r&&o&&t.set(r.trim().toLowerCase(),o.trim())})),t):t},e}(),Yr="request_headers",zr="response_headers",Zr="response_payload",Kr="request_payload";function Jr(e){if(Zn(un.NETWORK_REQUEST)){var t=Yn().span.spanContext(),n=t.traceId,r=t.spanId;e._spanContext.traceId=n,e.parentSpanId=r}}!function(e){e.FETCH="fetch"}(Vr||(Vr={}));var qr,Qr=function(e){function n(t){var n=this;return Wr(t),t.applyCustomAttributesOnSpan=function(e,t,r){$n(e),Jr(e),n.setNetworkSpanAttributes(e,t,r)},(n=e.call(this,t)||this).networkDataManager=new Hr,n.headersManager=new Xr,n}return t(n,e),n.prototype.setNetworkSpanAttributes=function(e,t,n){return i(this,void 0,Promise,(function(){var r,o,i,s,c;return a(this,(function(a){switch(a.label){case 0:return r=n.status,o=Wn().networkExtraConfig,i=e.attributes["http.url"]||"",(s=this.networkDataManager.resolveConfigForUrl(i,o))?[4,this.setRequestAttributes(e,t,s)]:[3,3];case 1:return a.sent(),[4,this.setResponseAttributes(e,n,s)];case 2:a.sent(),a.label=3;case 3:return e.setAttributes(((c={})[Ja.SEVERITY]=is(r)?fn.Error:fn.Info,c[Ja.EVENT_TYPE]=un.NETWORK_REQUEST,c[Ja.SOURCE]=Vr.FETCH,c)),[2]}}))}))},n.prototype.setRequestAttributes=function(e,t,n){return i(this,void 0,Promise,(function(){var r,o,i,s,c,u;return a(this,(function(a){switch(a.label){case 0:r=n.reqHeaders,o=n.collectReqPayload,a.label=1;case 1:return a.trys.push([1,5,,6]),o?[4,this.networkDataManager.stringifyRequestBody(t)]:[3,3];case 2:return s=a.sent(),[3,4];case 3:s=void 0,a.label=4;case 4:return i=s,c=(null==r?void 0:r.length)?this.headersManager.filterHeaders(t.headers,r):void 0,i&&(e[Kr]=i),(null==c?void 0:c.size)&&(e[Yr]=Object.fromEntries(c)),[3,6];case 5:return u=a.sent(),Wn().debug&&console.debug("Error setting request attributes on span:",u),[3,6];case 6:return[2]}}))}))},n.prototype.setResponseAttributes=function(e,t,n){return i(this,void 0,Promise,(function(){var r,o,i,s,c,u;return a(this,(function(a){switch(a.label){case 0:if(r=n.resHeaders,o=n.collectResPayload,!(t instanceof Response))return[3,6];a.label=1;case 1:return a.trys.push([1,5,,6]),o?[4,this.networkDataManager.stringifyResponseBody(t)]:[3,3];case 2:return s=a.sent(),[3,4];case 3:s=void 0,a.label=4;case 4:return i=s,c=(null==r?void 0:r.length)?this.headersManager.filterHeaders(t.headers,r):void 0,i&&(e[Zr]=i),(null==c?void 0:c.size)&&(e[zr]=Object.fromEntries(c)),[3,6];case 5:return u=a.sent(),Wn().debug&&console.debug("Error setting request attributes on span:",u),[3,6];case 6:return[2]}}))}))},n}(jr);!function(e){e.METHOD_OPEN="open",e.METHOD_SEND="send",e.EVENT_ABORT="abort",e.EVENT_ERROR="error",e.EVENT_LOAD="loaded",e.EVENT_TIMEOUT="timeout"}(qr||(qr={}));var $r,eo="0.52.1";!function(e){e.HTTP_STATUS_TEXT="http.status_text"}($r||($r={}));var to,no=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ro=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,"@opentelemetry/instrumentation-xml-http-request",eo,t)||this;return n.component="xml-http-request",n.version=eo,n.moduleName=n.component,n._tasksCount=0,n._xhrMem=new WeakMap,n._usedResources=new WeakSet,n}return no(t,e),t.prototype.init=function(){},t.prototype._addHeaders=function(e,t){if(!dt(ut(t).href,this.getConfig().propagateTraceHeaderCorsUrls)){var n={};return Lr.inject(j.active(),n),void(Object.keys(n).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}var r={};Lr.inject(j.active(),r),Object.keys(r).forEach((function(t){e.setRequestHeader(t,String(r[t]))}))},t.prototype._addChildSpan=function(e,t){var n=this;j.with(Dt.setSpan(j.active(),e),(function(){var e=n.tracer.startSpan("CORS Preflight",{startTime:t[he.FETCH_START]});n.getConfig().ignoreNetworkEvents||at(e,t),e.end(t[he.RESPONSE_END])}))},t.prototype._addFinalSpanAttributes=function(e,t,n){if("string"==typeof n){var r=ut(n);void 0!==t.status&&e.setAttribute(et,t.status),void 0!==t.statusText&&e.setAttribute($r.HTTP_STATUS_TEXT,t.statusText),e.setAttribute(Qe,r.host),e.setAttribute($e,r.protocol.replace(":","")),e.setAttribute(tt,navigator.userAgent)}},t.prototype._applyAttributesAfterXHR=function(e,t){var n=this,r=this.getConfig().applyCustomAttributesOnSpan;"function"==typeof r&&xr((function(){return r(e,t)}),(function(e){e&&n._diag.error("applyCustomAttributesOnSpan",e)}),!0)},t.prototype._addResourceObserver=function(e,t){var n=this._xhrMem.get(e);n&&"function"==typeof PerformanceObserver&&"function"==typeof PerformanceResourceTiming&&(n.createdResources={observer:new PerformanceObserver((function(e){var r=e.getEntries(),o=ut(t);r.forEach((function(e){"xmlhttprequest"===e.initiatorType&&e.name===o.href&&n.createdResources&&n.createdResources.entries.push(e)}))})),entries:[]},n.createdResources.observer.observe({entryTypes:["resource"]}))},t.prototype._clearResources=function(){0===this._tasksCount&&this.getConfig().clearTimingResources&&(Se.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},t.prototype._findResourceAndAddNetworkEvents=function(e,t,n,r,o){if(n&&r&&o&&e.createdResources){var i=e.createdResources.entries;i&&i.length||(i=Se.getEntriesByType("resource"));var a=ct(ut(n).href,r,o,i,this._usedResources);if(a.mainRequest){var s=a.mainRequest;this._markResourceAsUsed(s);var c=a.corsPreFlightRequest;c&&(this._addChildSpan(t,c),this._markResourceAsUsed(c)),this.getConfig().ignoreNetworkEvents||at(t,s)}}},t.prototype._cleanPreviousSpanInformation=function(e){var t=this._xhrMem.get(e);if(t){var n=t.callbackToRemoveEvents;n&&n(),this._xhrMem.delete(e)}},t.prototype._createSpan=function(e,t,n){var r;if(!ke(t,this.getConfig().ignoreUrls)){var o=n.toUpperCase(),i=this.tracer.startSpan(o,{kind:Rr.CLIENT,attributes:(r={},r[Je]=n,r[qe]=ut(t).toString(),r)});return i.addEvent(qr.METHOD_OPEN),this._cleanPreviousSpanInformation(e),this._xhrMem.set(e,{span:i,spanUrl:t}),i}this._diag.debug("ignoring span as url matches ignored url")},t.prototype._markResourceAsUsed=function(e){this._usedResources.add(e)},t.prototype._patchOpen=function(){var e=this;return function(t){var n=e;return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=e[0],i=e[1];return n._createSpan(this,i,o),t.apply(this,e)}}},t.prototype._patchSend=function(){var e=this;function t(t,n){var r=e._xhrMem.get(n);if(r){r.status=n.status,r.statusText=n.statusText,e._xhrMem.delete(n),r.span&&e._applyAttributesAfterXHR(r.span,n);var o=Oe(),i=Date.now();setTimeout((function(){!function(t,n,r,o){var i=n.callbackToRemoveEvents;"function"==typeof i&&i();var a=n.span,s=n.spanUrl,c=n.sendStartTime;a&&(e._findResourceAndAddNetworkEvents(n,a,s,c,r),a.addEvent(t,o),e._addFinalSpanAttributes(a,n,s),a.end(o),e._tasksCount--),e._clearResources()}(t,r,o,i)}),300)}}function n(){t(qr.EVENT_ERROR,this)}function r(){t(qr.EVENT_ABORT,this)}function o(){t(qr.EVENT_TIMEOUT,this)}function i(){this.status<299?t(qr.EVENT_LOAD,this):t(qr.EVENT_ERROR,this)}return function(t){return function(){for(var a=this,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var u=e._xhrMem.get(this);if(!u)return t.apply(this,s);var l=u.span,d=u.spanUrl;return l&&d&&j.with(Dt.setSpan(j.active(),l),(function(){e._tasksCount++,u.sendStartTime=Oe(),l.addEvent(qr.METHOD_SEND),a.addEventListener("abort",r),a.addEventListener("error",n),a.addEventListener("load",i),a.addEventListener("timeout",o),u.callbackToRemoveEvents=function(){!function(t){t.removeEventListener("abort",r),t.removeEventListener("error",n),t.removeEventListener("load",i),t.removeEventListener("timeout",o);var a=e._xhrMem.get(t);a&&(a.callbackToRemoveEvents=void 0)}(a),u.createdResources&&u.createdResources.observer.disconnect()},e._addHeaders(a,d),e._addResourceObserver(a,d)})),t.apply(this,s)}}},t.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),kr(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),kr(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},t.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},t}(Tn);!function(e){e.XHR="xhr"}(to||(to={}));var oo,io=function(e){function n(t){var n=this;return Wr(t),t.applyCustomAttributesOnSpan=function(e,t){$n(e),Jr(e),n.setNetworkSpanAttributes(e,t)},(n=e.call(this,t)||this).networkDataManager=new Hr,n.headersManager=new Xr,n}return t(n,e),n.prototype.setNetworkSpanAttributes=function(e,t){var n,r=t.status,o=Wn().networkExtraConfig,i=this.networkDataManager.resolveConfigForUrl(t.responseURL,o);e.setAttributes(((n={})[Ja.SEVERITY]=is(r)?fn.Error:fn.Info,n[Ja.EVENT_TYPE]=un.NETWORK_REQUEST,n[Ja.SOURCE]=to.XHR,n)),i&&this.setResponseAttributes(e,t,i)},n.prototype.setResponseAttributes=function(e,t,n){var r=n.resHeaders,o=n.collectResPayload?this.networkDataManager.truncateIfExceedsLimit(t.responseText):void 0,i=(null==r?void 0:r.length)?this.headersManager.filterHeaders(t.getAllResponseHeaders(),r):void 0;o&&(e[Zr]=o),(null==i?void 0:i.size)&&(e[zr]=Object.fromEntries(i))},n}(ro);!function(e){e.CODE="code"}(oo||(oo={}));var ao,so,co=function(e){function n(t){var n,r=e.call(this,un.LOG,"1",t)||this;return r.stringifyCustomLogData=null===(n=Wn())||void 0===n?void 0:n.stringifyCustomLogData,r}return t(n,e),n.prototype.init=function(){},n.prototype.disable=function(){},n.prototype.enable=function(){},n.prototype.log=function(e,t,n){var r=this.tracer.startSpan(un.LOG);r.setAttribute(Ja.EVENT_TYPE,un.LOG),r.setAttribute(Ja.SOURCE,oo.CODE),r.setAttribute(Ja.SEVERITY,e),r.setAttribute(Ja.LOG,JSON.stringify({severity:e,message:t,data:this.stringifyCustomLogData?JSON.stringify(n,ds()):n})),r.end()},n}(Tn),uo=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},lo=function(e){if("loading"===document.readyState)return"loading";var t=uo();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},po=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},fo=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,o=r.id?"#"+r.id:po(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+o.length>(t||100)-1)return n||o;if(n=n?o+">"+n:o,r.id)break;e=r.parentNode}}catch(e){}return n},ho=function(e,t,n,r){var o,i;return function(a){t.value>=0&&(a||r)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},mo=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},go=-1,vo=function(){return go},yo=function(e){addEventListener("pageshow",(function(t){t.persisted&&(go=t.timeStamp,e(t))}),!0)},Eo=function(){var e=uo();return e&&e.activationStart||0},bo=function(e,t,n,r){var o,i=(null===(o=uo())||void 0===o?void 0:o.navigationId)||"1",a=uo(),s="navigate";return n?s=n:vo()>=0?s="back-forward-cache":a&&(document.prerendering||Eo()>0?s="prerender":document.wasDiscarded?s="restore":a.type&&(s=a.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:s,navigationId:r||i}},So=function(e){return PerformanceObserver.supportedEntryTypes.includes("soft-navigation")&&e&&e.reportSoftNavs},To=function(e){if(e){var t=window.performance.getEntriesByType("soft-navigation").filter((function(t){return t.navigationId===e}));return t?t[0]:void 0}},_o=function(e,t,n){var r=So(n);try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var o=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return o.observe(Object.assign({type:e,buffered:!0,includeSoftNavigationObservations:r},n||{})),o}}catch(e){}},Io=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},Co=function(e){var t=!1;return function(){t||(e(),t=!0)}},Oo=-1,wo=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ro=function(e){"hidden"===document.visibilityState&&Oo>-1&&(Oo="visibilitychange"===e.type?e.timeStamp:0,No())},Ao=function(){addEventListener("visibilitychange",Ro,!0),addEventListener("prerenderingchange",Ro,!0)},No=function(){removeEventListener("visibilitychange",Ro,!0),removeEventListener("prerenderingchange",Ro,!0)},Lo=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(Oo=-1),Oo<0&&(Oo=wo(),Ao(),yo((function(){setTimeout((function(){Oo=wo(),Ao()}),0)}))),{get firstHiddenTime(){return Oo}}},Mo=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},xo=[1800,3e3],ko=function(e,t){var n,r=So(t=t||{}),o=0,i=(null===(n=uo())||void 0===n?void 0:n.navigationId)||"1";Mo((function(){var n,a=Lo(),s=bo("FCP"),c=_o("paint",(function(u){u.forEach((function(u){if("first-contentful-paint"===u.name){r?u.navigationId&&u.navigationId!==s.navigationId&&function(r,i){s=bo("FCP",0,r,i),n=ho(e,s,xo,t.reportAllChanges),a=Lo(!0);var c=i?To(i):null;o=c&&c.startTime||0}("soft-navigation",u.navigationId):c.disconnect();var l=0;if(u.navigationId&&u.navigationId!==i){var d=To(u.navigationId),p=d&&d.startTime?d.startTime:0;l=Math.max(u.startTime-p,0)}else l=Math.max(u.startTime-Eo(),0);var f=r&&u.navigationId?To(u.navigationId):null,h=f&&f.startTime?f.startTime:0;(u.startTime<a.firstHiddenTime||r&&u.navigationId&&u.navigationId!==s.navigationId&&u.navigationId!==i&&h>o)&&(s.value=l,s.entries.push(u),s.navigationId=u.navigationId||"1",n(!0))}}))}),t);c&&(n=ho(e,s,xo,t.reportAllChanges),yo((function(r){s=bo("FCP",0,"back-forward-cache",s.navigationId),n=ho(e,s,xo,t.reportAllChanges),mo((function(){s.value=performance.now()-r.timeStamp,n(!0)}))})))}))},Po=[.1,.25],Do=0,Uo=1/0,Fo=0,Bo="",Go=!1,jo=function(e){var t;Bo||(Bo=(null===(t=uo())||void 0===t?void 0:t.navigationId)||"1"),e.forEach((function(e){e.interactionId&&(Go&&e.navigationId&&e.navigationId!==Bo&&(Bo=e.navigationId,Do=0,Uo=1/0,Fo=0),Uo=Math.min(Uo,e.interactionId),Fo=Math.max(Fo,e.interactionId),Do=Fo?(Fo-Uo)/7+1:0)}))},Wo=function(){return ao?Do:performance.interactionCount||0},Ho=function(e){"interactionCount"in performance||ao||(ao=_o("event",jo,{type:"event",buffered:!0,durationThreshold:0,includeSoftNavigationObservations:Go=e||!1}))},Vo=[],Xo=new Map,Yo=0,zo=function(){Yo=Wo(),Vo.length=0,Xo.clear()},Zo=[],Ko=function(e){if(Zo.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=Vo[Vo.length-1],n=Xo.get(e.interactionId);if(n||Vo.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Xo.set(r.id,r),Vo.push(r)}Vo.sort((function(e,t){return t.latency-e.latency})),Vo.length>10&&Vo.splice(10).forEach((function(e){return Xo.delete(e.id)}))}}},Jo=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=Co(e),"hidden"===document.visibilityState?e():(n=t(e),Io(e)),n},qo=[200,500],Qo=function(e,t){if("PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype){var n=So(t=t||{}),r=!1,o=0;Mo((function(){var i;Ho(n);var a,s=bo("INP"),c=function(n,i){if(zo(),s=bo("INP",0,n,i),a=ho(e,s,qo,t.reportAllChanges),r=!1,"soft-navigation"===n){var c=To(i);o=c&&c.startTime?c.startTime:0}},u=function(e){Jo((function(){var n;e.forEach(Ko),(n=function(){var e=Math.min(Vo.length-1,Math.floor((Wo()-Yo)/50));return Vo[e]}())&&(n.latency!==s.value||t&&t.reportAllChanges)&&(s.value=n.latency,s.entries=n.entries),a()}))},l=_o("event",u,{durationThreshold:null!==(i=t.durationThreshold)&&void 0!==i?i:40,opts:t});a=ho(e,s,qo,t.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0,includeSoftNavigationObservations:n}),Io((function(){u(l.takeRecords()),a(!0)})),yo((function(){zo(),c("back-forward-cache",s.navigationId),mo((function(){return a()}))})),n&&_o("soft-navigation",(function(n){n.forEach((function(n){var i=To(n.navigationId),u=i&&i.startTime?i.startTime:0;n.navigationId&&n.navigationId!==s.navigationId&&u>o&&(!r&&s.value>0&&a(!0),c("soft-navigation",n.navigationId),a=ho(e,s,qo,t.reportAllChanges))}))}),t))}))}},$o=[],ei=[],ti=0,ni=new WeakMap,ri=new Map,oi=-1,ii=function(e){$o=$o.concat(e),ai()},ai=function(){oi<0&&(oi=Jo(si))},si=function(){ri.size>10&&ri.forEach((function(e,t){Xo.has(t)||ri.delete(t)}));var e=Vo.map((function(e){return ni.get(e.entries[0])})),t=ei.length-50;ei=ei.filter((function(n,r){return r>=t||e.includes(n)}));for(var n=new Set,r=0;r<ei.length;r++){var o=ei[r];pi(o.startTime,o.processingEnd).forEach((function(e){n.add(e)}))}var i=$o.length-1-50;$o=$o.filter((function(e,t){return e.startTime>ti&&t>i||n.has(e)})),oi=-1};Zo.push((function(e){e.interactionId&&e.target&&!ri.has(e.interactionId)&&ri.set(e.interactionId,e.target)}),(function(e){var t,n=e.startTime+e.duration;ti=Math.max(ti,e.processingEnd);for(var r=ei.length-1;r>=0;r--){var o=ei[r];if(Math.abs(n-o.renderTime)<=8){(t=o).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},ei.push(t)),(e.interactionId||"first-input"===e.entryType)&&ni.set(e,t),ai()}));var ci,ui,li,di,pi=function(e,t){for(var n,r=[],o=0;n=$o[o];o++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},fi=[2500,4e3],hi=[800,1800],mi=function e(t){document.prerendering?Mo((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},gi=function(e,t){var n=So(t=t||{}),r=bo("TTFB"),o=ho(e,r,hi,t.reportAllChanges);mi((function(){var i=uo();if(i){var a=i.responseStart;r.value=Math.max(a-Eo(),0),r.entries=[i],o(!0),yo((function(){r=bo("TTFB",0,"back-forward-cache",r.navigationId),(o=ho(e,r,hi,t.reportAllChanges))(!0)})),n&&_o("soft-navigation",(function(n){n.forEach((function(n){n.navigationId&&((r=bo("TTFB",0,"soft-navigation",n.navigationId)).entries=[n],(o=ho(e,r,hi,t.reportAllChanges))(!0))}))}),t)}}))},vi={passive:!0,capture:!0},yi=new Date,Ei=function(e,t){ci||(ci=t,ui=e,li=new Date,Ti(removeEventListener),bi())},bi=function(){if(ui>=0&&ui<li-yi){var e={entryType:"first-input",name:ci.type,target:ci.target,cancelable:ci.cancelable,startTime:ci.timeStamp,processingStart:ci.timeStamp+ui};di.forEach((function(t){t([e])})),di=[]}},Si=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){Ei(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,vi),removeEventListener("pointercancel",r,vi)};addEventListener("pointerup",n,vi),addEventListener("pointercancel",r,vi)}(t,e):Ei(t,e)}},Ti=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Si,vi)}))},_i=[100,300],Ii=function(e,t){!function(e,t){var n,r=So(t=t||{}),o=(null===(n=uo())||void 0===n?void 0:n.navigationId)||"1";Mo((function(){var n,i=Lo(),a=bo("FID"),s=function(s){s.forEach((function(s){var u,l;r?s.navigationId&&s.navigationId!==a.navigationId&&(u="soft-navigation",l=s.navigationId,i=Lo(!0),a=bo("FID",0,u,l),n=ho(e,a,_i,t.reportAllChanges)):c.disconnect(),s.startTime<i.firstHiddenTime&&(a.value=s.processingStart-s.startTime,a.entries.push(s),a.navigationId=s.navigationId||o,n(!0))}))},c=_o("first-input",s,t);n=ho(e,a,_i,t.reportAllChanges),c&&(Io((function(){s(c.takeRecords()),r||c.disconnect()})),yo((function(){var r;a=bo("FID",0,"back-forward-cache",a.navigationId),n=ho(e,a,_i,t.reportAllChanges),di=[],ui=-1,ci=null,Ti(addEventListener),r=s,di.push(r),bi()})))}))}((function(t){var n=function(e){var t=e.entries[0],n={eventTarget:fo(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:lo(t.startTime)};return Object.assign(e,{attribution:n})}(t);e(n)}),t)};function Ci(e){return null==e}function Oi(e){return"object"==typeof e}function wi(e){void 0===e&&(e={});for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Ci(e))return{};var i,a=function(e,t){var n,i=c(t),s=i[0],u=i.slice(1);if(!e.hasOwnProperty(s))return e;if(!u.length){var l=e,d=s;l[d];return o(l,["symbol"==typeof d?d:d+""])}return r(r({},e),((n={})[s]=a(e[s],u),n))};return(i=t,Ci(i)?[]:i instanceof Set?u([],c(i),!1):Array.isArray(i)?i:[i]).reduce((function(e,t){return a(e,t.split("."))}),e)}function Ri(e){return!!Ci(e)||(e instanceof Set||e instanceof Map?0===e.size:Array.isArray(e)||"string"==typeof e?0===e.length:!!Oi(e)&&0===Object.keys(e).length)}var Ai="web_vitals",Ni="long_tasks",Li="resources",Mi="dom",xi="custom_measurement",ki={lcp:!0,fid:!0,cls:!0,fcp:!0,inp:!0,ttfb:!0,tbt:!0,lt:!0},Pi="internal",Di=[".css"],Ui=[".wasm",".manifest"],Fi=[".js",".mjs"],Bi=[".mp3",".mp4",".wav",".ogg",".webm",".avi"],Gi=[".pdf",".doc",".docx",".ppt",".pptx",".xls",".xlsx",".csv",".html"],ji=[".woff",".woff2",".ttf",".otf",".eot"],Wi=[".svg",".jpg",".png",".jpeg",".bmp",".webp"],Hi="undefined"!=typeof globalThis?globalThis:{},Vi="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function Xi(){Xi=function(){},Hi.Symbol||(Hi.Symbol=zi)}var Yi=0;function zi(e){return"jscomp_symbol_"+(e||"")+Yi++}function Zi(){Xi();var e=Hi.Symbol.iterator;e||(e=Hi.Symbol.iterator=Hi.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&Vi(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return Ki(this)}}),Zi=function(){}}function Ki(e){var t=0;return function(e){return Zi(),e={next:e},e[Hi.Symbol.iterator]=function(){return this},e}((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function Ji(e){Zi();var t=e[Symbol.iterator];return t?t.call(e):Ki(e)}function qi(e){if(!(e instanceof Array)){e=Ji(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var Qi=0;var $i="img script iframe link audio video source".split(" ");function ea(e,t){for(var n=(e=Ji(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||ea(n.children,t))return!0;return!1}function ta(e,t){if(2<e.length)return performance.now();for(var n=[],r=(t=Ji(t)).next();!r.done;r=t.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(t=Ji(e)).next();!r.done;r=t.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort((function(e,t){return e.timestamp-t.timestamp})),e=e.length,t=n.length-1;0<=t;t--)switch(r=n[t],r.type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function na(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=globalThis.__tti&&globalThis.__tti.e;var t=globalThis.__tti&&globalThis.__tti.o;this.a=e?e.map((function(e){return{start:e.startTime,end:e.startTime+e.duration}})):[],t&&t.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(e,t){var n=XMLHttpRequest.prototype.send,r=Qi++;XMLHttpRequest.prototype.send=function(o){for(var i=[],a=0;a<arguments.length;++a)i[a-0]=arguments[a];var s=this;return e(r),this.addEventListener("readystatechange",(function(){4===s.readyState&&t(r)})),n.apply(this,i)}}(this.m.bind(this),this.l.bind(this)),function(e,t){var n=fetch;fetch=function(r){for(var o=[],i=0;i<arguments.length;++i)o[i-0]=arguments[i];return new Promise((function(r,i){var a=Qi++;e(a),n.apply(null,[].concat(qi(o))).then((function(e){t(a),r(e)}),(function(e){t(e),i(e)}))}))}}(this.m.bind(this),this.l.bind(this)),function(e){e.c=new PerformanceObserver((function(t){for(var n=(t=Ji(t.getEntries())).next();!n.done;n=t.next())if("resource"===(n=n.value).entryType&&(e.b.push({start:n.fetchStart,end:n.responseEnd}),oa(e,ta(e.g,e.b)+5e3)),"longtask"===n.entryType){var r=n.startTime+n.duration;e.a.push({start:n.startTime,end:r}),oa(e,r+5e3)}})),e.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(e){var t=new MutationObserver((function(t){for(var n=(t=Ji(t)).next();!n.done;n=t.next())("childList"==(n=n.value).type&&ea(n.addedNodes,$i)||"attributes"==n.type&&$i.includes(n.target.tagName.toLowerCase()))&&e(n)}));return t.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t}(this.B.bind(this)))}function ra(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=ta(e.g,e.b);oa(e,Math.max(n+5e3,t))}function oa(e,t){!e.i||e.v>t||(clearTimeout(e.j),e.j=setTimeout((function(){var t=performance.timing.navigationStart,n=ta(e.g,e.b);t=(globalThis.a&&globalThis.a.A?1e3*globalThis.a.A().C-t:0)||performance.timing.domContentLoadedEventEnd-t;if(e.u)var r=e.u;else performance.timing.domContentLoadedEventEnd?r=(r=performance.timing).domContentLoadedEventEnd-r.navigationStart:r=null;var o=performance.now();null===r&&oa(e,Math.max(n+5e3,o+1e3));var i=e.a;5e3>o-n?n=null:n=5e3>o-(n=i.length?i[i.length-1].end:t)?null:Math.max(n,r),n&&(e.s(n),clearTimeout(e.j),e.i=!1,e.c&&e.c.disconnect(),e.h&&e.h.disconnect()),oa(e,performance.now()+1e3)}),t-performance.now()),e.v=t)}na.prototype.getFirstConsistentlyInteractive=function(){var e=this;return new Promise((function(t){e.s=t,"complete"==document.readyState?ra(e):globalThis.addEventListener("load",(function(){ra(e)}))}))},na.prototype.m=function(e){this.f.set(e,performance.now())},na.prototype.l=function(e){this.f.delete(e)},na.prototype.B=function(){oa(this,performance.now()+5e3)},Hi.Object.defineProperties(na.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(qi(this.f.values()))}}});var ia={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in globalThis?new na(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};const aa=ia;var sa,ca=function(e){function n(t){var n=e.call(this,Ai,"1.0.0",t)||this;return n.observers=[],n.isSoftNavsEnabled=Wn().trackSoftNavigations,n.onReport=function(e){if(e){"FCP"===e.name&&n.registerToTBTMetric();var t=n.tracer.startSpan(un.WEB_VITALS),r=e.entries?wi(e,"entries"):e;"INP"===(r=wi(r,"attribution.navigationEntry")).name&&(r=wi(r,"attribution.interactionTargetElement")),t.setAttribute(Ja.EVENT_TYPE,un.WEB_VITALS),t.setAttribute(Ai,JSON.stringify(r,ds())),t.end()}},n.metrics=Ri(t.metrics)?ki:t.metrics,n.registerToCoreWebVitalMetrics(),n.registerToCalculatedWebVitalMetrics(),n.isSoftNavsEnabled&&n.registerToSoftNavigations(),n}return t(n,e),n.prototype.registerToCoreWebVitalMetrics=function(){var e=this.isSoftNavsEnabled&&ns.has(ln.SoftNavigation);this.metrics.fid&&Ii(this.onReport),this.metrics.cls&&function(e,t){!function(e,t){var n=So(t=t||{}),r=!1,o=0;ko(Co((function(){var i,a=bo("CLS",0),s=0,c=[],u=function(n,c){if(a=bo("CLS",0,n,c),i=ho(e,a,Po,t.reportAllChanges),s=0,r=!1,"soft-navigation"===n){var u=To(c);o=u&&u.startTime||0}},l=function(e){e.forEach((function(e){if(n&&e.navigationId&&e.navigationId!==a.navigationId&&(s>a.value&&(a.value=s,a.entries=c),i(!0),u("soft-navigation",e.navigationId)),!e.hadRecentInput){var t=c[0],r=c[c.length-1];s&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(s+=e.value,c.push(e)):(s=e.value,c=[e])}})),s>a.value&&(a.value=s,a.entries=c,i())},d=_o("layout-shift",l,t);d&&(i=ho(e,a,Po,t.reportAllChanges),Io((function(){l(d.takeRecords()),i(!0),r=!0})),yo((function(){u("back-forward-cache",a.navigationId),mo((function(){return i()}))})),n&&_o("soft-navigation",(function(n){n.forEach((function(n){var s=n.navigationId,c=s?To(s):null;s&&s!==a.navigationId&&c&&(c.startTime||0)>o&&(r||i(!0),u("soft-navigation",n.navigationId),i=ho(e,a,Po,t.reportAllChanges))}))}),t),setTimeout(i,0))})))}((function(t){var n=function(e){var t,n={};if(e.entries.length){var r=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(r&&r.sources&&r.sources.length){var o=(t=r.sources).find((function(e){return e.node&&1===e.node.nodeType}))||t[0];o&&(n={largestShiftTarget:fo(o.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:o,largestShiftEntry:r,loadState:lo(r.startTime)})}}return Object.assign(e,{attribution:n})}(t);e(n)}),t)}(this.onReport,{reportSoftNavs:e}),this.metrics.lcp&&function(e,t){!function(e,t){var n,r=!1,o=So(t=t||{}),i=0,a=(null===(n=uo())||void 0===n?void 0:n.navigationId)||"1",s="";Mo((function(){var n,c=Lo(),u=bo("LCP"),l=function(o,a){if(u=bo("LCP",0,o,a),n=ho(e,u,fi,t.reportAllChanges),r=!1,"soft-navigation"===o){c=Lo(!0);var s=To(a);i=s&&s.startTime?s.startTime:0}f()},d=function(e){e.forEach((function(e){if(e){o&&e.navigationId&&e.navigationId!==u.navigationId&&(r||n(!0),l("soft-navigation",e.navigationId));var t=0;if(e.navigationId&&e.navigationId!==a){var i=To(e.navigationId),s=i&&i.startTime?i.startTime:0;t=Math.max(e.startTime-s,0)}else t=Math.max(e.startTime-Eo(),0);e.startTime<c.firstHiddenTime&&(u.value=t,u.entries=[e],u.navigationId=e.navigationId||a,n())}}))},p=function(){h(),r||(d(g.takeRecords()),o||g.disconnect(),u.navigationId===s&&(r=!0,n(!0)))},f=function(){["keydown","click"].forEach((function(e){addEventListener(e,(function(){return m()}),!0)}))},h=function(){["keydown","click"].forEach((function(e){removeEventListener(e,(function(){return m()}),!0)}))},m=function(){s=u.navigationId,Jo(p)},g=_o("largest-contentful-paint",d,t);g&&(n=ho(e,u,fi,t.reportAllChanges),f(),Io((function(){s=u.navigationId,p()})),yo((function(e){l("back-forward-cache",u.navigationId),mo((function(){u.value=performance.now()-e.timeStamp,r=!0,n(!0)}))})),o&&_o("soft-navigation",(function(e){e.forEach((function(e){var t=e.navigationId?To(e.navigationId):null;e.navigationId&&e.navigationId!==u.navigationId&&t&&(t.startTime||0)>i&&(r||n(!0),l("soft-navigation",e.navigationId))}))}),t))}))}((function(t){var n=function(e){var t,n=(null===(t=uo())||void 0===t?void 0:t.navigationId)||"1",r={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){var o,i=0,a=0,s=0;if(e.navigationId&&e.navigationId!==n?i=s=(o=To(e.navigationId))?o.startTime:0:(i=(o=uo())&&o.activationStart?o.activationStart:0,a=o&&o.responseStart?o.responseStart:0),o){var c=e.entries[e.entries.length-1],u=c.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===c.url}))[0],l=Math.max(0,a-i),d=Math.max(l,u?(u.requestStart||u.startTime)-i:0),p=Math.max(d-s,u?u.responseEnd-i:0,0),f=Math.max(p-s,c?c.startTime-i:0,0);r={element:fo(c.element),timeToFirstByte:l,resourceLoadDelay:d-l,resourceLoadDuration:p-d,elementRenderDelay:f-p,navigationEntry:o,lcpEntry:c},c.url&&(r.url=c.url),u&&(r.lcpResourceEntry=u)}}return Object.assign(e,{attribution:r})}(t);e(n)}),t)}(this.onReport,{reportSoftNavs:e}),this.metrics.fcp&&function(e,t){ko((function(t){var n=function(e){var t,n=(null===(t=uo())||void 0===t?void 0:t.navigationId)||"1",r={timeToFirstByte:0,firstByteToFCP:e.value,loadState:lo(vo())};if(e.entries.length){var o,i=e.entries[e.entries.length-1],a=0;if(e.navigationId&&e.navigationId!==n)a=(o=To(e.navigationId))?o.startTime:0;else if(o=uo()){var s=o.responseStart,c=o.activationStart||0;a=Math.max(0,s-c)}o&&(r={timeToFirstByte:a,firstByteToFCP:e.value-a,loadState:lo(e.entries[0].startTime),navigationEntry:o,fcpEntry:i})}return Object.assign(e,{attribution:r})}(t);e(n)}),t)}(this.onReport,{reportSoftNavs:e}),this.metrics.inp&&function(e,t){so||(so=_o("long-animation-frame",ii)),Qo((function(t){var n=function(e){var t=e.entries[0],n=ni.get(t),r=t.processingStart,o=n.processingEnd,i=n.entries.sort((function(e,t){return e.processingStart-t.processingStart})),a=pi(t.startTime,o),s=e.entries.find((function(e){return e.target})),c=s&&s.target||ri.get(t.interactionId),u=[t.startTime+t.duration,o].concat(a.map((function(e){return e.startTime+e.duration}))),l=Math.max.apply(Math,u),d={interactionTarget:fo(c),interactionTargetElement:c,interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:l,processedEventEntries:i,longAnimationFrameEntries:a,inputDelay:r-t.startTime,processingDuration:o-r,presentationDelay:Math.max(l-o,0),loadState:lo(t.startTime)};return Object.assign(e,{attribution:d})}(t);e(n)}),t)}(this.onReport,{reportSoftNavs:e}),this.metrics.ttfb&&function(e,t){gi((function(t){var n=function(e){var t={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(e.entries.length){var n=e.entries[0],r=n.activationStart||0,o=Math.max((n.workerStart||n.fetchStart)-r,0),i=Math.max(n.domainLookupStart-r||0,0),a=Math.max(n.connectStart-r||0,0),s=Math.max(n.connectEnd-r||0,0);t={waitingDuration:o,cacheDuration:i-o,dnsDuration:a-i,connectionDuration:s-a,requestDuration:e.value-s,navigationEntry:n}}return Object.assign(e,{attribution:t})}(t);e(n)}),t)}(this.onReport,{reportSoftNavs:e})},n.prototype.registerToSoftNavigations=function(){var e=this;if(ns.has(ln.SoftNavigation)){var t=new PerformanceObserver((function(t){var n;t.getEntries().forEach((function(t){var r=t.duration,o=t.name,i=t.startTime,a=t.navigationId;n={name:"SN",id:cs(),value:r,url:o,navigationType:"soft-navigation",navigationId:a,startTime:i},e.onReport(n)}))}));this.observers.push(t),t.observe({type:ln.SoftNavigation,buffered:!0})}else console.warn("Coralogix Browser SDK - browser doesnt support soft navigation events")},n.prototype.registerToCalculatedWebVitalMetrics=function(){this.metrics.lt&&(ns.has(ln.Navigation)?this.calculateLoadingPageTime():console.warn("Coralogix Browser SDK - browser doesnt support navigation events"))},n.prototype.registerToTBTMetric=function(){this.metrics.tbt&&(ns.has(ln.LongTask)?this.calculateAllTotalBlockingTime():console.warn("Coralogix Browser SDK - browser doesnt support TBT events"))},n.prototype.calculateLoadingPageTime=function(){var e=this,t=new PerformanceObserver((function(t){var n;t.getEntries().forEach((function(t){var r=t,o=r.duration,i=r.name,a=r.type,s=r.activationStart,c=r.domComplete,u=r.domContentLoadedEventEnd,l=r.domContentLoadedEventStart,d=r.domInteractive,p=r.loadEventEnd,f=r.loadEventStart,h=r.redirectCount,m=r.unloadEventStart,g=r.unloadEventEnd;n={name:"LT",id:cs(),value:o,url:i,navigationType:a,activationStart:s,domComplete:c,domContentLoadedEventEnd:u,domContentLoadedEventStart:l,domInteractive:d,loadEventEnd:p,loadEventStart:f,redirectCount:h,unloadEventStart:m,unloadEventEnd:g},o&&e.onReport(n)}))}));this.observers.push(t),t.observe({type:ln.Navigation,buffered:!0})},n.prototype.calculateAllTotalBlockingTime=function(){var e,t=this,n=new PerformanceObserver((function(t){var n,r=function(e){return e.reduce((function(e,t){return e+=t.duration-50}),0)}(t.getEntries());e={name:"TBT",id:cs(),rating:us(r),value:(null!==(n=null==e?void 0:e.value)&&void 0!==n?n:0)+r}}));this.observers.push(n),n.observe({type:ln.LongTask,buffered:!0}),aa.getFirstConsistentlyInteractive().then((function(r){var o,i;r&&(t.onReport(e),t.onReport({name:"TTI",value:r,id:cs()}),n.disconnect(),null===(i=null===(o=Fn.__tti)||void 0===o?void 0:o.o)||void 0===i||i.disconnect())}))},n.prototype.enable=function(){},n.prototype.disable=function(){this.observers.forEach((function(e){return e.disconnect()}))},n.prototype.init=function(){},n}(Tn),ua=function(e){function n(t){var n=e.call(this,Ni,"1.0.0",t)||this;return ns.has(ln.LongTask)?n.registerToLongTasks():console.warn("Coralogix Browser SDK - browser doesnt support longtask events"),n}return t(n,e),n.prototype.registerToLongTasks=function(){var e=this;this.longTaskObserver=new PerformanceObserver((function(t){t.getEntries().forEach((function(t){return e.createSpanFromLongTask(t)}))})),this.longTaskObserver.observe({type:ln.LongTask,buffered:!0})},n.prototype.createSpanFromLongTask=function(e){var t=this.tracer.startSpan(un.LONG_TASK),n=r(r({},fs(e)),{id:be()});e.toJSON&&delete n.toJSON,e.attribution&&delete n.attribution,t.setAttribute(Ja.EVENT_TYPE,un.LONG_TASK),t.setAttribute(un.LONG_TASK,JSON.stringify(n)),t.end()},n.prototype.enable=function(){},n.prototype.disable=function(){var e;null===(e=this.longTaskObserver)||void 0===e||e.disconnect()},n.prototype.init=function(){},n}(Tn);function la(e,t){return t.some((function(t){return t===e}))}function da(e,t,n){return t.some((function(t){return t instanceof RegExp?t.test(e):"string"==typeof t?(t=t.toLowerCase()).includes(e.toLowerCase()):(n&&console.warn("Coralogix Browser SDK - ".concat(n," must be from type string | Regex")),!1)}))}!function(e){e.Media="media",e.Script="script",e.Css="css",e.Beacon="beacon",e.Img="img",e.Font="font",e.Doc="doc",e.Xhr="xmlhttprequest",e.Fetch="fetch",e.Iframe="iframe",e.Video="video",e.Audio="audio",e.Track="track",e.Other="other"}(sa||(sa={}));var pa,fa=function(e){function n(t){var n,r=e.call(this,Li,"1.0.0",t)||this;return r.ignoreUrls=null===(n=Wn())||void 0===n?void 0:n.ignoreUrls,ns.has(ln.Resource)?r.registerToResources():console.warn("Coralogix Browser SDK - browser doesnt support resource events"),r}return t(n,e),n.prototype.registerToResources=function(){var e=this;this.resourcesObserver=new PerformanceObserver((function(t){t.getEntries().forEach((function(t){if(e.isProcessableResourceEntry(t)){var n=e.mapResource(t);e.createSpanFromResource(n)}}))})),this.resourcesObserver.observe({type:ln.Resource,buffered:!0})},n.prototype.isProcessableResourceEntry=function(e){var t=![sa.Xhr,sa.Fetch].includes(e.initiatorType),n=!this.isResourceIgnored(e.name);return t&&n},n.prototype.isResourceIgnored=function(e){var t;return!(!e||!(null===(t=this.ignoreUrls)||void 0===t?void 0:t.length))&&da(e,this.ignoreUrls,"ignoreUrls")},n.prototype.mapResource=function(e){var t=e.name,n=e.initiatorType;switch(!0){case la(n,[sa.Beacon])||rs(t,Ui):n=sa.Other;break;case n!==sa.Css&&rs(t,Di):n=sa.Css;break;case n!==sa.Script&&rs(t,Fi):n=sa.Script;break;case n!==sa.Img&&rs(t,Wi):n=sa.Img;break;case t.includes("fonts.googleapis.com")||rs(t,ji):n=sa.Font;break;case n!==sa.Iframe&&rs(t,Gi):n=sa.Doc;break;case la(n,[sa.Video,sa.Audio,sa.Track])||rs(t,Bi):n=sa.Media}return r(r({},fs(e)),{initiatorType:n})},n.prototype.createSpanFromResource=function(e){var t,n=this.tracer.startSpan(Li);n.setAttribute(Ja.EVENT_TYPE,un.RESOURCES);var o=r(r({},fs(e)),{name:null===(t=e.name)||void 0===t?void 0:t.slice(0,Ua)});n.setAttribute(Li,JSON.stringify(o)),n.end()},n.prototype.enable=function(){},n.prototype.disable=function(){var e;null===(e=this.resourcesObserver)||void 0===e||e.disconnect()},n.prototype.init=function(){},n}(Tn);function ha(e,t){var n,r=Un();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function ma(e,t,n,r){var o=void 0===r?{}:r,i=o.once,a=o.capture,s=o.passive,c=i?function(e){d(),n(e)}:n,u=s?{capture:a,passive:s}:a,l=ha(e,"addEventListener");function d(){var n=ha(e,"removeEventListener");t.forEach((function(t){return n.call(e,t,c,u)}))}return t.forEach((function(t){return l.call(e,t,c,u)})),{stop:d}}!function(e){e.CLICK="click",e.KEY_DOWN="keydown",e.TOUCH_START="touchstart",e.INPUT="input",e.MOUSE_MOVE="mousemove"}(pa||(pa={}));var ga,va=["BUTTON","LABEL","A","INPUT","OPTION"];function ya(e,t){if(!e)return"";var n=Ea(e,5);return n?function(e,t){if(Sa(e,t.maskInputTypes,t.maskClass)||ba(e,t.maskClass,5))return Va;var n=function(e,t){return e.children?Array.from(e.children).find((function(e){return Sa(e,t.maskInputTypes,t.maskClass)})):null}(e,t);if(n)return Va;return function(e){if(e instanceof HTMLInputElement)return e.value||"";return"innerText"in e?e.innerText:""}(e)}(n,t):""}function Ea(e,t){return!e||t<=0?null:va.includes(e.nodeName)?e:Ea(e.parentElement,t-1)}function ba(e,t,n){return void 0===n&&(n=5),!(!e||n<=0)&&(!!Ta(e.className,t)||ba(e.parentElement,t,n-1))}function Sa(e,t,n){return!!e&&(function(e,t){if(e instanceof HTMLInputElement){var n=e.type||"text";return t.includes(n)}return!1}(e,t)||Ta(e.className,n))}function Ta(e,t){return t instanceof RegExp?t.test(e):"string"==typeof e&&e.includes(t)}var _a="user-interaction",Ia=((ga={})[pa.CLICK]=!0,ga),Ca=function(e){function n(t){var n=e.call(this,_a,"1",t)||this;return n.handler=function(e){},n.stop=function(){},n}return t(n,e),n.prototype.enable=function(){var e,t=this;this.handler=function(e){var n;n=Zn(un.USER_INTERACTION)?Kn(_a):t.tracer.startSpan(_a);var r=e.target,o=Wn(),i=r.id,a=r.type,s=r.className,u=r.nodeName,l=ya(r,o);n.setAttribute(Ja.EVENT_TYPE,un.USER_INTERACTION),n.setAttribute(Ja.INTERACTION_EVENT_NAME,e.type),r&&r instanceof HTMLElement&&[[Ja.ELEMENT_ID,i],[Ja.ELEMENT_CLASSES,s],[Ja.TARGET_ELEMENT_TYPE,a],[Ja.ELEMENT_INNER_TEXT,null==l?void 0:l.slice(0,Da)],[Ja.TARGET_ELEMENT,u]].forEach((function(e){var t=c(e,2),r=t[0],o=t[1];n.setAttribute(r,o)})),n.end()};var n=r(r({},Ia),null===(e=this._config)||void 0===e?void 0:e.events),o=Object.entries(n).filter((function(e){var t=c(e,2);t[0];return t[1]})).map((function(e){return c(e,1)[0]}));this.stop=ma(document,o,this.handler,{capture:!0,passive:!0}).stop},n.prototype.disable=function(){this.stop()},n.prototype.init=function(){},n}(Tn),Oa="memory_usage";var wa,Ra=function(e){function n(t){var n=e.call(this,Oa,"1.0.0",t)||this;return n.memoryUsageInterval=Wn().memoryUsageConfig.interval,n}return t(n,e),n.prototype.disable=function(){this.clearMeasurementsInterval()},n.prototype.enable=function(){this.startTrackingMemoryUsage()},n.prototype.init=function(){},n.prototype.startTrackingMemoryUsage=function(){var e=this;this.clearMeasurementsInterval(),this.createMemorySample().then((function(){return e.runMemoryMeasurements()}))},n.prototype.createMemorySample=function(){return i(this,void 0,Promise,(function(){var e,t,n,r,o,i,l,d,p;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,performance.measureUserAgentSpecificMemory()];case 1:e=a.sent(),t=function(e){var t,n,r=be(),o={uuid:r,isParent:!0,bytes:e.bytes},i=[];try{for(var a=s(e.breakdown),l=a.next();!l.done;l=a.next()){var d=l.value;d.bytes>0&&i.push({uuid:r,bytes:d.bytes,attribution:d.attribution,types:d.types.sort().join(", ")})}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return u([o],c(i),!1)}(e);try{for(n=s(t),r=n.next();!r.done;r=n.next())o=r.value,(i=this.tracer.startSpan(Oa))[Ja.EVENT_TYPE]=un.MEMORY_USAGE,i[Ja.MEMORY_USAGE_CONTEXT]=o,i.end()}catch(f){d={error:f}}finally{try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(d)throw d.error}}return[3,3];case 2:return l=a.sent(),console.warn("Memory usage measurement failed",l),this.clearMeasurementsInterval(),[3,3];case 3:return[2]}}))}))},n.prototype.runMemoryMeasurements=function(){var e=this;this.timeoutId=setTimeout((function(){return e.measureMemoryUsage()}),this.memoryUsageInterval)},n.prototype.measureMemoryUsage=function(){return i(this,void 0,Promise,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.createMemorySample()];case 1:return e.sent(),this.runMemoryMeasurements(),[2]}}))}))},n.prototype.clearMeasurementsInterval=function(){this.timeoutId&&clearTimeout(this.timeoutId)},n}(Tn),Aa="screenshot",Na=function(e){function n(t){return e.call(this,Aa,"1.0.0",t)||this}return t(n,e),n.prototype.init=function(){},n.prototype.disable=function(){},n.prototype.enable=function(){},n.prototype.screenshot=function(e,t){if(jn()){var n=this.tracer.startSpan(un.SCREENSHOT);n.setAttribute(Ja.EVENT_TYPE,un.SCREENSHOT),n.setAttribute(Ja.SEVERITY,fn.Info),n[Ja.SCREENSHOT_CONTEXT]={id:e,description:t},n.end()}},n}(Tn),La=function(){function e(){this.measurements=new Map}return e.prototype.startMeasurement=function(e,t){this.checkAndResetIfSessionExpired(),!this.measurements.has(e)&&e.trim()?this.measurements.set(e,{startTime:Date.now(),labels:t}):this.logDebug('Invalid or duplicate key: "'.concat(e,'".'))},e.prototype.getMeasurement=function(e){if(this.checkAndResetIfSessionExpired(),this.measurements.has(e)&&e.trim()){var t=this.measurements.get(e),n=t.startTime,r=t.labels;return this.measurements.delete(e),{duration:Date.now()-n,labels:r}}this.logDebug('Invalid or duplicate key: "'.concat(e,'".'))},e.prototype.checkAndResetIfSessionExpired=function(){Gn().isIdleActive&&this.measurements.clear()},e.prototype.logDebug=function(e){Wn().debug&&console.debug("Coralogix Browser SDK - ".concat(e))},e}(),Ma=function(e){function n(t){return e.call(this,xi,"1.0.0",t)||this}return t(n,e),n.prototype.init=function(){},n.prototype.disable=function(){},n.prototype.enable=function(){},n.prototype.createCustomMeasurement=function(e,t,n){var r=this.tracer.startSpan(xi);r[Ja.EVENT_TYPE]=un.CUSTOM_MEASUREMENT,r[Ja.CUSTOM_MEASUREMENT_CONTEXT]={name:e,value:t},Object.keys(n||{}).length>0&&r.setAttribute(Ja.CUSTOM_LABELS,JSON.stringify(n)),r.end()},n}(Tn),xa=function(e){function n(t){return e.call(this,un.INTERNAL,"1",t)||this}return t(n,e),n.prototype.init=function(){},n.prototype.disable=function(){},n.prototype.enable=function(){},n.prototype.reportInternalEvent=function(e,t){void 0===t&&(t="");var n,r=this.tracer.startSpan(un.INTERNAL);switch(r.setAttribute(Ja.EVENT_TYPE,un.INTERNAL),r.setAttribute(Ja.SEVERITY,fn.Info),e){case"init":var o=wi(Wn(),"public_key","coralogixDomain");n=this.stringifyConfig(o);break;case"recording-start":default:break;case"recording-stop":n=t}r.setAttribute(Ja.INTERNAL,JSON.stringify({event:e,data:n})),r.end()},n.prototype.stringifyConfig=function(e){return JSON.stringify(e,(function(e,t){return t instanceof RegExp?t.toString():t}))},n}(Tn),ka=function(e){function n(t){var n=e.call(this,Mi,"1.0.0",t)||this;return n.visibilityChangeHandler=function(){if(document.hidden){var e=n.tracer.startSpan(Mi);e.setAttribute(Ja.EVENT_TYPE,un.DOM),e.end()}},n}return t(n,e),n.prototype.registerToDOMEvents=function(){document.addEventListener("visibilitychange",this.visibilityChangeHandler)},n.prototype.unregisterFromDOMEvents=function(){document.removeEventListener("visibilitychange",this.visibilityChangeHandler)},n.prototype.init=function(){},n.prototype.disable=function(){this.unregisterFromDOMEvents()},n.prototype.enable=function(){var e=this;setTimeout((function(){e.registerToDOMEvents()}))},n}(Tn),Pa="/browser/v1beta/logs",Da=1024,Ua=1024,Fa=["application","version","coralogixDomain"],Ba="sdkConfig",Ga="{id}",ja="PAGE_URL_LABEL_PROVIDERS",Wa="NETWORK_URL_LABEL_PROVIDERS",Ha="rumInternalData",Va="***",Xa=["password","email","tel"],Ya=[{pattern:new RegExp(/[0-9a-fA-F-]{36}/g),replacement:Ga},{pattern:new RegExp(/^[a-zA-Z0-9-_]{21}$/),replacement:Ga}],za={pageUrlBlueprinters:[function(e){return function(e){var t,n,r=e.patterns,o=e.url,i=o;try{for(var a=s(r),c=a.next();!c.done;c=a.next()){var u=c.value,l=u.pattern,d=u.replacement;i=i.replace(l,d)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}({patterns:Ya,url:e})}]},Za={ignoreUrls:[new RegExp(Pa),new RegExp("/sessionrecording")],user_context:{user_id:"",user_name:""},labels:{},urlBlueprinters:za,collectIPData:!0},Ka=[{Instrument:fr,confKey:or,disable:!1},{Instrument:Qr,confKey:"fetch",disable:!1},{Instrument:io,confKey:"xhr",disable:!1},{Instrument:co,confKey:"custom",disable:!1},{Instrument:Ca,confKey:"interactions",disable:!1},{Instrument:ca,confKey:Ai,disable:!1},{Instrument:ua,confKey:Ni,disable:!1},{Instrument:fa,confKey:Li,disable:!1},{Instrument:xa,confKey:Pi,disable:!1},{Instrument:ka,confKey:Mi,disable:!1},{Instrument:Ma,confKey:xi,disable:!1},{Instrument:Ra,confKey:Oa,disable:!1},{Instrument:Na,confKey:Aa,disable:!1}],Ja={USER_AGENT:"user_agent",LOCATION_HREF:"location_href",EVENT_TYPE:"event_type",SEVERITY:"severity",APPLICATION_CONTEXT:"application_context",USER_CONTEXT:"user_context",CUSTOM_MEASUREMENT_CONTEXT:"custom_measurement_context",MEMORY_USAGE_CONTEXT:"memory_usage_context",COUNTRY:"country",SOURCE:"source",ERROR:ir,LOG:"cx_log",CUSTOM_LABELS:"custom_labels",ENVIRONMENT:"environment",INTERACTION_EVENT_NAME:"interaction_event_name",ELEMENT_INNER_TEXT:"element_inner_text",ELEMENT_INNER_HTML:"element_inner_html",ELEMENT_ID:"element_id",ELEMENT_CLASSES:"element_classes",TARGET_XPATH:"target_xpath",TARGET_ELEMENT:"target_element",TARGET_ELEMENT_TYPE:"target_element_type",TIMESTAMP:"timestamp",INTERNAL:"internal",PAGE_CONTEXT:"page_context",IS_NAVIGATION_EVENT:"is_navigation_event",SCREENSHOT_CONTEXT:"screenshot_context"},qa={EU1:"https://ingress.eu1.rum-ingress-coralogix.com",EU2:"https://ingress.eu2.rum-ingress-coralogix.com",US1:"https://ingress.us1.rum-ingress-coralogix.com",US2:"https://ingress.us2.rum-ingress-coralogix.com",AP1:"https://ingress.ap1.rum-ingress-coralogix.com",AP2:"https://ingress.ap2.rum-ingress-coralogix.com",AP3:"https://ingress.ap3.rum-ingress-coralogix.com",STAGING:"https://ingress.staging.rum-ingress-coralogix.com"},Qa="cx_mapped_span",$a="/";function es(e,t){Fn[Ha]||(Fn[Ha]={}),Fn[Ha][e]=t}function ts(e){var t;return null===(t=Fn[Ha])||void 0===t?void 0:t[e]}var ns=(null===(wa=null==Fn?void 0:Fn.PerformanceObserver)||void 0===wa?void 0:wa.supportedEntryTypes)?new Set(Fn.PerformanceObserver.supportedEntryTypes):new Set;function rs(e,t){return t.some((function(t){return e.endsWith(t)||e.includes(t)}))}var os=function(e){var t=c(e,2),n=t[0],r=t[1];return 1e3*n+Math.round(r/1e6)},is=function(e){return!!e&&e>=400},as=function(e){var t,n;if(!e)return"";var r=(null===(t=e.split("://"))||void 0===t?void 0:t[1])||e,o=null===(n=r.split($a))||void 0===n?void 0:n[1];if(null==o?void 0:o.startsWith("#")){var i=r.split("#")[1].split("?")[0].split($a);return i.length&&i.shift(),i.join($a)||$a}try{return e.startsWith("blob:")?e:new URL(e).pathname.substring(1)||$a}catch(a){return console.warn("Coralogix Browser SDK - Error parsing URL",a),e}};function ss(e){var t,n,r,o,i,a,u,l,d="Unknown",p="Unknown",f="Unknown",h="Unknown",m="Desktop";try{for(var g=s(Object.entries({Chrome:/Chrome\/([\d.]+)/,Firefox:/Firefox\/([\d.]+)/,Safari:/Version\/([\d.]+).*Safari/,Edge:/Edge\/([\d.]+)/,Opera:/Opera\/([\d.]+)/,IE:/Trident.*rv:([\d.]+)/})),v=g.next();!v.done;v=g.next()){var y=c(v.value,2),E=y[0],b=y[1];if(O=e.match(b)){d=E,p=O[1]||"Unknown";break}}}catch(R){t={error:R}}finally{try{v&&!v.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}try{for(var S=s(Object.entries({Windows:/Windows NT ([\d.]+)/,MacOS:/Mac OS X ([\d._]+)/,Linux:/Linux(?: ([\d.]+))?/,iOS:/CPU(?: iPhone)? OS (\d+([._]\d+)*)/,Android:/Android (\d+([._]\d+)*)/})),T=S.next();!T.done;T=S.next()){var _=c(T.value,2);E=_[0],b=_[1];if(O=e.match(b)){f=E,h=(null===(l=null===(u=O[1])||void 0===u?void 0:u.split("_"))||void 0===l?void 0:l.join("."))||"Unknown";break}}}catch(A){r={error:A}}finally{try{T&&!T.done&&(o=S.return)&&o.call(S)}finally{if(r)throw r.error}}try{for(var I=s(Object.entries({Mobile:/Mobile|Android|iPhone|iPod|BlackBerry|IEMobile|Windows Phone|webOS|Opera Mini/,Tablet:/Tablet|iPad/})),C=I.next();!C.done;C=I.next()){var O,w=c(C.value,2);E=w[0],b=w[1];if(O=e.match(b)){m=E;break}}}catch(N){i={error:N}}finally{try{C&&!C.done&&(a=I.return)&&a.call(I)}finally{if(i)throw i.error}}return{browser:d,browserVersion:p,os:f,osVersion:h,device:m}}function cs(){return"v3-".concat(On(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}function us(e){switch(!0){case e>600:return"poor";case e>200&&e<=600:return"needs-improvement";default:return"good"}}function ls(e){var t,n,r=JSON.parse(e[Ja.CUSTOM_LABELS]),o=wi(e,Ja.CUSTOM_LABELS);try{for(var i=s(Object.entries(r)),a=i.next();!a.done;a=i.next()){var u=c(a.value,2),l=u[0],d=u[1];o[l]="string"!=typeof d?JSON.stringify(d):d}}catch(p){t={error:p}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o}var ds=function(){var e=new WeakSet;return function(t,n){if("object"==typeof n&&null!==n){if(e.has(n))return;e.add(n)}return n}};function ps(e){var t=e.url,n=e.blueprinters,r=t;return null==n||n.forEach((function(e){return r=e(r)})),r}function fs(e){return JSON.parse(JSON.stringify(e))}var hs,ms,gs=function(){function e(e){var t;this.labels=((t={})[Ja.CUSTOM_LABELS]="{}",t),e&&(this.labels=e)}return e.prototype.setCustomLabels=function(e){this.labels[Ja.CUSTOM_LABELS]=JSON.stringify(null!=e?e:{})},e.prototype.setInternalLabels=function(e){var t;this.labels=r(((t={})[Ja.CUSTOM_LABELS]=this.labels[Ja.CUSTOM_LABELS],t),e?this.stringifyValues(e):{})},e.prototype.getLabels=function(){return JSON.parse(JSON.stringify(this.labels))},e.prototype.getCustomLabels=function(){return JSON.parse(this.labels[Ja.CUSTOM_LABELS])},e.prototype.getInternalLabels=function(){var e=r({},this.labels);return delete e[Ja.CUSTOM_LABELS],e},e.prototype.getUserContext=function(){var e=this.labels[Ja.USER_CONTEXT];return e?JSON.parse("".concat(e)):void 0},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.onStart=function(e){e.setAttribute(Ja.TIMESTAMP,On()),e.setAttribute(Ja.USER_AGENT,navigator.userAgent),e.setAttributes(this.labels)},e.prototype.onEnd=function(){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.stringifyValues=function(e){var t={};for(var n in e)t[n]="string"==typeof e[n]?e[n]:JSON.stringify(e[n]);return t},e}(),vs=((hs={})[un.WEB_VITALS]=!0,function(){function e(e){this.requestConfig=e,this.resolvedUrl="",this.resolvedHeaders={},this.init()}return e.prototype.init=function(){var e=Wn(),t=e.proxyUrl,n=e.coralogixDomain,r=e.public_key,o=this.requestConfig,i=o.suffix,a=o.headers,s="".concat(qa[n]).concat(i);this.resolvedUrl=t?"".concat(t,"?").concat("cxforward","=").concat(encodeURIComponent(s)):s,r&&(a.Authorization="Bearer ".concat(r)),this.resolvedHeaders=a},e.prototype.send=function(e){return fetch(this.resolvedUrl,{method:"POST",headers:this.resolvedHeaders,body:e}).catch((function(e){return e}))},e}());!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(ms||(ms={}));var ys=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:ms.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),Es=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:ms.RECORD}},e}();function bs(e){var t,n,o,i;return e?r(r({},e),{maxRumEvents:(i=e.maxRumEvents,i?i>2e4?2e4:i:5e3),maxRecordTime:(o=e.maxRecordTime,o?o>6e4?6e4:o:1e4),instrumentationsToSend:null!==(n=e.instrumentationsToSend)&&void 0!==n?n:(t={},t[un.WEB_VITALS]=!0,t)}):{enable:!1}}function Ss(e){var t;return e?r(r({},e),{sessionSampleRate:null!==(t=e.sessionSampleRate)&&void 0!==t?t:100,onlyWithErrorConfig:bs(e.onlyWithErrorConfig)}):Ln}function Ts(e){var t;if(e)return r(r({},e),{sessionRecordingSampleRate:null!==(t=e.sessionRecordingSampleRate)&&void 0!==t?t:100})}function _s(e){return e>0&&100*Math.random()<=e}function Is(e){var t;return!e||!!(null===(t=Gn())||void 0===t?void 0:t.isIdleActive)}var Cs,Os,ws=function(){function e(){var e=this;this.isActive=!0,this.sdkConfig=Wn(),this.request=new vs({suffix:Pa,headers:{"Content-Type":"application/json"}}),this.batchTimeDelay=Rn,this.invokeLogRequest=function(t,n){(null==t?void 0:t.length)&&e.request.send(JSON.stringify({logs:t,skip_enrichment_with_ip:!e.sdkConfig.collectIPData})).then((function(){n&&(Gn().cachedLogsSent=!0)}))}}return e.prototype.export=function(e,t){if(Is(this.isActive))t({code:ie.SUCCESS});else{var n=e.reduce((function(e,t){return t[Qa]&&e.push(t[Qa]),e}),[]);!function(){var e=Gn(),t=e.onlySessionWithErrorMode,n=e.cachedLogsSent;return t&&!n}()?this.invokeLogRequest(n):this.handleSessionWithError(n),t({code:ie.SUCCESS})}},e.prototype.handleSessionWithError=function(e){var t=this,n=Gn(),r=n.maxRumEventsForSessionWithError,o=n.instrumentationsToSend,i=n.sessionHasError,a=[];e=e.reduce((function(e,t){return o&&o[t.text.cx_rum.event_context.type]?a.push(t):e.push(t),e}),[]),this.invokeLogRequest(a);var s=Fn.cachedLogs=u(u([],c(Fn.cachedLogs||[]),!1),c(e),!1),l=s.length;if(l>r&&!i)this.clearCachedDataForSessionWithError();else if(i)if(l>500){for(var d=[],p=0;p<l;p+=500)d.push(s.slice(p,p+500));d.forEach((function(e){setTimeout((function(){return t.invokeLogRequest(e,!0)}),t.batchTimeDelay),t.batchTimeDelay+=Rn})),this.clearCachedDataForSessionWithError()}else this.invokeLogRequest(s,!0),this.clearCachedDataForSessionWithError()},e.prototype.clearCachedDataForSessionWithError=function(){Fn.cachedLogs=[],this.batchTimeDelay=Rn},e.prototype.shutdown=function(){return this.isActive=!1,Promise.resolve()},e}(),Rs="[object Null]",As="[object Undefined]",Ns=Function.prototype.toString,Ls=Ns.call(Object),Ms=(Cs=Object.getPrototypeOf,Os=Object,function(e){return Cs(Os(e))}),xs=Object.prototype,ks=xs.hasOwnProperty,Ps=Symbol?Symbol.toStringTag:void 0,Ds=xs.toString;function Us(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||"[object Object]"!==function(e){if(null==e)return void 0===e?As:Rs;return Ps&&Ps in Object(e)?function(e){var t=ks.call(e,Ps),n=e[Ps],r=!1;try{e[Ps]=void 0,r=!0}catch(uo){}var o=Ds.call(e);r&&(t?e[Ps]=n:delete e[Ps]);return o}(e):function(e){return Ds.call(e)}(e)}(e))return!1;var t=Ms(e);if(null===t)return!0;var n=ks.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ns.call(n)===Ls}function Fs(e){return js(e)?e.slice():e}function Bs(e,t,n,r){var o;if(void 0===n&&(n=0),!(n>20)){if(n++,Vs(e)||Vs(t)||Ws(t))o=Fs(t);else if(js(e)){if(o=e.slice(),js(t))for(var i=0,a=t.length;i<a;i++)o.push(Fs(t[i]));else if(Hs(t))for(i=0,a=(s=Object.keys(t)).length;i<a;i++){o[c=s[i]]=Fs(t[c])}}else if(Hs(e))if(Hs(t)){if(!function(e,t){if(!Us(e)||!Us(t))return!1;return!0}(e,t))return t;o=Object.assign({},e);var s;for(i=0,a=(s=Object.keys(t)).length;i<a;i++){var c,u=t[c=s[i]];if(Vs(u))void 0===u?delete o[c]:o[c]=u;else{var l=o[c],d=u;if(Gs(e,c,r)||Gs(t,c,r))delete o[c];else{if(Hs(l)&&Hs(d)){var p=r.get(l)||[],f=r.get(d)||[];p.push({obj:e,key:c}),f.push({obj:t,key:c}),r.set(l,p),r.set(d,f)}o[c]=Bs(o[c],u,n,r)}}}}else o=t;return o}}function Gs(e,t,n){for(var r=n.get(e[t])||[],o=0,i=r.length;o<i;o++){var a=r[o];if(a.key===t&&a.obj===e)return!0}return!1}function js(e){return Array.isArray(e)}function Ws(e){return"function"==typeof e}function Hs(e){return!Vs(e)&&!js(e)&&!Ws(e)&&"object"==typeof e}function Vs(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}var Xs=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ys=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,n){var r,o;try{for(var i=Xs(this._propagators),a=i.next();!a.done;a=i.next()){var s=a.value;try{s.inject(e,t,n)}catch(c){A.warn("Failed to inject with "+s.constructor.name+". Err: "+c.message)}}}catch(u){r={error:u}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},e.prototype.extract=function(e,t,n){return this._propagators.reduce((function(e,r){try{return r.extract(e,t,n)}catch(o){A.warn("Failed to inject with "+r.constructor.name+". Err: "+o.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}(),zs="[_0-9a-z-*/]",Zs=new RegExp("^(?:"+("[a-z]"+zs+"{0,255}")+"|"+("[a-z0-9]"+zs+"{0,240}@[a-z]"+zs+"{0,13}")+")$"),Ks=/^[ -~]{0,255}[!-~]$/,Js=/,|=/;var qs=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var o=n.slice(0,r),i=n.slice(r+1,t.length);(function(e){return Zs.test(e)})(o)&&function(e){return Ks.test(e)&&!Js.test(e)}(i)&&e.set(o,i)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),Qs="traceparent",$s="tracestate",ec=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");var tc=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=Dt.getSpanContext(e);if(r&&!de(e)&&wt(r)){var o="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||C.NONE).toString(16);n.set(t,Qs,o),r.traceState&&n.set(t,$s,r.traceState.serialize())}},e.prototype.extract=function(e,t,n){var r=n.get(t,Qs);if(!r)return e;var o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return e;var i=function(e){var t=ec.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}(o);if(!i)return e;i.isRemote=!0;var a=n.get(t,$s);if(a){var s=Array.isArray(a)?a.join(","):a;i.traceState=new qs("string"==typeof s?s:void 0)}return Dt.setSpanContext(e,i)},e.prototype.fields=function(){return[Qs,$s]},e}(),nc="baggage",rc=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function oc(e){var t=e.split(";");if(!(t.length<=0)){var n=t.shift();if(n){var r=n.indexOf("=");if(!(r<=0)){var o,i,a=decodeURIComponent(n.substring(0,r).trim()),s=decodeURIComponent(n.substring(r+1).trim());return t.length>0&&("string"!=typeof(i=t.join(";"))&&(Or.error("Cannot create baggage metadata from unknown type: "+typeof i),i=""),o={__TYPE__:Cr,toString:function(){return i}}),{key:a,value:s,metadata:o}}}}}var ic,ac=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=Lr.getBaggage(e);if(r&&!de(e)){var o=function(e){return e.getAllEntries().map((function(e){var t=rc(e,2),n=t[0],r=t[1],o=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(o+=";"+r.metadata.toString()),o}))}(r).filter((function(e){return e.length<=4096})).slice(0,180),i=function(e){return e.reduce((function(e,t){var n=e+(""!==e?",":"")+t;return n.length>8192?e:n}),"")}(o);i.length>0&&n.set(t,nc,i)}},e.prototype.extract=function(e,t,n){var r=n.get(t,nc),o=Array.isArray(r)?r.join(","):r;if(!o)return e;var i={};return 0===o.length?e:(o.split(",").forEach((function(e){var t=oc(e);if(t){var n={value:t.value};t.metadata&&(n.metadata=t.metadata),i[t.key]=n}})),0===Object.entries(i).length?e:Lr.setBaggage(e,Lr.createBaggage(i)))},e.prototype.fields=function(){return[nc]},e}(),sc="process.runtime.name",cc="service.name",uc="telemetry.sdk.name",lc="telemetry.sdk.language",dc="telemetry.sdk.version",pc=sc,fc=cc,hc=uc,mc=lc,gc=dc,vc="webjs",yc=vc,Ec=((ic={})[hc]="opentelemetry",ic[pc]="browser",ic[mc]=yc,ic[gc]="1.25.1",ic);var bc,Sc=function(){return Sc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sc.apply(this,arguments)},Tc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(uo){i(uo)}}function s(e){try{c(r.throw(e))}catch(uo){i(uo)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},_c=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(uo){i=[6,uo],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ic=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Cc=function(){function e(e,t){var n,r=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(n=this._attributes)&&void 0!==n?n:{},this._asyncAttributesPromise=null==t?void 0:t.then((function(e){return r._attributes=Object.assign({},r._attributes,e),r.asyncAttributesPending=!1,e}),(function(e){return A.debug("a resource's async attributes promise rejected: %s",e),r.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})[fc]="unknown_service",t[mc]=Ec[mc],t[hc]=Ec[hc],t[gc]=Ec[gc],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&A.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return Tc(this,void 0,void 0,(function(){return _c(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.merge=function(t){var n,r=this;if(!t)return this;var o=Sc(Sc({},this._syncAttributes),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(o);var i=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var n,o=Ic(e,2),i=o[0],a=o[1];return Sc(Sc(Sc(Sc({},r._syncAttributes),i),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes),a)}));return new e(o,i)},e.EMPTY=new e({}),e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(bc||(bc={}));var Oc,wc=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rc=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function Ac(e){var t,n,r={};if("object"!=typeof e||null==e)return r;try{for(var o=wc(Object.entries(e)),i=o.next();!i.done;i=o.next()){var a=Rc(i.value,2),s=a[0],c=a[1];Nc(s)?Lc(c)?Array.isArray(c)?r[s]=c.slice():r[s]=c:A.warn("Invalid attribute value set for key: "+s):A.warn("Invalid attribute key: "+s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function Nc(e){return"string"==typeof e&&e.length>0}function Lc(e){return null==e||(Array.isArray(e)?function(e){var t,n,r;try{for(var o=wc(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(null!=a){if(!r){if(Mc(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}(e):Mc(e))}function Mc(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(Oc||(Oc={}));var xc=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kc=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Pc=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Dc=function(){function e(e,t,n,r,o,i,a,s,c,u){void 0===a&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Oc.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=r,this.parentSpanId=i,this.kind=o,this.links=a;var l=Date.now();this._performanceStartTime=Se.now(),this._performanceOffset=l-(this._performanceStartTime+Ce()),this._startTimeProvided=null!=s,this.startTime=this._getTime(null!=s?s:l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,null!=u&&this.setAttributes(u),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(A.warn("Invalid attribute key: "+e),this):Lc(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(A.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,n;try{for(var r=xc(Object.entries(e)),o=r.next();!o.done;o=r.next()){var i=kc(o.value,2),a=i[0],s=i[1];this.setAttribute(a,s)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return A.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(0===this._droppedEventsCount&&A.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Ne(t)&&(Ne(n)||(n=t),t=void 0);var r=Ac(t);return this.events.push({name:e,attributes:r,time:this._getTime(n),droppedAttributesCount:0}),this},e.prototype.addLink=function(e){return this.links.push(e),this},e.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,Pc([],kc(e),!1)),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=e),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){this._isSpanEnded()?A.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return r<0&&(n-=1,r+=_e),[n,r]}(this.startTime,this.endTime),this._duration[0]<0&&(A.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&A.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<Se.now())return Oe(e+this._performanceOffset);if("number"==typeof e)return Ie(e);if(e instanceof Date)return Ie(e.getTime());if(Ae(e))return e;if(this._startTimeProvided)return Ie(Date.now());var t=Se.now()-this._performanceStartTime;return Le(this.startTime,Ie(t))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var n={};"string"==typeof e?n[Ze]=e:e&&(e.code?n[ze]=e.code.toString():e.name&&(n[ze]=e.name),e.message&&(n[Ze]=e.message),e.stack&&(n[Ke]=e.stack)),n[ze]||n[Ze]?this.addEvent("exception",n,t):A.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&A.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(A.warn("Attribute value limit must be positive, got "+n),e):"string"==typeof e?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,n):e})):e},e}(),Uc=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:ms.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),Fc=function(){function e(e){var t,n,r,o;this._root=e.root,this._root||(fe(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new ys),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new ys,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new Uc,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new ys,this._localParentNotSampled=null!==(o=e.localParentNotSampled)&&void 0!==o?o:new Uc}return e.prototype.shouldSample=function(e,t,n,r,o,i){var a=Dt.getSpanContext(e);return a&&wt(a)?a.isRemote?a.traceFlags&C.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,o,i):this._remoteParentNotSampled.shouldSample(e,t,n,r,o,i):a.traceFlags&C.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,o,i):this._localParentNotSampled.shouldSample(e,t,n,r,o,i):this._root.shouldSample(e,t,n,r,o,i)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Bc=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:Ct(t)&&this._accumulate(t)<this._upperBound?ms.RECORD_AND_SAMPLED:ms.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),Gc=oe(),jc=L.AlwaysOn;function Wc(){return{sampler:Hc(Gc),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:oe().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:oe().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:oe().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:oe().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:oe().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:oe().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:oe().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:oe().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Hc(e){switch(void 0===e&&(e=oe()),e.OTEL_TRACES_SAMPLER){case L.AlwaysOn:return new ys;case L.AlwaysOff:return new Uc;case L.ParentBasedAlwaysOn:return new Fc({root:new ys});case L.ParentBasedAlwaysOff:return new Fc({root:new Uc});case L.TraceIdRatio:return new Bc(Vc(e));case L.ParentBasedTraceIdRatio:return new Fc({root:new Bc(Vc(e))});default:return A.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+jc+'".'),new ys}}function Vc(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return A.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(A.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to 1."),1):t<0||t>1?(A.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to 1."),1):t}function Xc(e){var t,n,r,o,i,a,s,c,u,l,d,p,f=Object.assign({},e.spanLimits),h=ne(re);return f.attributeCountLimit=null!==(a=null!==(i=null!==(o=null!==(n=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==n?n:null===(r=e.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==o?o:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==i?i:h.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==a?a:K,f.attributeValueLengthLimit=null!==(p=null!==(d=null!==(l=null!==(c=null===(s=e.spanLimits)||void 0===s?void 0:s.attributeValueLengthLimit)&&void 0!==c?c:null===(u=e.generalLimits)||void 0===u?void 0:u.attributeValueLengthLimit)&&void 0!==l?l:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==d?d:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:Z,Object.assign({},e,{spanLimits:f})}var Yc=function(){this.generateTraceId=Zc(16),this.generateSpanId=Zc(8)},zc=Array(32);function Zc(e){return function(){for(var t=0;t<2*e;t++)zc[t]=Math.floor(16*Math.random())+48,zc[t]>=58&&(zc[t]+=39);return String.fromCharCode.apply(null,zc.slice(0,2*e))}}var Kc,Jc=function(){function e(e,t,n){this._tracerProvider=n;var r,o,i,a,s=(r=t,o={sampler:Hc()},i=Wc(),(a=Object.assign({},i,o,r)).generalLimits=Object.assign({},i.generalLimits,r.generalLimits||{}),a.spanLimits=Object.assign({},i.spanLimits,r.spanLimits||{}),a);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=t.idGenerator||new Yc,this.resource=n.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,n){var r,o,i;void 0===t&&(t={}),void 0===n&&(n=j.active()),t.root&&(n=Dt.deleteSpan(n));var a=Dt.getSpan(n);if(de(n))return A.debug("Instrumentation suppressed, returning Noop Span"),Dt.wrapSpanContext(ht);var s,c,u,l=null==a?void 0:a.spanContext(),d=this._idGenerator.generateSpanId();l&&Dt.isSpanContextValid(l)?(s=l.traceId,c=l.traceState,u=l.spanId):s=this._idGenerator.generateTraceId();var p=null!==(r=t.kind)&&void 0!==r?r:Rr.INTERNAL,f=(null!==(o=t.links)&&void 0!==o?o:[]).map((function(e){return{context:e.context,attributes:Ac(e.attributes)}})),h=Ac(t.attributes),m=this._sampler.shouldSample(n,s,e,p,h,f);c=null!==(i=m.traceState)&&void 0!==i?i:c;var g={traceId:s,spanId:d,traceFlags:m.decision===bc.RECORD_AND_SAMPLED?C.SAMPLED:C.NONE,traceState:c};if(m.decision===bc.NOT_RECORD)return A.debug("Recording is off, propagating context in a non-recording span"),Dt.wrapSpanContext(g);var v=Ac(Object.assign(h,m.attributes));return new Dc(this,n,e,g,p,u,f,t.startTime,void 0,v)},e.prototype.startActiveSpan=function(e,t,n,r){var o,i,a;if(!(arguments.length<2)){2===arguments.length?a=t:3===arguments.length?(o=t,a=n):(o=t,i=n,a=r);var s=null!=i?i:j.active(),c=this.startSpan(e,o,s),u=Dt.setSpan(s,c);return j.with(u,a,void 0,c)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),qc=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qc=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,n=[];try{for(var r=qc(this._spanProcessors),o=r.next();!o.done;o=r.next()){var i=o.value;n.push(i.forceFlush())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e){Promise.all(n).then((function(){e()})).catch((function(t){fe(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))},e.prototype.onStart=function(e,t){var n,r;try{for(var o=qc(this._spanProcessors),i=o.next();!i.done;i=o.next()){i.value.onStart(e,t)}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(e){var t,n;try{for(var r=qc(this._spanProcessors),o=r.next();!o.done;o=r.next()){o.value.onEnd(e)}}catch(i){t={error:i}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,n=[];try{for(var r=qc(this._spanProcessors),o=r.next();!o.done;o=r.next()){var i=o.value;n.push(i.shutdown())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e,t){Promise.all(n).then((function(){e()}),t)}))},e}(),$c=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}();!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(Kc||(Kc={}));var eu,tu=function(){function e(e){var t;void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),r=new WeakMap;e.length>0;)n=Bs(n,e.shift(),0,r);return n}({},Wc(),Xc(e));this.resource=null!==(t=n.resource)&&void 0!==t?t:Cc.empty(),this.resource=Cc.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var r=this._buildExporterFromEnv();if(void 0!==r){var o=new ve(r);this.activeSpanProcessor=o}else this.activeSpanProcessor=new $c}return e.prototype.getTracer=function(e,t,n){var r=e+"@"+(t||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(r)||this._tracers.set(r,new Jc({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(r)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(e){return A.error("Error while trying to shutdown current span processor",e)})),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Qc(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),Dt.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&j.setGlobalContextManager(e.contextManager),e.propagator&&Lr.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((function(t){return new Promise((function(n){var r,o=setTimeout((function(){n(new Error("Span processor did not completed within timeout period of "+e+" ms")),r=Kc.timeout}),e);t.forceFlush().then((function(){clearTimeout(o),r!==Kc.timeout&&(r=Kc.resolved,n(r))})).catch((function(e){clearTimeout(o),r=Kc.error,n(e)}))}))}));return new Promise((function(e,n){Promise.all(t).then((function(t){var r=t.filter((function(e){return e!==Kc.resolved}));r.length>0?n(r):e()})).catch((function(e){return n([e])}))}))},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(oe().OTEL_PROPAGATORS)),n=t.map((function(t){var n=e._getPropagator(t);return n||A.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),n})).reduce((function(e,t){return t&&e.push(t),e}),[]);return 0===n.length?void 0:1===t.length?n[0]:new Ys({propagators:n})},e.prototype._buildExporterFromEnv=function(){var e=oe().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||A.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new tc}],["baggage",function(){return new ac}]]),e._registeredExporters=new Map,e}(),nu=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ru=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ou=function(){function e(){this._enabled=!1,this._currentContext=M}return e.prototype._bindFunction=function(e,t){void 0===e&&(e=M);var n=this,r=function(){for(var r=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return n.with(e,(function(){return t.apply(r,o)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),r},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):t},e.prototype.disable=function(){return this._currentContext=M,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=M),this},e.prototype.with=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var i=this._currentContext;this._currentContext=e||M;try{return t.call.apply(t,ru([n],nu(r),!1))}finally{this._currentContext=i}},e}(),iu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),au=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}(function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return n}return iu(t,e),t.prototype.register=function(t){void 0===t&&(t={}),void 0===t.contextManager&&(t.contextManager=new ou),t.contextManager&&t.contextManager.enable(),e.prototype.register.call(this,t)},t}(tu)),su=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(su||{}),cu=Object.defineProperty,uu=(e,t,n)=>(((e,t,n)=>{t in e?cu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),lu=Object.defineProperty,du=(e,t,n)=>(((e,t,n)=>{t in e?lu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),pu=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(pu||{});function fu(e){return e.nodeType===e.ELEMENT_NODE}function hu(e){const t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function mu(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function gu(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,vu).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(n){return null}var t}function vu(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=gu(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(n){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}class Mirror{constructor(){du(this,"idNodeMap",new Map),du(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function yu(){return new Mirror}function Eu({element:e,maskInputOptions:t,tagName:n,type:r,value:o,maskInputFn:i}){let a=o||"";const s=r&&bu(r);return(t[n.toLowerCase()]||s&&t[s])&&(a=i?i(a,e):"*".repeat(a.length)),a}function bu(e){return e.toLowerCase()}const Su="__rrweb_original__";function Tu(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?bu(t):null}function _u(e,t){let n;try{n=new URL(e,t??window.location.href)}catch(o){return null}const r=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(null==r?void 0:r[1])??null}let Iu=1;const Cu=new RegExp("[^a-z0-9-_:]");function Ou(){return Iu++}let wu,Ru;const Au=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Nu=/^(?:[a-z+]+:)?\/\//i,Lu=/^www\..*/i,Mu=/^(data:)([^,]*),(.*)/i;function xu(e,t){return(e||"").replace(Au,((e,n,r,o,i,a)=>{const s=r||i||a,c=n||o||"";if(!s)return e;if(Nu.test(s)||Lu.test(s))return`url(${c}${s}${c})`;if(Mu.test(s))return`url(${c}${s}${c})`;if("/"===s[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+s}${c})`;const u=t.split("/"),l=s.split("/");u.pop();for(const t of l)"."!==t&&(".."===t?u.pop():u.push(t));return`url(${c}${u.join("/")}${c})`}))}const ku=/^[^ \t\n\r\u000c]+/,Pu=/^[, \t\n\r\u000c]+/;const Du=new WeakMap;function Uu(e,t){return t&&""!==t.trim()?Bu(e,t):t}function Fu(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Bu(e,t){let n=Du.get(e);if(n||(n=e.createElement("a"),Du.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function Gu(e,t,n,r){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Uu(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Pu),!(n>=t.length);){let i=r(ku);if(","===i.slice(-1))i=Uu(e,i.substring(0,i.length-1)),o.push(i);else{let r="";i=Uu(e,i);let a=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((i+r).trim());break}if(a)")"===e&&(a=!1);else{if(","===e){n+=1,o.push((i+r).trim());break}"("===e&&(a=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?xu(r,Bu(e)):"object"===t&&"data"===n?Uu(e,r):r:Uu(e,r):r}function ju(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Wu(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&Wu(e.parentNode,t,n);for(let r=e.classList.length;r--;){const n=e.classList[r];if(t.test(n))return!0}return!!n&&Wu(e.parentNode,t,n)}function Hu(e,t,n,r){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===o)return!1;if("string"==typeof t){if(r){if(o.closest(`.${t}`))return!0}else if(o.classList.contains(t))return!0}else if(Wu(o,t,r))return!0;if(n)if(r){if(o.closest(n))return!0}else if(o.matches(n))return!0}catch(o){}return!1}function Vu(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:a,inlineStylesheet:s,maskInputOptions:c={},maskTextFn:u,maskInputFn:l,dataURLOptions:d={},inlineImages:p,recordCanvas:f,keepIframeSrcFn:h,newlyAddedElement:m=!1}=t,g=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:pu.Document,childNodes:[],compatMode:e.compatMode}:{type:pu.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:pu.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:g};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskInputFn:s,dataURLOptions:c={},inlineImages:u,recordCanvas:l,keepIframeSrcFn:d,newlyAddedElement:p=!1,rootId:f}=t,h=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(r){}return!1}(e,r,o),m=function(e){if(e instanceof HTMLFormElement)return"form";const t=bu(e.tagName);return Cu.test(t)?"div":t}(e);let g={};const v=e.attributes.length;for(let b=0;b<v;b++){const t=e.attributes[b];ju(m,t.name,t.value)||(g[t.name]=Gu(n,m,bu(t.name),t.value))}if("link"===m&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=gu(t)),r&&(delete g.rel,delete g.href,g._cssText=xu(r,t.href))}if("style"===m&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=gu(e.sheet);t&&(g._cssText=xu(t,Bu(n)))}if("input"===m||"textarea"===m||"select"===m){const t=e.value,n=e.checked;"radio"!==g.type&&"checkbox"!==g.type&&"submit"!==g.type&&"button"!==g.type&&t?g.value=Eu({element:e,type:Tu(e),tagName:m,value:t,maskInputOptions:a,maskInputFn:s}):n&&(g.checked=n)}"option"===m&&(e.selected&&!a.select?g.selected=!0:delete g.selected);if("canvas"===m&&l)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,i=Su in o?o[Su]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(g.rr_dataURL=e.toDataURL(c.type,c.quality));else if(!("__context"in e)){const t=e.toDataURL(c.type,c.quality),r=n.createElement("canvas");r.width=e.width,r.height=e.height;t!==r.toDataURL(c.type,c.quality)&&(g.rr_dataURL=t)}if("img"===m&&u){wu||(wu=n.createElement("canvas"),Ru=wu.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",o=t.crossOrigin,i=()=>{t.removeEventListener("load",i);try{wu.width=t.naturalWidth,wu.height=t.naturalHeight,Ru.drawImage(t,0,0),g.rr_dataURL=wu.toDataURL(c.type,c.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i));console.warn(`Cannot inline img src=${r}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(o?g.crossOrigin=o:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i)}if("audio"===m||"video"===m){const t=g;t.rr_mediaState=e.paused?"paused":"played",t.rr_mediaCurrentTime=e.currentTime,t.rr_mediaPlaybackRate=e.playbackRate,t.rr_mediaMuted=e.muted,t.rr_mediaLoop=e.loop,t.rr_mediaVolume=e.volume}p||(e.scrollLeft&&(g.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(g.rr_scrollTop=e.scrollTop));if(h){const{width:t,height:n}=e.getBoundingClientRect();g={class:g.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==m||d(g.src)||(e.contentDocument||(g.rr_src=g.src),delete g.src);let y;try{customElements.get(m)&&(y=!0)}catch(E){}return{type:pu.Element,tagName:m,attributes:g,childNodes:[],isSVG:Fu(e)||void 0,needBlock:h,rootId:f,isCustom:y}}(e,{doc:n,blockClass:o,blockSelector:i,inlineStylesheet:s,maskInputOptions:c,maskInputFn:l,dataURLOptions:d,inlineImages:p,recordCanvas:f,keepIframeSrcFn:h,newlyAddedElement:m,rootId:g});case e.TEXT_NODE:return function(e,t){var n;const{needsMask:r,maskTextFn:o,rootId:i}=t,a=e.parentNode&&e.parentNode.tagName;let s=e.textContent;const c="STYLE"===a||void 0,u="SCRIPT"===a||void 0;if(c&&s){try{e.nextSibling||e.previousSibling||(null==(n=e.parentNode.sheet)?void 0:n.cssRules)&&(s=gu(e.parentNode.sheet))}catch(l){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${l}`,e)}s=xu(s,Bu(t.doc))}u&&(s="SCRIPT_PLACEHOLDER");!c&&!u&&s&&r&&(s=o?o(s,e.parentElement):s.replace(/[\S]/g,"*"));return{type:pu.Text,textContent:s||"",isStyle:c,rootId:i}}(e,{doc:n,needsMask:a,maskTextFn:u,rootId:g});case e.CDATA_SECTION_NODE:return{type:pu.CDATA,textContent:"",rootId:g};case e.COMMENT_NODE:return{type:pu.Comment,textContent:e.textContent||"",rootId:g};default:return!1}}function Xu(e){return null==e?"":e.toLowerCase()}function Yu(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:s,skipChild:c=!1,inlineStylesheet:u=!0,maskInputOptions:l={},maskTextFn:d,maskInputFn:p,slimDOMOptions:f,dataURLOptions:h={},inlineImages:m=!1,recordCanvas:g=!1,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:E=5e3,onStylesheetLoad:b,stylesheetLoadTimeout:S=5e3,keepIframeSrcFn:T=()=>!1,newlyAddedElement:_=!1}=t;let{needsMask:I}=t,{preserveWhiteSpace:C=!0}=t;if(!I&&e.childNodes){I=Hu(e,a,s,void 0===I)}const O=Vu(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:I,inlineStylesheet:u,maskInputOptions:l,maskTextFn:d,maskInputFn:p,dataURLOptions:h,inlineImages:m,recordCanvas:g,keepIframeSrcFn:T,newlyAddedElement:_});if(!O)return console.warn(e,"not serialized"),null;let w;w=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===pu.Comment)return!0;if(e.type===pu.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===_u(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Xu(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Xu(e.attributes.name)||"icon"===Xu(e.attributes.rel)||"apple-touch-icon"===Xu(e.attributes.rel)||"shortcut icon"===Xu(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Xu(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Xu(e.attributes.property).match(/^(og|twitter|fb):/)||Xu(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Xu(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Xu(e.attributes.name)||"googlebot"===Xu(e.attributes.name)||"bingbot"===Xu(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Xu(e.attributes.name)||"generator"===Xu(e.attributes.name)||"framework"===Xu(e.attributes.name)||"publisher"===Xu(e.attributes.name)||"progid"===Xu(e.attributes.name)||Xu(e.attributes.property).match(/^article:/)||Xu(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Xu(e.attributes.name)||"yandex-verification"===Xu(e.attributes.name)||"csrf-token"===Xu(e.attributes.name)||"p:domain_verify"===Xu(e.attributes.name)||"verify-v1"===Xu(e.attributes.name)||"verification"===Xu(e.attributes.name)||"shopify-checkout-api-token"===Xu(e.attributes.name)))return!0}}return!1}(O,f)&&(C||O.type!==pu.Text||O.isStyle||O.textContent.replace(/^\s+|\s+$/gm,"").length)?Ou():-2;const R=Object.assign(O,{id:w});if(r.add(e,R),-2===w)return null;v&&v(e);let A=!c;if(R.type===pu.Element){A=A&&!R.needBlock,delete R.needBlock;const t=e.shadowRoot;t&&mu(t)&&(R.isShadowHost=!0)}if((R.type===pu.Document||R.type===pu.Element)&&A){f.headWhitespace&&R.type===pu.Element&&"head"===R.tagName&&(C=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:c,inlineStylesheet:u,maskInputOptions:l,maskTextFn:d,maskInputFn:p,slimDOMOptions:f,dataURLOptions:h,inlineImages:m,recordCanvas:g,preserveWhiteSpace:C,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:E,onStylesheetLoad:b,stylesheetLoadTimeout:S,keepIframeSrcFn:T};if(R.type===pu.Element&&"textarea"===R.tagName&&void 0!==R.attributes.value);else for(const n of Array.from(e.childNodes)){const e=Yu(n,t);e&&R.childNodes.push(e)}if(fu(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Yu(n,t);r&&(mu(e.shadowRoot)&&(r.isShadow=!0),R.childNodes.push(r))}}return e.parentNode&&hu(e.parentNode)&&mu(e.parentNode)&&(R.isShadow=!0),R.type===pu.Element&&"iframe"===R.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,i=!1;try{o=r.document.readyState}catch(s){return}if("complete"!==o){const r=setTimeout((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),i=!0,t()}))}const a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&y){const n=Yu(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:l,maskTextFn:d,maskInputFn:p,slimDOMOptions:f,dataURLOptions:h,inlineImages:m,recordCanvas:g,preserveWhiteSpace:C,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:E,onStylesheetLoad:b,stylesheetLoadTimeout:S,keepIframeSrcFn:T});n&&y(e,n)}}),E),R.type===pu.Element&&"link"===R.tagName&&"string"==typeof R.attributes.rel&&("stylesheet"===R.attributes.rel||"preload"===R.attributes.rel&&"string"==typeof R.attributes.href&&"css"===_u(R.attributes.href))&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(a){return}if(r)return;const i=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(i),o=!0,t()}))}(e,(()=>{if(b){const t=Yu(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:l,maskTextFn:d,maskInputFn:p,slimDOMOptions:f,dataURLOptions:h,inlineImages:m,recordCanvas:g,preserveWhiteSpace:C,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:E,onStylesheetLoad:b,stylesheetLoadTimeout:S,keepIframeSrcFn:T});t&&b(e,t)}}),S),R}const zu=/(max|min)-device-(width|height)/,Zu=(new RegExp(zu.source,"g"),/([^\\]):hover/);new RegExp(Zu.source,"g");function Ku(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Ju="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let qu={map:{},getId:()=>(console.error(Ju),-1),getNode:()=>(console.error(Ju),null),removeNodeFromMap(){console.error(Ju)},has:()=>(console.error(Ju),!1),reset(){console.error(Ju)}};function Qu(e,t,n={}){let r=null,o=0;return function(...i){const a=Date.now();o||!1!==n.leading||(o=a);const s=t-(a-o),c=this;s<=0||s>t?(r&&(clearTimeout(r),r=null),o=a,e.apply(c,i)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,i)}),s))}}function $u(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>$u(e,t,i||{},!0)}function el(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(qu=new Proxy(qu,{get:(e,t,n)=>("map"===t&&console.error(Ju),Reflect.get(e,t,n))}));let tl=Date.now;function nl(e){var t,n,r,o,i,a;const s=e.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==s?void 0:s.documentElement.scrollLeft)||(null==(n=null==(t=null==s?void 0:s.body)?void 0:t.parentElement)?void 0:n.scrollLeft)||(null==(r=null==s?void 0:s.body)?void 0:r.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==s?void 0:s.documentElement.scrollTop)||(null==(i=null==(o=null==s?void 0:s.body)?void 0:o.parentElement)?void 0:i.scrollTop)||(null==(a=null==s?void 0:s.body)?void 0:a.scrollTop)||0}}function rl(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ol(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function il(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function al(e,t,n,r){if(!e)return!1;const o=il(e);if(!o)return!1;try{if("string"==typeof t){if(o.classList.contains(t))return!0;if(r&&null!==o.closest("."+t))return!0}else if(Wu(o,t,r))return!0}catch(i){}if(n){if(o.matches(n))return!0;if(r&&null!==o.closest(n))return!0}return!1}function sl(e,t){return-1!==t.getId(e)}function cl(e,t,n){return!("TITLE"!==e.tagName||!n.headTitleMutations)||-2===t.getId(e)}function ul(e,t){if(hu(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||ul(e.parentNode,t))}function ll(e){return Boolean(e.changedTouches)}function dl(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}function pl(e){const t={},n=(e,n)=>{const r={value:e,parent:n,children:[]};return t[e.node.id]=r,r},r=[];for(const o of e){const{nextId:e,parentId:i}=o;if(e&&e in t){const i=t[e];if(i.parent){const e=i.parent.children.indexOf(i);i.parent.children.splice(e,0,n(o,i.parent))}else{const e=r.indexOf(i);r.splice(e,0,n(o,null))}}else if(i in t){const e=t[i];e.children.push(n(o,e))}else r.push(n(o,null))}return r}function fl(e,t){t(e.value);for(let n=e.children.length-1;n>=0;n--)fl(e.children[n],t)}function hl(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function ml(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function gl(e,t){var n,r;const o=null==(null==e.ownerDocument?void 0:n.defaultView)?void 0:r.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const i=o.getBoundingClientRect(),a=gl(o,t),s=i.height/o.clientHeight;return{x:i.x*a.relativeScale+a.x,y:i.y*a.relativeScale+a.y,relativeScale:s,absoluteScale:a.absoluteScale*s}}function vl(e){return Boolean(null==e?void 0:e.shadowRoot)}function yl(e,t){const n=e[t[0]];return 1===t.length?n:yl(n.cssRules[t[1]].cssRules,t.slice(2))}function El(e){const t=[...e],n=t.pop();return{positions:t,index:n}}function bl(e){const t=new Set,n=[];for(let r=e.length;r--;){const o=e[r];t.has(o.id)||(n.push(o),t.add(o.id))}return n}/[1-9][0-9]{12}/.test(Date.now().toString())||(tl=()=>(new Date).getTime());class StyleSheetMirror{constructor(){uu(this,"id",1),uu(this,"styleIDMap",new WeakMap),uu(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Sl(e){var t,n;let r=null;return(null==(n=null==(t=e.getRootNode)?void 0:t.call(e))?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function Tl(e){let t,n=e;for(;t=Sl(n);)n=t;return n}function _l(e){const t=e.ownerDocument;if(!t)return!1;const n=Tl(e);return t.contains(n)}function Il(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||_l(e))}Symbol.toStringTag;var Cl=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Cl||{}),Ol=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Ol||{}),wl=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(wl||{}),Rl=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Rl||{}),Al=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Al||{}),Nl=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Nl||{});function Ll(e){return"__ln"in e}class DoubleLinkedList{constructor(){uu(this,"length",0),uu(this,"head",null),uu(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Ll(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Ll(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Ml=(e,t)=>`${e}@${t}`;class MutationBuffer{constructor(){uu(this,"frozen",!1),uu(this,"locked",!1),uu(this,"texts",[]),uu(this,"attributes",[]),uu(this,"attributeMap",new WeakMap),uu(this,"removes",[]),uu(this,"mapRemoves",[]),uu(this,"movedMap",{}),uu(this,"addedSet",new Set),uu(this,"movedSet",new Set),uu(this,"droppedSet",new Set),uu(this,"mutationCb"),uu(this,"blockClass"),uu(this,"blockSelector"),uu(this,"maskTextClass"),uu(this,"maskTextSelector"),uu(this,"inlineStylesheet"),uu(this,"maskInputOptions"),uu(this,"maskTextFn"),uu(this,"maskInputFn"),uu(this,"keepIframeSrcFn"),uu(this,"recordCanvas"),uu(this,"inlineImages"),uu(this,"slimDOMOptions"),uu(this,"dataURLOptions"),uu(this,"doc"),uu(this,"mirror"),uu(this,"iframeManager"),uu(this,"stylesheetManager"),uu(this,"shadowDomManager"),uu(this,"canvasManager"),uu(this,"processedNodeManager"),uu(this,"unattachedDoc"),uu(this,"processMutations",(e=>{e.forEach(this.processMutation),this.emit()})),uu(this,"emit",(()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new DoubleLinkedList,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!Il(o)||"TEXTAREA"===o.parentNode.tagName)return;const i=hu(o.parentNode)?this.mirror.getId(Sl(o)):this.mirror.getId(o.parentNode),a=r(o);if(-1===i||-1===a)return n.addNode(o);const s=Yu(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{hl(e,this.mirror)&&this.iframeManager.addIframe(e),ml(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),vl(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});s&&(e.push({parentId:i,nextId:a,node:s}),t.add(s.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const s of this.movedSet)kl(this.removes,s,this.mirror)&&!this.movedSet.has(s.parentNode)||o(s);for(const s of this.addedSet)Pl(this.droppedSet,s)||kl(this.removes,s,this.mirror)?Pl(this.movedSet,s)?o(s):this.droppedSet.add(s):o(s);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),o(e.value)}const a={texts:this.texts.map((e=>{const t=e.node;return t.parentNode&&"TEXTAREA"===t.parentNode.tagName&&this.genTextAreaValueMutation(t.parentNode),{id:this.mirror.getId(t),value:e.value}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(a.texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))})),uu(this,"genTextAreaValueMutation",(e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(e.childNodes,(e=>e.textContent||"")).join("")})),uu(this,"processMutation",(e=>{if(!cl(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{const t=e.target.textContent;al(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:Hu(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,il(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,o=e.target.getAttribute(r);if("value"===r){const e=Tu(n);o=Eu({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:e,value:o,maskInputFn:this.maskInputFn})}if(al(e.target,this.blockClass,this.blockSelector,!1)||o===e.oldValue)return;let i=this.attributeMap.get(e.target);if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(o)){if(n.contentDocument)return;r="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(e.target,i)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!ju(n.tagName,r)&&(i.attributes[r]=Gu(this.doc,bu(n.tagName),bu(r),o),"style"===r)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){this.unattachedDoc=this.doc}const r=this.unattachedDoc.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),o=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?i.styleDiff[e]=""===o?t:[t,o]:i._unchangedStyles[e]=[t,o]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}break}case"childList":if(al(e.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===e.target.tagName)return void this.genTextAreaValueMutation(e.target);e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=hu(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);al(e.target,this.blockClass,this.blockSelector,!1)||cl(t,this.mirror,this.slimDOMOptions)||!sl(t,this.mirror)||(this.addedSet.has(t)?(xl(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||ul(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Ml(n,r)]?xl(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!hu(e.target)||!mu(e.target))||void 0})),this.mapRemoves.push(t))}))}})),uu(this,"genAdds",((e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(cl(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Ml(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);al(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),vl(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}))}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function xl(e,t){e.delete(t),t.childNodes.forEach((t=>xl(e,t)))}function kl(e,t,n){return 0!==e.length&&function(e,t,n){let r=t.parentNode;for(;r;){const t=n.getId(r);if(e.some((e=>e.id===t)))return!0;r=r.parentNode}return!1}(e,t,n)}function Pl(e,t){return 0!==e.size&&Dl(e,t)}function Dl(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Dl(e,n))}let Ul;const Fl=e=>{if(!Ul)return e;return(...t)=>{try{return e(...t)}catch(n){if(Ul&&!0===Ul(n))return;throw n}}},Bl=[];function Gl(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function jl(e,t){var n,r;const o=new MutationBuffer;Bl.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const a=null==(r=null==(n=null==window?void 0:window.Zone)?void 0:n.__symbol__)?void 0:r.call(n,"MutationObserver");a&&window[a]&&(i=window[a]);const s=new i(Fl(o.processMutations.bind(o)));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Wl({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,s=[];let c=null;return Object.keys(wl).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=bu(i);const u=(t=>i=>{const a=Gl(i);if(al(a,r,o,!0))return;let s=null,u=t;if("pointerType"in i){switch(i.pointerType){case"mouse":s=Rl.Mouse;break;case"touch":s=Rl.Touch;break;case"pen":s=Rl.Pen}s===Rl.Touch?wl[t]===wl.MouseDown?u="TouchStart":wl[t]===wl.MouseUp&&(u="TouchEnd"):Rl.Pen}else ll(i)&&(s=Rl.Touch);null!==s?(c=s,(u.startsWith("Touch")&&s===Rl.Touch||u.startsWith("Mouse")&&s===Rl.Mouse)&&(s=null)):wl[t]===wl.Click&&(s=c,c=null);const l=ll(i)?i.changedTouches[0]:i;if(!l)return;const d=n.getId(a),{clientX:p,clientY:f}=l;Fl(e)({type:wl[u],id:d,x:p,y:f,...null!==s&&{pointerType:s}})})(i);if(window.PointerEvent)switch(wl[i]){case wl.MouseDown:case wl.MouseUp:a=a.replace("mouse","pointer");break;case wl.TouchStart:case wl.TouchEnd:return}s.push(Ku(a,u,t))})),Fl((()=>{s.forEach((e=>e()))}))}function Hl({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){return Ku("scroll",Fl(Qu(Fl((i=>{const a=Gl(i);if(!a||al(a,r,o,!0))return;const s=n.getId(a);if(a===t&&t.defaultView){const n=nl(t.defaultView);e({id:s,x:n.left,y:n.top})}else e({id:s,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}const Vl=["INPUT","TEXTAREA","SELECT"],Xl=new WeakMap;function Yl(e){return function(e,t){if(Jl("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Jl("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Jl("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Jl("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function zl(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Zl({mirror:e,stylesheetManager:t},n){var r,o,i;let a=null;a="#document"===n.nodeName?e.getId(n):e.getId(n.host);const s="#document"===n.nodeName?null==(r=n.defaultView)?void 0:r.Document:null==(i=null==(o=n.ownerDocument)?void 0:o.defaultView)?void 0:i.ShadowRoot,c=(null==s?void 0:s.prototype)?Object.getOwnPropertyDescriptor(null==s?void 0:s.prototype,"adoptedStyleSheets"):void 0;return null!==a&&-1!==a&&s&&c?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null==(e=c.get)?void 0:e.call(this)},set(e){var n;const r=null==(n=c.set)?void 0:n.call(this,e);if(null!==a&&-1!==a)try{t.adoptStyleSheets(e,a)}catch(o){}return r}}),Fl((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}))):()=>{}}function Kl(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;!function(e,t){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:a,inputCb:s,mediaInteractionCb:c,styleSheetRuleCb:u,styleDeclarationCb:l,canvasMutationCb:d,fontCb:p,selectionCb:f,customElementCb:h}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),n(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),r(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),o(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),i(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),a(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),s(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),c(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),u(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),l(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),d(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),p(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),f(...e)},e.customElementCb=(...e)=>{t.customElement&&t.customElement(...e),h(...e)}}(e,t),e.recordDOM&&(r=jl(e,e.doc));const o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let a,s=[];const c=Qu(Fl((t=>{const n=Date.now()-a;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],a=null})),i),u=Fl(Qu(Fl((e=>{const t=Gl(e),{clientX:n,clientY:o}=ll(e)?e.changedTouches[0]:e;a||(a=tl()),s.push({x:n,y:o,id:r.getId(t),timeOffset:tl()-a}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?Ol.Drag:e instanceof MouseEvent?Ol.MouseMove:Ol.TouchMove)})),o,{trailing:!1})),l=[Ku("mousemove",u,n),Ku("touchmove",u,n),Ku("drag",u,n)];return Fl((()=>{l.forEach((e=>e()))}))}(e),i=Wl(e),a=Hl(e),s=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Ku("resize",Fl(Qu(Fl((()=>{const t=rl(),o=ol();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=function({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:s,maskInputFn:c,sampling:u,userTriggeredOnInput:l}){function d(e){let n=Gl(e);const u=e.isTrusted,d=n&&n.tagName;if(n&&"OPTION"===d&&(n=n.parentElement),!n||!d||Vl.indexOf(d)<0||al(n,r,o,!0))return;if(n.classList.contains(i)||a&&n.matches(a))return;let f=n.value,h=!1;const m=Tu(n)||"";"radio"===m||"checkbox"===m?h=n.checked:(s[d.toLowerCase()]||s[m])&&(f=Eu({element:n,maskInputOptions:s,tagName:d,type:m,value:f,maskInputFn:c})),p(n,l?{text:f,isChecked:h,userTriggered:u}:{text:f,isChecked:h});const g=n.name;"radio"===m&&g&&h&&t.querySelectorAll(`input[type="radio"][name="${g}"]`).forEach((e=>{if(e!==n){const t=e.value;p(e,l?{text:t,isChecked:!h,userTriggered:!1}:{text:t,isChecked:!h})}}))}function p(t,r){const o=Xl.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Xl.set(t,r);const o=n.getId(t);Fl(e)({...r,id:o})}}const f=("last"===u.input?["change"]:["input","change"]).map((e=>Ku(e,Fl(d),t))),h=t.defaultView;if(!h)return()=>{f.forEach((e=>e()))};const m=h.Object.getOwnPropertyDescriptor(h.HTMLInputElement.prototype,"value"),g=[[h.HTMLInputElement.prototype,"value"],[h.HTMLInputElement.prototype,"checked"],[h.HTMLSelectElement.prototype,"value"],[h.HTMLTextAreaElement.prototype,"value"],[h.HTMLSelectElement.prototype,"selectedIndex"],[h.HTMLOptionElement.prototype,"selected"]];return m&&m.set&&f.push(...g.map((e=>$u(e[0],e[1],{set(){Fl(d)({target:this,isTrusted:!1})}},!1,h)))),Fl((()=>{f.forEach((e=>e()))}))}(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:r,sampling:o,doc:i}){const a=Fl((i=>Qu(Fl((o=>{const a=Gl(o);if(!a||al(a,t,n,!0))return;const{currentTime:s,volume:c,muted:u,playbackRate:l,loop:d}=a;e({type:i,id:r.getId(a),currentTime:s,volume:c,muted:u,playbackRate:l,loop:d})})),o.media||500))),s=[Ku("play",a(Nl.Play),i),Ku("pause",a(Nl.Pause),i),Ku("seeked",a(Nl.Seeked),i),Ku("volumechange",a(Nl.VolumeChange),i),Ku("ratechange",a(Nl.RateChange),i)];return Fl((()=>{s.forEach((e=>e()))}))}(e);let l=()=>{},d=()=>{},p=()=>{},f=()=>{};e.recordDOM&&(l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:Fl(((r,o,i)=>{const[a,s]=i,{id:c,styleId:u}=zl(o,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:a,index:s}]}),r.apply(o,i)}))});const i=r.CSSStyleSheet.prototype.deleteRule;let a,s;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:Fl(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=zl(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:a}]}),r.apply(o,i)}))}),r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:Fl(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=zl(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replace:a}),r.apply(o,i)}))})),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:Fl(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=zl(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replaceSync:a}),r.apply(o,i)}))}));const c={};ql("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(ql("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),ql("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),ql("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(u[r].insertRule,{apply:Fl(((r,o,i)=>{const[a,s]=i,{id:c,styleId:u}=zl(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:a,index:[...Yl(o),s||0]}]}),r.apply(o,i)}))}),o.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:Fl(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=zl(o.parentStyleSheet,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:[...Yl(o),a]}]}),r.apply(o,i)}))})})),Fl((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,a&&(r.CSSStyleSheet.prototype.replace=a),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}))}(e,{win:n}),d=Zl(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:Fl(((o,a,s)=>{var c;const[u,l,d]=s;if(n.has(u))return i.apply(a,[u,l,d]);const{id:p,styleId:f}=zl(null==(c=a.parentRule)?void 0:c.parentStyleSheet,t,r.styleMirror);return(p&&-1!==p||f&&-1!==f)&&e({id:p,styleId:f,set:{property:u,value:l,priority:d},index:Yl(a.parentRule)}),o.apply(a,s)}))});const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:Fl(((o,i,s)=>{var c;const[u]=s;if(n.has(u))return a.apply(i,[u]);const{id:l,styleId:d}=zl(null==(c=i.parentRule)?void 0:c.parentStyleSheet,t,r.styleMirror);return(l&&-1!==l||d&&-1!==d)&&e({id:l,styleId:d,remove:{property:u},index:Yl(i.parentRule)}),o.apply(i,s)}))}),Fl((()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a}))}(e,{win:n}),e.collectFonts&&(f=function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=el(t.fonts,"add",(function(t){return function(n){return setTimeout(Fl((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=i})),r.push(a),Fl((()=>{r.forEach((e=>e()))}))}(e)));const h=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,selectionCb:i}=e;let a=!0;const s=Fl((()=>{const e=t.getSelection();if(!e||a&&(null==e?void 0:e.isCollapsed))return;a=e.isCollapsed||!1;const s=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:c,endContainer:u,endOffset:l}=i;al(a,r,o,!0)||al(u,r,o,!0)||s.push({start:n.getId(a),startOffset:c,end:n.getId(u),endOffset:l})}i({ranges:s})}));return s(),Ku("selectionchange",s)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?el(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(i){console.warn(`Custom element callback failed for ${n}`)}return e.apply(this,[n,r,o])}})):()=>{}}(e),g=[];for(const v of e.plugins)g.push(v.observer(v.callback,n,v.options));return Fl((()=>{Bl.forEach((e=>e.reset())),null==r||r.disconnect(),o(),i(),a(),s(),c(),u(),l(),d(),p(),f(),h(),m(),g.forEach((e=>e()))}))}function Jl(e){return void 0!==window[e]}function ql(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class CrossOriginIframeMirror{constructor(e){uu(this,"iframeIdToRemoteIdMap",new WeakMap),uu(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let a=o.get(t);return a||(a=this.generateIdFn(),o.set(t,a),i.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class IframeManager{constructor(e){uu(this,"iframes",new WeakMap),uu(this,"crossOriginIframeMap",new WeakMap),uu(this,"crossOriginIframeMirror",new CrossOriginIframeMirror(Ou)),uu(this,"crossOriginIframeStyleMirror"),uu(this,"crossOriginIframeRootIdMap",new WeakMap),uu(this,"mirror"),uu(this,"mutationCb"),uu(this,"wrappedEmit"),uu(this,"loadListener"),uu(this,"stylesheetManager"),uu(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n,r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(n=e.contentWindow)||n.addEventListener("message",this.handleMessage.bind(this))),null==(r=this.loadListener)||r.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case Cl.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Cl.IncrementalSnapshot,data:{source:Ol.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Cl.Meta:case Cl.Load:case Cl.DomContentLoaded:return!1;case Cl.Plugin:return t;case Cl.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Cl.IncrementalSnapshot:switch(t.data.source){case Ol.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Ol.Drag:case Ol.TouchMove:case Ol.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Ol.ViewportResize:return!1;case Ol.MediaInteraction:case Ol.MouseInteraction:case Ol.Scroll:case Ol.CanvasMutation:case Ol.Input:return this.replaceIds(t.data,e,["id"]),t;case Ol.StyleSheetRule:case Ol.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Ol.Font:return t;case Ol.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Ol.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(n=t.data.styles)||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===pu.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class ShadowDomManager{constructor(e){uu(this,"shadowDoms",new WeakSet),uu(this,"mutationCb"),uu(this,"scrollCb"),uu(this,"bypassOptions"),uu(this,"mirror"),uu(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!mu(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=jl({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Hl({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Zl({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(el(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&Il(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(t){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Ql="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$l="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ed=0;ed<64;ed++)$l[Ql.charCodeAt(ed)]=ed;const td=new Map;const nd=(e,t,n)=>{if(!e||!id(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=td.get(e);return n||(n=new Map,td.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function rd(e,t,n){if(e instanceof Array)return e.map((e=>rd(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){return{rr_type:e.constructor.name,base64:function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=Ql[n[t]>>2],o+=Ql[(3&n[t])<<4|n[t+1]>>4],o+=Ql[(15&n[t+1])<<2|n[t+2]>>6],o+=Ql[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e)}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[rd(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[rd(e.data,t,n),e.width,e.height]}}if(id(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:nd(e,t,n)}}return e}const od=(e,t,n)=>e.map((e=>rd(e,t,n))),id=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function ad(e,t,n,r){const o=[];try{const i=el(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(o,...i){if(!al(this,t,n,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(o);if("__context"in this||(this.__context=e),r&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[o,...i])}}));o.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((e=>e()))}}function sd(e,t,n,r,o,i,a){const s=[],c=Object.getOwnPropertyNames(e);for(const u of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(u))try{if("function"!=typeof e[u])continue;const i=el(e,u,(function(e){return function(...i){const s=e.apply(this,i);if(nd(s,a,this),"tagName"in this.canvas&&!al(this.canvas,r,o,!0)){const e=od(i,a,this),r={type:t,property:u,args:e};n(this.canvas,r)}return s}}));s.push(i)}catch{const r=$u(e,u,{set(e){n(this.canvas,{type:t,property:u,args:[e],setter:!0})}});s.push(r)}return s}const cd="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpCiAgICAgICAgcmV0dXJuIHRyYW5zcGFyZW50QmxvYk1hcC5nZXQoaWQpOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIHRyYW5zcGFyZW50QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gIiI7CiAgICB9CiAgfQogIGNvbnN0IHdvcmtlciA9IHNlbGY7CiAgd29ya2VyLm9ubWVzc2FnZSA9IGFzeW5jIGZ1bmN0aW9uKGUpIHsKICAgIGlmICgiT2Zmc2NyZWVuQ2FudmFzIiBpbiBnbG9iYWxUaGlzKSB7CiAgICAgIGNvbnN0IHsgaWQsIGJpdG1hcCwgd2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMgfSA9IGUuZGF0YTsKICAgICAgY29uc3QgdHJhbnNwYXJlbnRCYXNlNjQgPSBnZXRUcmFuc3BhcmVudEJsb2JGb3IoCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIGRhdGFVUkxPcHRpb25zCiAgICAgICk7CiAgICAgIGNvbnN0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMod2lkdGgsIGhlaWdodCk7CiAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCIyZCIpOwogICAgICBjdHguZHJhd0ltYWdlKGJpdG1hcCwgMCwgMCk7CiAgICAgIGJpdG1hcC5jbG9zZSgpOwogICAgICBjb25zdCBibG9iID0gYXdhaXQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOwogICAgICBjb25zdCB0eXBlID0gYmxvYi50eXBlOwogICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKTsKICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsKICAgICAgaWYgKCFsYXN0QmxvYk1hcC5oYXMoaWQpICYmIGF3YWl0IHRyYW5zcGFyZW50QmFzZTY0ID09PSBiYXNlNjQpIHsKICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOwogICAgICB9CiAgICAgIGlmIChsYXN0QmxvYk1hcC5nZXQoaWQpID09PSBiYXNlNjQpCiAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOwogICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoewogICAgICAgIGlkLAogICAgICAgIHR5cGUsCiAgICAgICAgYmFzZTY0LAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodAogICAgICB9KTsKICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkOiBlLmRhdGEuaWQgfSk7CiAgICB9CiAgfTsKfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW1hZ2UtYml0bWFwLWRhdGEtdXJsLXdvcmtlci1CWjFyN1JKRC5qcy5tYXAK",ud="undefined"!=typeof window&&window.Blob&&new Blob([(ld=cd,Uint8Array.from(atob(ld),(e=>e.charCodeAt(0))))],{type:"text/javascript;charset=utf-8"});var ld;function dd(e){let t;try{if(t=ud&&(window.URL||window.webkitURL).createObjectURL(ud),!t)throw"";const n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(t)})),n}catch(n){return new Worker("data:text/javascript;base64,"+cd,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}class CanvasManager{constructor(e){uu(this,"pendingCanvasMutations",new Map),uu(this,"rafStamps",{latestId:0,invokeId:null}),uu(this,"mirror"),uu(this,"mutationCb"),uu(this,"resetObservers"),uu(this,"frozen",!1),uu(this,"locked",!1),uu(this,"processMutation",((e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)}));const{sampling:t="all",win:n,blockClass:r,blockSelector:o,recordCanvas:i,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,i&&"all"===t&&this.initCanvasMutationObserver(n,r,o),i&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,n,r,o){const i=ad(t,n,r,!0),a=new Map,s=new dd;s.onmessage=e=>{const{id:t}=e.data;if(a.set(t,!1),!("base64"in e.data))return;const{base64:n,type:r,width:o,height:i}=e.data;this.mutationCb({id:t,type:Al["2D"],commands:[{property:"clearRect",args:[0,0,o,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:r}]},0,0]}]})};const c=1e3/e;let u,l=0;const d=e=>{l&&e-l<c||(l=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{al(t,n,r,!0)||e.push(t)})),e})().forEach((async e=>{var t;const n=this.mirror.getId(e);if(a.get(n))return;if(0===e.width||0===e.height)return;if(a.set(n,!0),["webgl","webgl2"].includes(e.__context)){const n=e.getContext(e.__context);!1===(null==(t=null==n?void 0:n.getContextAttributes())?void 0:t.preserveDrawingBuffer)&&n.clear(n.COLOR_BUFFER_BIT)}const r=await createImageBitmap(e);s.postMessage({id:n,bitmap:r,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[r])}))),u=requestAnimationFrame(d)};u=requestAnimationFrame(d),this.resetObservers=()=>{i(),cancelAnimationFrame(u)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=ad(e,t,n,!1),o=function(e,t,n,r){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=el(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(...i){return al(this.canvas,n,r,!0)||setTimeout((()=>{const n=od(i,t,this);e(this.canvas,{type:Al["2D"],property:a,args:n})}),0),o.apply(this,i)}}));o.push(i)}catch{const n=$u(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:Al["2D"],property:a,args:[t],setter:!0})}});o.push(n)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n),i=function(e,t,n,r){const o=[];return o.push(...sd(t.WebGLRenderingContext.prototype,Al.WebGL,e,n,r,0,t)),void 0!==t.WebGL2RenderingContext&&o.push(...sd(t.WebGL2RenderingContext.prototype,Al.WebGL2,e,n,r,0,t)),()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=()=>{r(),o(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}class StylesheetManager{constructor(e){uu(this,"trackedLinkElements",new WeakSet),uu(this,"mutationCb"),uu(this,"adoptedStyleSheetCb"),uu(this,"styleMirror",new StyleSheetMirror),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const o of e){let e;this.styleMirror.has(o)?e=this.styleMirror.getId(o):(e=this.styleMirror.add(o),r.push({styleId:e,rules:Array.from(o.rules||CSSRule,((e,t)=>({rule:vu(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class ProcessedNodeManager{constructor(){uu(this,"nodeMap",new WeakMap),uu(this,"active",!1)}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.active||(this.active=!0,requestAnimationFrame((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let pd,fd,hd,md=!1;try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(eu=e.contentWindow)?void 0:eu.Array.from)||Array.from,document.body.removeChild(e)}}catch(Pf){console.debug("Unable to override Array.from",Pf)}const gd=yu();function vd(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:s=null,maskTextClass:c="rr-mask",maskTextSelector:u=null,inlineStylesheet:l=!0,maskAllInputs:d,maskInputOptions:p,slimDOMOptions:f,maskInputFn:h,maskTextFn:m,hooks:g,packFn:v,sampling:y={},dataURLOptions:E={},mousemoveWait:b,recordDOM:S=!0,recordCanvas:T=!1,recordCrossOriginIframes:_=!1,recordAfter:I=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:C=!1,collectFonts:O=!1,inlineImages:w=!1,plugins:R,keepIframeSrcFn:A=()=>!1,ignoreCSSAttributes:N=new Set([]),errorHandler:L}=e;Ul=L;const M=!_||window.parent===window;let x=!1;if(!M)try{window.parent.document&&(x=!1)}catch(Y){x=!0}if(M&&!t)throw new Error("emit function is required");if(!M&&!x)return()=>{};void 0!==b&&void 0===y.mousemove&&(y.mousemove=b),gd.reset();const k=!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==p?p:{password:!0},P=!0===f||"all"===f?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===f,headMetaDescKeywords:"all"===f,headTitleMutations:"all"===f}:f||{};let D;dl();let U=0;const F=e=>{for(const t of R||[])t.eventProcessor&&(e=t.eventProcessor(e));return v&&!x&&(e=v(e)),e};pd=(e,o)=>{var i;const a=e;if(a.timestamp=tl(),!(null==(i=Bl[0])?void 0:i.isFrozen())||a.type===Cl.FullSnapshot||a.type===Cl.IncrementalSnapshot&&a.data.source===Ol.Mutation||Bl.forEach((e=>e.unfreeze())),M)null==t||t(F(a),o);else if(x){const e={type:"rrweb",event:F(a),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(a.type===Cl.FullSnapshot)D=a,U=0;else if(a.type===Cl.IncrementalSnapshot){if(a.data.source===Ol.Mutation&&a.data.isAttachIframe)return;U++;const e=r&&U>=r,t=n&&a.timestamp-D.timestamp>n;(e||t)&&fd(!0)}};const B=e=>{pd({type:Cl.IncrementalSnapshot,data:{source:Ol.Mutation,...e}})},G=e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.Scroll,...e}}),j=e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.CanvasMutation,...e}}),W=new StylesheetManager({mutationCb:B,adoptedStyleSheetCb:e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.AdoptedStyleSheet,...e}})}),H=new IframeManager({mirror:gd,mutationCb:B,stylesheetManager:W,recordCrossOriginIframes:_,wrappedEmit:pd});for(const Z of R||[])Z.getMirror&&Z.getMirror({nodeMirror:gd,crossOriginIframeMirror:H.crossOriginIframeMirror,crossOriginIframeStyleMirror:H.crossOriginIframeStyleMirror});const V=new ProcessedNodeManager;hd=new CanvasManager({recordCanvas:T,mutationCb:j,win:window,blockClass:o,blockSelector:i,mirror:gd,sampling:y.canvas,dataURLOptions:E});const X=new ShadowDomManager({mutationCb:B,scrollCb:G,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:u,inlineStylesheet:l,maskInputOptions:k,dataURLOptions:E,maskTextFn:m,maskInputFn:h,recordCanvas:T,inlineImages:w,sampling:y,slimDOMOptions:P,iframeManager:H,stylesheetManager:W,canvasManager:hd,keepIframeSrcFn:A,processedNodeManager:V},mirror:gd});fd=(e=!1)=>{if(!S)return;pd({type:Cl.Meta,data:{href:window.location.href,width:ol(),height:rl()}},e),W.reset(),X.init(),Bl.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Mirror,blockClass:r="rr-block",blockSelector:o=null,maskTextClass:i="rr-mask",maskTextSelector:a=null,inlineStylesheet:s=!0,inlineImages:c=!1,recordCanvas:u=!1,maskAllInputs:l=!1,maskTextFn:d,maskInputFn:p,slimDOM:f=!1,dataURLOptions:h,preserveWhiteSpace:m,onSerialize:g,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:E,stylesheetLoadTimeout:b,keepIframeSrcFn:S=()=>!1}=t||{};return Yu(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,maskTextClass:i,maskTextSelector:a,skipChild:!1,inlineStylesheet:s,maskInputOptions:!0===l?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===l?{password:!0}:l,maskTextFn:d,maskInputFn:p,slimDOMOptions:!0===f||"all"===f?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===f,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===f?{}:f,dataURLOptions:h,inlineImages:c,recordCanvas:u,preserveWhiteSpace:m,onSerialize:g,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:E,stylesheetLoadTimeout:b,keepIframeSrcFn:S,newlyAddedElement:!1})}(document,{mirror:gd,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:u,inlineStylesheet:l,maskAllInputs:k,maskTextFn:m,slimDOM:P,dataURLOptions:E,recordCanvas:T,inlineImages:w,onSerialize:e=>{hl(e,gd)&&H.addIframe(e),ml(e,gd)&&W.trackLinkElement(e),vl(e)&&X.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{H.attachIframe(e,t),X.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{W.attachLinkElement(e,t)},keepIframeSrcFn:A});if(!t)return console.warn("Failed to snapshot the document");pd({type:Cl.FullSnapshot,data:{node:t,initialOffset:nl(window)}},e),Bl.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&W.adoptStyleSheets(document.adoptedStyleSheets,gd.getId(document))};try{const e=[],t=e=>{var t;return Fl(Kl)({mutationCb:B,mousemoveCb:(e,t)=>pd({type:Cl.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.ViewportResize,...e}}),inputCb:e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.Input,...e}}),mediaInteractionCb:e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.MediaInteraction,...e}}),styleSheetRuleCb:e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.StyleSheetRule,...e}}),styleDeclarationCb:e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.StyleDeclaration,...e}}),canvasMutationCb:j,fontCb:e=>pd({type:Cl.IncrementalSnapshot,data:{source:Ol.Font,...e}}),selectionCb:e=>{pd({type:Cl.IncrementalSnapshot,data:{source:Ol.Selection,...e}})},customElementCb:e=>{pd({type:Cl.IncrementalSnapshot,data:{source:Ol.CustomElement,...e}})},blockClass:o,ignoreClass:a,ignoreSelector:s,maskTextClass:c,maskTextSelector:u,maskInputOptions:k,inlineStylesheet:l,sampling:y,recordDOM:S,recordCanvas:T,inlineImages:w,userTriggeredOnInput:C,collectFonts:O,doc:e,maskInputFn:h,maskTextFn:m,keepIframeSrcFn:A,blockSelector:i,slimDOMOptions:P,dataURLOptions:E,mirror:gd,iframeManager:H,stylesheetManager:W,shadowDomManager:X,processedNodeManager:V,canvasManager:hd,ignoreCSSAttributes:N,plugins:(null==(t=null==R?void 0:R.filter((e=>e.observer)))?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>pd({type:Cl.Plugin,data:{plugin:e.name,payload:t}})}))))||[]},g)};H.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(r){console.warn(r)}}));const n=()=>{fd(),e.push(t(document)),md=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Ku("DOMContentLoaded",(()=>{pd({type:Cl.DomContentLoaded,data:{}}),"DOMContentLoaded"===I&&n()}))),e.push(Ku("load",(()=>{pd({type:Cl.Load,data:{}}),"load"===I&&n()}),window))),()=>{e.forEach((e=>e())),V.destroy(),md=!1,Ul=void 0}}catch(z){console.warn(z)}}vd.addCustomEvent=(e,t)=>{if(!md)throw new Error("please add custom event after start recording");pd({type:Cl.Custom,data:{tag:e,payload:t}})},vd.freezePage=()=>{Bl.forEach((e=>e.freeze()))},vd.takeFullSnapshot=e=>{if(!md)throw new Error("please take full snapshot after start recording");fd(e)},vd.mirror=gd;Object.defineProperty,Object.defineProperty;function yd(e){return{all:e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),e.get("*")&&r.slice().map((function(e){e(t,n)}))}}}Symbol.toStringTag;var Ed,bd;(bd=Ed||(Ed={}))[bd.NotStarted=0]="NotStarted",bd[bd.Running=1]="Running",bd[bd.Stopped=2]="Stopped";const{addCustomEvent:Sd}=vd,{freezePage:Td}=vd;var _d=Object.defineProperty,Id=(e,t,n)=>(((e,t,n)=>{t in e?_d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Cd=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Cd||{});function Od(e){return e.nodeType===e.ELEMENT_NODE}function wd(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Rd(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Ad).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(n){return null}var t}function Ad(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Rd(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(n){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}class rrweb_snapshot_Mirror{constructor(){Id(this,"idNodeMap",new Map),Id(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Nd(e){return e.toLowerCase()}const Ld="__rrweb_original__";function Md(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Nd(t):null}function xd(e,t){let n;try{n=new URL(e,t??window.location.href)}catch(Pf){return null}const r=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(null==r?void 0:r[1])??null}let kd=1;const Pd=new RegExp("[^a-z0-9-_:]");let Dd,Ud;const Fd=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Bd=/^(?:[a-z+]+:)?\/\//i,Gd=/^www\..*/i,jd=/^(data:)([^,]*),(.*)/i;function Wd(e,t){return(e||"").replace(Fd,((e,n,r,o,i,a)=>{const s=r||i||a,c=n||o||"";if(!s)return e;if(Bd.test(s)||Gd.test(s))return`url(${c}${s}${c})`;if(jd.test(s))return`url(${c}${s}${c})`;if("/"===s[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+s}${c})`;const u=t.split("/"),l=s.split("/");u.pop();for(const t of l)"."!==t&&(".."===t?u.pop():u.push(t));return`url(${c}${u.join("/")}${c})`}))}const Hd=/^[^ \t\n\r\u000c]+/,Vd=/^[, \t\n\r\u000c]+/;const Xd=new WeakMap;function Yd(e,t){return t&&""!==t.trim()?Zd(e,t):t}function zd(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Zd(e,t){let n=Xd.get(e);if(n||(n=e.createElement("a"),Xd.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function Kd(e,t,n,r){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Yd(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Vd),!(n>=t.length);){let i=r(Hd);if(","===i.slice(-1))i=Yd(e,i.substring(0,i.length-1)),o.push(i);else{let r="";i=Yd(e,i);let a=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((i+r).trim());break}if(a)")"===e&&(a=!1);else{if(","===e){n+=1,o.push((i+r).trim());break}"("===e&&(a=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?Wd(r,Zd(e)):"object"===t&&"data"===n?Yd(e,r):r:Yd(e,r):r}function Jd(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function qd(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&qd(e.parentNode,t,n);for(let r=e.classList.length;r--;){const n=e.classList[r];if(t.test(n))return!0}return!!n&&qd(e.parentNode,t,n)}function Qd(e,t,n,r){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===o)return!1;if("string"==typeof t){if(r){if(o.closest(`.${t}`))return!0}else if(o.classList.contains(t))return!0}else if(qd(o,t,r))return!0;if(n)if(r){if(o.closest(n))return!0}else if(o.matches(n))return!0}catch(uo){}return!1}function $d(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:a,inlineStylesheet:s,maskInputOptions:c={},maskTextFn:u,maskInputFn:l,dataURLOptions:d={},inlineImages:p,recordCanvas:f,keepIframeSrcFn:h,newlyAddedElement:m=!1}=t,g=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Cd.Document,childNodes:[],compatMode:e.compatMode}:{type:Cd.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Cd.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:g};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskInputFn:s,dataURLOptions:c={},inlineImages:u,recordCanvas:l,keepIframeSrcFn:d,newlyAddedElement:p=!1,rootId:f}=t,h=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(uo){}return!1}(e,r,o),m=function(e){if(e instanceof HTMLFormElement)return"form";const t=Nd(e.tagName);return Pd.test(t)?"div":t}(e);let g={};const v=e.attributes.length;for(let E=0;E<v;E++){const t=e.attributes[E];Jd(m,t.name,t.value)||(g[t.name]=Kd(n,m,Nd(t.name),t.value))}if("link"===m&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=Rd(t)),r&&(delete g.rel,delete g.href,g._cssText=Wd(r,t.href))}if("style"===m&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Rd(e.sheet);t&&(g._cssText=Wd(t,Zd(n)))}if("input"===m||"textarea"===m||"select"===m){const t=e.value,n=e.checked;"radio"!==g.type&&"checkbox"!==g.type&&"submit"!==g.type&&"button"!==g.type&&t?g.value=function({element:e,maskInputOptions:t,tagName:n,type:r,value:o,maskInputFn:i}){let a=o||"";const s=r&&Nd(r);return(t[n.toLowerCase()]||s&&t[s])&&(a=i?i(a,e):"*".repeat(a.length)),a}({element:e,type:Md(e),tagName:m,value:t,maskInputOptions:a,maskInputFn:s}):n&&(g.checked=n)}"option"===m&&(e.selected&&!a.select?g.selected=!0:delete g.selected);if("canvas"===m&&l)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,i=Ld in o?o[Ld]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(g.rr_dataURL=e.toDataURL(c.type,c.quality));else if(!("__context"in e)){const t=e.toDataURL(c.type,c.quality),r=n.createElement("canvas");r.width=e.width,r.height=e.height;t!==r.toDataURL(c.type,c.quality)&&(g.rr_dataURL=t)}if("img"===m&&u){Dd||(Dd=n.createElement("canvas"),Ud=Dd.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",o=t.crossOrigin,i=()=>{t.removeEventListener("load",i);try{Dd.width=t.naturalWidth,Dd.height=t.naturalHeight,Ud.drawImage(t,0,0),g.rr_dataURL=Dd.toDataURL(c.type,c.quality)}catch(Pf){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i));console.warn(`Cannot inline img src=${r}! Error: ${Pf}`)}"anonymous"===t.crossOrigin&&(o?g.crossOrigin=o:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i)}if("audio"===m||"video"===m){const t=g;t.rr_mediaState=e.paused?"paused":"played",t.rr_mediaCurrentTime=e.currentTime,t.rr_mediaPlaybackRate=e.playbackRate,t.rr_mediaMuted=e.muted,t.rr_mediaLoop=e.loop,t.rr_mediaVolume=e.volume}p||(e.scrollLeft&&(g.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(g.rr_scrollTop=e.scrollTop));if(h){const{width:t,height:n}=e.getBoundingClientRect();g={class:g.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==m||d(g.src)||(e.contentDocument||(g.rr_src=g.src),delete g.src);let y;try{customElements.get(m)&&(y=!0)}catch(uo){}return{type:Cd.Element,tagName:m,attributes:g,childNodes:[],isSVG:zd(e)||void 0,needBlock:h,rootId:f,isCustom:y}}(e,{doc:n,blockClass:o,blockSelector:i,inlineStylesheet:s,maskInputOptions:c,maskInputFn:l,dataURLOptions:d,inlineImages:p,recordCanvas:f,keepIframeSrcFn:h,newlyAddedElement:m,rootId:g});case e.TEXT_NODE:return function(e,t){var n;const{needsMask:r,maskTextFn:o,rootId:i}=t,a=e.parentNode&&e.parentNode.tagName;let s=e.textContent;const c="STYLE"===a||void 0,u="SCRIPT"===a||void 0;if(c&&s){try{e.nextSibling||e.previousSibling||(null==(n=e.parentNode.sheet)?void 0:n.cssRules)&&(s=Rd(e.parentNode.sheet))}catch(Pf){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${Pf}`,e)}s=Wd(s,Zd(t.doc))}u&&(s="SCRIPT_PLACEHOLDER");!c&&!u&&s&&r&&(s=o?o(s,e.parentElement):s.replace(/[\S]/g,"*"));return{type:Cd.Text,textContent:s||"",isStyle:c,rootId:i}}(e,{doc:n,needsMask:a,maskTextFn:u,rootId:g});case e.CDATA_SECTION_NODE:return{type:Cd.CDATA,textContent:"",rootId:g};case e.COMMENT_NODE:return{type:Cd.Comment,textContent:e.textContent||"",rootId:g};default:return!1}}function ep(e){return null==e?"":e.toLowerCase()}function tp(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:s,skipChild:c=!1,inlineStylesheet:u=!0,maskInputOptions:l={},maskTextFn:d,maskInputFn:p,slimDOMOptions:f,dataURLOptions:h={},inlineImages:m=!1,recordCanvas:g=!1,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:E=5e3,onStylesheetLoad:b,stylesheetLoadTimeout:S=5e3,keepIframeSrcFn:T=()=>!1,newlyAddedElement:_=!1}=t;let{needsMask:I}=t,{preserveWhiteSpace:C=!0}=t;if(!I&&e.childNodes){I=Qd(e,a,s,void 0===I)}const O=$d(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:I,inlineStylesheet:u,maskInputOptions:l,maskTextFn:d,maskInputFn:p,dataURLOptions:h,inlineImages:m,recordCanvas:g,keepIframeSrcFn:T,newlyAddedElement:_});if(!O)return console.warn(e,"not serialized"),null;let w;w=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===Cd.Comment)return!0;if(e.type===Cd.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===xd(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(ep(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===ep(e.attributes.name)||"icon"===ep(e.attributes.rel)||"apple-touch-icon"===ep(e.attributes.rel)||"shortcut icon"===ep(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&ep(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ep(e.attributes.property).match(/^(og|twitter|fb):/)||ep(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===ep(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===ep(e.attributes.name)||"googlebot"===ep(e.attributes.name)||"bingbot"===ep(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===ep(e.attributes.name)||"generator"===ep(e.attributes.name)||"framework"===ep(e.attributes.name)||"publisher"===ep(e.attributes.name)||"progid"===ep(e.attributes.name)||ep(e.attributes.property).match(/^article:/)||ep(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===ep(e.attributes.name)||"yandex-verification"===ep(e.attributes.name)||"csrf-token"===ep(e.attributes.name)||"p:domain_verify"===ep(e.attributes.name)||"verify-v1"===ep(e.attributes.name)||"verification"===ep(e.attributes.name)||"shopify-checkout-api-token"===ep(e.attributes.name)))return!0}}return!1}(O,f)&&(C||O.type!==Cd.Text||O.isStyle||O.textContent.replace(/^\s+|\s+$/gm,"").length)?kd++:-2;const R=Object.assign(O,{id:w});if(r.add(e,R),-2===w)return null;v&&v(e);let A=!c;if(R.type===Cd.Element){A=A&&!R.needBlock,delete R.needBlock;const t=e.shadowRoot;t&&wd(t)&&(R.isShadowHost=!0)}if((R.type===Cd.Document||R.type===Cd.Element)&&A){f.headWhitespace&&R.type===Cd.Element&&"head"===R.tagName&&(C=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:c,inlineStylesheet:u,maskInputOptions:l,maskTextFn:d,maskInputFn:p,slimDOMOptions:f,dataURLOptions:h,inlineImages:m,recordCanvas:g,preserveWhiteSpace:C,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:E,onStylesheetLoad:b,stylesheetLoadTimeout:S,keepIframeSrcFn:T};if(R.type===Cd.Element&&"textarea"===R.tagName&&void 0!==R.attributes.value);else for(const n of Array.from(e.childNodes)){const e=tp(n,t);e&&R.childNodes.push(e)}if(Od(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=tp(n,t);r&&(wd(e.shadowRoot)&&(r.isShadow=!0),R.childNodes.push(r))}}return e.parentNode&&function(e){const t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}(e.parentNode)&&wd(e.parentNode)&&(R.isShadow=!0),R.type===Cd.Element&&"iframe"===R.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,i=!1;try{o=r.document.readyState}catch(s){return}if("complete"!==o){const r=setTimeout((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),i=!0,t()}))}const a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&y){const n=tp(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:l,maskTextFn:d,maskInputFn:p,slimDOMOptions:f,dataURLOptions:h,inlineImages:m,recordCanvas:g,preserveWhiteSpace:C,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:E,onStylesheetLoad:b,stylesheetLoadTimeout:S,keepIframeSrcFn:T});n&&y(e,n)}}),E),R.type===Cd.Element&&"link"===R.tagName&&"string"==typeof R.attributes.rel&&("stylesheet"===R.attributes.rel||"preload"===R.attributes.rel&&"string"==typeof R.attributes.href&&"css"===xd(R.attributes.href))&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(a){return}if(r)return;const i=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(i),o=!0,t()}))}(e,(()=>{if(b){const t=tp(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,needsMask:I,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:l,maskTextFn:d,maskInputFn:p,slimDOMOptions:f,dataURLOptions:h,inlineImages:m,recordCanvas:g,preserveWhiteSpace:C,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:E,onStylesheetLoad:b,stylesheetLoadTimeout:S,keepIframeSrcFn:T});t&&b(e,t)}}),S),R}const np=/(max|min)-device-(width|height)/,rp=(new RegExp(np.source,"g"),/([^\\]):hover/);new RegExp(rp.source,"g");var op,ip=function(e,t){var n=ts(Pi);null==n||n.reportInternalEvent(e,t)},ap=Object.defineProperty,sp=(e,t,n)=>(((e,t,n)=>{t in e?ap(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),cp=Object.defineProperty,up=(e,t,n)=>(((e,t,n)=>{t in e?cp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),lp=Object.defineProperty,dp=(e,t,n)=>(((e,t,n)=>{t in e?lp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class rrweb_plugin_console_record_Mirror{constructor(){dp(this,"idNodeMap",new Map),dp(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function pp(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&pp(e.parentNode,t,n);for(let r=e.classList.length;r--;){const n=e.classList[r];if(t.test(n))return!0}return!!n&&pp(e.parentNode,t,n)}const fp="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let hp={map:{},getId:()=>(console.error(fp),-1),getNode:()=>(console.error(fp),null),removeNodeFromMap(){console.error(fp)},has:()=>(console.error(fp),!1),reset(){console.error(fp)}};"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(hp=new Proxy(hp,{get:(e,t,n)=>("map"===t&&console.error(fp),Reflect.get(e,t,n))}));let mp=Date.now;function gp(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}/[1-9][0-9]{12}/.test(Date.now().toString())||(mp=()=>(new Date).getTime());function vp(e){var t,n;let r=null;return(null==(n=null==(t=e.getRootNode)?void 0:t.call(e))?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function yp(e){let t,n=e;for(;t=vp(n);)n=t;return n}function Ep(e){const t=e.ownerDocument;if(!t)return!1;const n=yp(e);return t.contains(n)}const bp=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:class rrweb_plugin_console_record_StyleSheetMirror{constructor(){up(this,"id",1),up(this,"styleIDMap",new WeakMap),up(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}},get _mirror(){return hp},closestElementOfNode:gp,getBaseDimension:function e(t,n){var r,o;const i=null==(o=null==(r=t.ownerDocument)?void 0:r.defaultView)?void 0:o.frameElement;if(!i||i===n)return{x:0,y:0,relativeScale:1,absoluteScale:1};const a=i.getBoundingClientRect(),s=e(i,n),c=a.height/i.clientHeight;return{x:a.x*s.relativeScale+s.x,y:a.y*s.relativeScale+s.y,relativeScale:c,absoluteScale:s.absoluteScale*c}},getNestedRule:function e(t,n){const r=t[n[0]];return 1===n.length?r:e(r.cssRules[n[1]].cssRules,n.slice(2))},getPositionsAndIndex:function(e){const t=[...e],n=t.pop();return{positions:t,index:n}},getRootShadowHost:yp,getShadowHost:vp,getWindowHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight},getWindowScroll:function(e){var t,n,r,o,i,a;const s=e.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==s?void 0:s.documentElement.scrollLeft)||(null==(n=null==(t=null==s?void 0:s.body)?void 0:t.parentElement)?void 0:n.scrollLeft)||(null==(r=null==s?void 0:s.body)?void 0:r.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==s?void 0:s.documentElement.scrollTop)||(null==(i=null==(o=null==s?void 0:s.body)?void 0:o.parentElement)?void 0:i.scrollTop)||(null==(a=null==s?void 0:s.body)?void 0:a.scrollTop)||0}},getWindowWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth},hasShadowRoot:function(e){return Boolean(null==e?void 0:e.shadowRoot)},hookSetter:function e(t,n,r,o,i=window){const a=i.Object.getOwnPropertyDescriptor(t,n);return i.Object.defineProperty(t,n,o?r:{set(e){setTimeout((()=>{r.set.call(this,e)}),0),a&&a.set&&a.set.call(this,e)}}),()=>e(t,n,a||{},!0)},inDom:function(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Ep(e))},isAncestorRemoved:function e(t,n){if(function(e){const t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}(t))return!1;const r=n.getId(t);return!n.has(r)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||e(t.parentNode,n))},isBlocked:function(e,t,n,r){if(!e)return!1;const o=gp(e);if(!o)return!1;try{if("string"==typeof t){if(o.classList.contains(t))return!0;if(r&&null!==o.closest("."+t))return!0}else if(pp(o,t,r))return!0}catch(i){}if(n){if(o.matches(n))return!0;if(r&&null!==o.closest(n))return!0}return!1},isIgnored:function(e,t,n){return!("TITLE"!==e.tagName||!n.headTitleMutations)||-2===t.getId(e)},isSerialized:function(e,t){return-1!==t.getId(e)},isSerializedIframe:function(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))},isSerializedStylesheet:function(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))},iterateResolveTree:function e(t,n){n(t.value);for(let r=t.children.length-1;r>=0;r--)e(t.children[r],n)},legacy_isTouchEvent:function(e){return Boolean(e.changedTouches)},get nowTimestamp(){return mp},on:function(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)},patch:function(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}},polyfill:function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})},queueToResolveTrees:function(e){const t={},n=(e,n)=>{const r={value:e,parent:n,children:[]};return t[e.node.id]=r,r},r=[];for(const o of e){const{nextId:e,parentId:i}=o;if(e&&e in t){const i=t[e];if(i.parent){const e=i.parent.children.indexOf(i);i.parent.children.splice(e,0,n(o,i.parent))}else{const e=r.indexOf(i);r.splice(e,0,n(o,null))}}else if(i in t){const e=t[i];e.children.push(n(o,e))}else r.push(n(o,null))}return r},shadowHostInDom:Ep,throttle:function(e,t,n={}){let r=null,o=0;return function(...i){const a=Date.now();o||!1!==n.leading||(o=a);const s=t-(a-o),c=this;s<=0||s>t?(r&&(clearTimeout(r),r=null),o=a,e.apply(c,i)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,i)}),s))}},uniqueTextMutations:function(e){const t=new Set,n=[];for(let r=e.length;r--;){const o=e[r];t.has(o.id)||(n.push(o),t.add(o.id))}return n}},Symbol.toStringTag,{value:"Module"}));for(var Sp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tp="undefined"==typeof Uint8Array?[]:new Uint8Array(256),_p=0;_p<64;_p++)Tp[Sp.charCodeAt(_p)]=_p;"undefined"!=typeof window&&window.Blob&&new Blob([(e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0))))("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpCiAgICAgICAgcmV0dXJuIHRyYW5zcGFyZW50QmxvYk1hcC5nZXQoaWQpOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIHRyYW5zcGFyZW50QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gIiI7CiAgICB9CiAgfQogIGNvbnN0IHdvcmtlciA9IHNlbGY7CiAgd29ya2VyLm9ubWVzc2FnZSA9IGFzeW5jIGZ1bmN0aW9uKGUpIHsKICAgIGlmICgiT2Zmc2NyZWVuQ2FudmFzIiBpbiBnbG9iYWxUaGlzKSB7CiAgICAgIGNvbnN0IHsgaWQsIGJpdG1hcCwgd2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMgfSA9IGUuZGF0YTsKICAgICAgY29uc3QgdHJhbnNwYXJlbnRCYXNlNjQgPSBnZXRUcmFuc3BhcmVudEJsb2JGb3IoCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIGRhdGFVUkxPcHRpb25zCiAgICAgICk7CiAgICAgIGNvbnN0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMod2lkdGgsIGhlaWdodCk7CiAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCIyZCIpOwogICAgICBjdHguZHJhd0ltYWdlKGJpdG1hcCwgMCwgMCk7CiAgICAgIGJpdG1hcC5jbG9zZSgpOwogICAgICBjb25zdCBibG9iID0gYXdhaXQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOwogICAgICBjb25zdCB0eXBlID0gYmxvYi50eXBlOwogICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKTsKICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsKICAgICAgaWYgKCFsYXN0QmxvYk1hcC5oYXMoaWQpICYmIGF3YWl0IHRyYW5zcGFyZW50QmFzZTY0ID09PSBiYXNlNjQpIHsKICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOwogICAgICB9CiAgICAgIGlmIChsYXN0QmxvYk1hcC5nZXQoaWQpID09PSBiYXNlNjQpCiAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOwogICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoewogICAgICAgIGlkLAogICAgICAgIHR5cGUsCiAgICAgICAgYmFzZTY0LAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodAogICAgICB9KTsKICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkOiBlLmRhdGEuaWQgfSk7CiAgICB9CiAgfTsKfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW1hZ2UtYml0bWFwLWRhdGEtdXJsLXdvcmtlci1CWjFyN1JKRC5qcy5tYXAK")],{type:"text/javascript;charset=utf-8"});try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(op=e.contentWindow)?void 0:op.Array.from)||Array.from,document.body.removeChild(e)}}catch(Pf){console.debug("Unable to override Array.from",Pf)}var Ip;new rrweb_plugin_console_record_Mirror,function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(Ip||(Ip={}));class StackFrame{constructor(e){sp(this,"fileName"),sp(this,"functionName"),sp(this,"lineNumber"),sp(this,"columnNumber"),this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}toString(){const e=this.lineNumber||"",t=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${e}:${t})`:`${this.fileName}:${e}:${t}`}}const Cp=/(^|@)\S+:\d+/,Op=/^\s*at .*(\S+:\d+|\(native\))/m,wp=/^(eval@)?(\[native code])?$/,Rp={parse:function(e){return e?void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(Op)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):(console.warn("[console-record-plugin]: Failed to parse error object:",e),[]):[]},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];const t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw new Error(`Cannot parse given url: ${e}`);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(Op)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(");const n=t.match(/ (\((.+):(\d+):(\d+)\)$)/);t=n?t.replace(n[0],""):t;const r=t.split(/\s+/).slice(1),o=this.extractLocation(n?n[1]:r.pop()),i=r.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new StackFrame({functionName:i,fileName:a,lineNumber:o[1],columnNumber:o[2]})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(wp)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new StackFrame({functionName:e});{const t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,o=this.extractLocation(e.replace(t,""));return new StackFrame({functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})}}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){const t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[];for(let o=2,i=n.length;o<i;o+=2){const e=t.exec(n[o]);e&&r.push(new StackFrame({fileName:e[2],lineNumber:parseFloat(e[1])}))}return r},parseOpera10:function(e){const t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[];for(let o=0,i=n.length;o<i;o+=2){const e=t.exec(n[o]);e&&r.push(new StackFrame({functionName:e[3]||void 0,fileName:e[2],lineNumber:parseFloat(e[1])}))}return r},parseOpera11:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(Cp)&&!e.match(/^Error created at/)}),this).map((function(e){const t=e.split("@"),n=this.extractLocation(t.pop()),r=(t.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new StackFrame({functionName:r,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})}),this)}};function Ap(e){if(!e||!e.outerHTML)return"";let t="";for(;e.parentElement;){let n=e.localName;if(!n)break;n=n.toLowerCase();const r=e.parentElement,o=[];if(r.children&&r.children.length>0)for(let e=0;e<r.children.length;e++){const t=r.children[e];t.localName&&t.localName.toLowerCase&&t.localName.toLowerCase()===n&&o.push(t)}o.length>1&&(n+=`:eq(${o.indexOf(e)})`),t=n+(t?">"+t:""),e=r}return t}function Np(e){return"[object Object]"===Object.prototype.toString.call(e)}function Lp(e,t){if(0===t)return!0;const n=Object.keys(e);for(const r of n)if(Np(e[r])&&Lp(e[r],t-1))return!0;return!1}function Mp(e,t){const n={numOfKeysLimit:50,depthOfLimit:4};Object.assign(n,t);const r=[],o=[];return JSON.stringify(e,(function(e,t){if(r.length>0){const n=r.indexOf(this);~n?r.splice(n+1):r.push(this),~n?o.splice(n,1/0,e):o.push(e),~r.indexOf(t)&&(t=r[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,r.indexOf(t)).join(".")+"]")}else r.push(t);if(null===t)return t;if(void 0===t)return"undefined";if(function(e){if(Np(e)&&Object.keys(e).length>n.numOfKeysLimit)return!0;if("function"==typeof e)return!0;if(Np(e)&&Lp(e,n.depthOfLimit))return!0;return!1}(t))return function(e){let t=e.toString();n.stringLengthLimit&&t.length>n.stringLengthLimit&&(t=`${t.slice(0,n.stringLengthLimit)}...`);return t}(t);if("bigint"==typeof t)return t.toString()+"n";if(t instanceof Event){const e={};for(const n in t){const r=t[n];Array.isArray(r)?e[n]=Ap(r.length?r[0]:null):e[n]=r}return e}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t instanceof Error?t.stack?t.stack+"\nEnd of stack for Error object":t.name+": "+t.message:t}))}const xp={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function kp(e,t,n){const r=n?Object.assign({},xp,n):xp,o=r.logger;if(!o)return()=>{};let i;i="string"==typeof o?t[o]:o;let a=0,s=!1;const c=[];if(r.level.includes("error")){const n=t=>{const n=t.message,o=t.error,i=Rp.parse(o).map((e=>e.toString())),a=[Mp(n,r.stringifyOptions)];e({level:"error",trace:i,payload:a})};t.addEventListener("error",n),c.push((()=>{t.removeEventListener("error",n)}));const o=t=>{let n,o;t.reason instanceof Error?(n=t.reason,o=[Mp(`Uncaught (in promise) ${n.name}: ${n.message}`,r.stringifyOptions)]):(n=new Error,o=[Mp("Uncaught (in promise)",r.stringifyOptions),Mp(t.reason,r.stringifyOptions)]);const i=Rp.parse(n).map((e=>e.toString()));e({level:"error",trace:i,payload:o})};t.addEventListener("unhandledrejection",o),c.push((()=>{t.removeEventListener("unhandledrejection",o)}))}for(const l of r.level)c.push(u(i,l));return()=>{c.forEach((e=>e()))};function u(t,n){return t[n]?bp.patch(t,n,(t=>(...o)=>{if(t.apply(this,o),!s){s=!0;try{const t=Rp.parse(new Error).map((e=>e.toString())).splice(1),i=o.map((e=>Mp(e,r.stringifyOptions)));a++,a<r.lengthThreshold?e({level:n,trace:t,payload:i}):a===r.lengthThreshold&&e({level:"warn",trace:[],payload:[Mp("The number of log records reached the threshold.")]})}catch(i){t("rrweb logger error:",i,...o)}finally{s=!1}}})):()=>{}}}function Pp(){var e=this,t=1048576;function n(e,t,n,r,o,i,a){void 0===a&&(a="sendRecordData");var s=new Blob([n],{type:"application/octet-stream"});self.postMessage({sessionId:e,sessionCreationDate:t,gzipBlob:s,chunkIndex:r,totalChunks:o,screenshotId:i,event:a})}!function(e,t){try{importScripts(e)}catch(Pf){try{importScripts(t)}catch(n){self.postMessage({event:"stopRecording"})}}}("https://cdn.rum-ingress-coralogix.com/coralogix/browser/latest/pako_deflate.es5.min.js","https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako_deflate.es5.min.js"),self.onmessage=function(r){var o,i=r.data;if(!e.pako)return console.warn("Coralogix Browser SDK - Web worker not created due to missing pako library"),void self.postMessage({event:"stopRecording"});o=!!i.screenshotId?JSON.stringify(i.records):JSON.stringify(i.records).slice(1,-1);var a=i.sessionId,s=i.sessionCreationDate,c=i.screenshotId,u=e.pako.gzip(o),l=u.byteLength;if(l>=t)for(var d=Math.ceil(l/t),p=0;p<d;p++){var f=p*t,h=(p+1)*t;n(a,s,u.slice(f,h),p,d-1,c,"splitRecordData")}else n(a,s,u,void 0,void 0,c)},self.onerror=function(e){console.warn("Coralogix Browser SDK - Error from session recording worker:\n",e),self.postMessage({event:"stopRecording"})}}var Dp=function(){function e(){}return e.prototype.loadAndCreateWorker=function(e){return i(this,void 0,Promise,(function(){var t,n,r,o;return a(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e?[4,this.loadWorkerScript(e)]:[3,2];case 1:return t=i.sent(),[3,3];case 2:t="(".concat(Pp.toString(),")()"),i.label=3;case 3:return n=new Blob([t],{type:"application/javascript"}),r=URL.createObjectURL(n),[2,new Worker(r)];case 4:return o=i.sent(),console.warn("CoralogixRum: Error creating worker ".concat(o)),[2,void 0];case 5:return[2]}}))}))},e.prototype.loadWorkerScript=function(e){return i(this,void 0,Promise,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(this.getFullWorkerUrl(e))];case 1:return(t=n.sent()).ok?[4,t.text()]:(console.warn("CoralogixRum: Error fetching custom web worker"),[2,""]);case 2:return[2,n.sent()];case 3:return n.sent(),console.warn("CoralogixRum: Error fetching custom web worker"),[2,""];case 4:return[2]}}))}))},e.prototype.getFullWorkerUrl=function(e){return e.startsWith("http://")||e.startsWith("https://")?e:"".concat(Fn.location.origin).concat(e)},e}(),Up=function(){function e(e,t){var n,r=this;this.isAutoStartRecording=!1,this.onlySessionWithErrorMode=!1,this.recordEvents=[],this.recordEventsForSessionWithError=[[],[]],this.segmentIndexCounter={},this.hasRecording=!1,this.hasScreenshot=!1,this.recordingStopped=!1,this.batchTimeDelay=Rn,this.isErrorOccurred=!1,this.debugMode=!!(null===(n=Wn())||void 0===n?void 0:n.debug),this._recordingStopDueToTimeout=!1,this.handleRecordEvent=function(e,t){r.recordingStopped||(r.onlySessionWithErrorMode?r.handleRecordEventForSessionWithError(e,t):r.recordEvents.push(e))},this.prepareRecordEventsBeforeSend=function(){if(r.onlySessionWithErrorMode)r.prepareRecordEventsForSessionWithError();else{if(!r.recordEvents.length)return;r.compressRecordData(r.recordEvents),r.resetBatching()}},this.sendRecordEvents=function(e,t){var n=new FormData,o=r.getMetadata(e,t);n.append("chunk",e.gzipBlob),n.append("metaData",JSON.stringify(o));var s=function(){return i(r,void 0,void 0,(function(){var e,t,r;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),this.isErrorOccurred?[3,2]:[4,null===(r=this.request)||void 0===r?void 0:r.send(n)];case 1:return t=o.sent(),[3,3];case 2:t=void 0,o.label=3;case 3:return e=t,this.handleSessionRecordingResponse(e),[3,5];case 4:return o.sent(),this.handleSessionRecordingResponse(void 0),[3,5];case 5:return[2]}}))}))};t?(r.batchTimeout=setTimeout(s,r.batchTimeDelay),r.batchTimeDelay+=Rn):(s(),r.batchTimeDelay=Rn)},Fn[xn]=this,this.sessionManager=e;var o=e.onlySessionWithErrorMode,s=e.maxRecordTimeForSessionWithError,c=t.maxMutations,u=t.autoStartSessionRecording,l=t.workerUrl;this.onlySessionWithErrorMode=o,this.maxRecordTimeForSessionWithError=s,this.isAutoStartRecording=u,this.maxMutations=null!=c?c:5e3,this.recordConfig=this.prepareRecordConfig(t),Fn.Worker?(this.workerManager=new Dp,this.initializeSessionWorker(l)):this.debugMode&&console.warn("Coralogix Browser SDK - Recording is not supported on this platform")}return e.prototype.getSessionHasScreenshot=function(){return this.hasScreenshot},e.prototype.getSessionHasRecording=function(){var e;return this.hasRecording&&!!this.segmentIndexCounter[null===(e=this.sessionManager.getActiveSession())||void 0===e?void 0:e.sessionId]},e.prototype.updateSegmentIndexCounter=function(e){this.segmentIndexCounter=e},e.prototype.getIsAutoStartRecording=function(){return this.isAutoStartRecording},Object.defineProperty(e.prototype,"recordingStopDueToTimeout",{get:function(){return this._recordingStopDueToTimeout},set:function(e){this._recordingStopDueToTimeout=e},enumerable:!1,configurable:!0}),e.prototype.startRecording=function(){return i(this,void 0,Promise,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.isWorkerReady];case 1:return e.sent(),!this.sessionWorker||this.recordRef?[2]:(this.debugMode&&console.debug("Coralogix Browser SDK - Session recording started"),this.startMutationObserver(),this.resetBatching(),this.hasRecording=!0,this.recordingStopped=!1,this.isErrorOccurred=!1,this.recordingStopDueToTimeout=!1,this.recordRef=vd(this.recordConfig),this.startBatchingRecords(),[2])}}))}))},e.prototype.screenshot=function(e){this.hasScreenshot=!0;var t=this.sessionManager.getActiveSession()||{},n=t.sessionId,r=t.sessionCreationDate,o=function(e,t){const{mirror:n=new rrweb_snapshot_Mirror,blockClass:r="rr-block",blockSelector:o=null,maskTextClass:i="rr-mask",maskTextSelector:a=null,inlineStylesheet:s=!0,inlineImages:c=!1,recordCanvas:u=!1,maskAllInputs:l=!1,maskTextFn:d,maskInputFn:p,slimDOM:f=!1,dataURLOptions:h,preserveWhiteSpace:m,onSerialize:g,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:E,stylesheetLoadTimeout:b,keepIframeSrcFn:S=()=>!1}=t||{};return tp(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,maskTextClass:i,maskTextSelector:a,skipChild:!1,inlineStylesheet:s,maskInputOptions:!0===l?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===l?{password:!0}:l,maskTextFn:d,maskInputFn:p,slimDOMOptions:!0===f||"all"===f?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===f,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===f?{}:f,dataURLOptions:h,inlineImages:c,recordCanvas:u,preserveWhiteSpace:m,onSerialize:g,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:E,stylesheetLoadTimeout:b,keepIframeSrcFn:S,newlyAddedElement:!1})}(document,this.recordConfig);o&&this.sessionWorker.postMessage({event:"sendRecordData",records:o,sessionId:n,screenshotId:e,sessionCreationDate:r})},e.prototype.stopRecording=function(){this.recordRef&&(this.debugMode&&console.debug("Coralogix Browser SDK - Session recording stopped"),this.recordRef(),this.recordRef=void 0,this.recordingStopped=!0,this.hasRecording=!1,this.prepareRecordEventsBeforeSend(),this.clearIntervals(),this.stopMutationObserver())},e.prototype.stopMutationObserver=function(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()},e.prototype.startMutationObserver=function(){var e=this;this.stopMutationObserver(),this.mutationObserver=new MutationObserver((function(t){if(t.length>e.maxMutations){var n="Coralogix Browser SDK - Recording stopped due to too many mutations ".concat(t.length);console.warn(n),ip("recording-stop",n),e.stopRecording()}})),this.mutationObserver.observe(document,{attributes:!1,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!0})},e.prototype.clearIntervals=function(){this.batchingTimeInterval&&clearInterval(this.batchingTimeInterval)},e.prototype.prepareRecordConfig=function(e){var t,n,o=e||{},i=o.excludeDOMOptions,a=o.recordConsoleEvents;return this.recordConfig=r(r({},e),{emit:this.handleRecordEvent,checkoutEveryNms:this.onlySessionWithErrorMode?this.maxRecordTimeForSessionWithError:void 0,slimDOMOptions:r(r({},i),{script:null===(t=null==i?void 0:i.script)||void 0===t||t}),plugins:a?[{name:"rrweb/console@1",observer:kp,options:n}]:[]}),this.recordConfig},e.prototype.handleRecordEventForSessionWithError=function(e,t){if(!(this.sessionManager.sessionHasError&&!!t&&e.type===su.FullSnapshot)){!!t&&e.type===su.Meta&&this.recordEventsForSessionWithError.push([]);var n=this.recordEventsForSessionWithError;n[n.length-1].push(e)}},e.prototype.prepareRecordEventsForSessionWithError=function(){var e=this.recordEventsForSessionWithError,t=e.length,n=e[t-2],r=e[t-1];if(this.sessionManager.sessionHasError){var o=n.concat(r);if(!o.length)return;this.compressRecordData(o),this.resetBatching()}else this.recordEventsForSessionWithError=[n,r]},e.prototype.compressRecordData=function(e){var t=this.sessionManager.getActiveSession()||{},n=t.sessionId,r=t.sessionCreationDate;this.sessionWorker.postMessage({event:"compressRecordData",records:e,sessionId:n,sessionCreationDate:r})},e.prototype.registerToWorkerMessages=function(){var e=this;this.sessionWorker.onmessage=function(t){var n=t.data;switch(n.event){case"sendRecordData":e.sendRecordEvents(n,!1);break;case"splitRecordData":e.sendRecordEvents(n,!0);break;case"stopRecording":e.stopRecording()}}},e.prototype.resetBatching=function(){this.onlySessionWithErrorMode?this.recordEventsForSessionWithError=[[],[]]:this.recordEvents=[]},e.prototype.getMetadata=function(e,t){var n=e.sessionId,r=e.sessionCreationDate,o=e.screenshotId,i=e.gzipBlob,a=e.chunkIndex,s=e.totalChunks,c=0,u=Wn().application;return!!o||(this.segmentIndexCounter[n]||(this.segmentIndexCounter[n]=0),c=t?a===s?this.segmentIndexCounter[n]++:this.segmentIndexCounter[n]:this.segmentIndexCounter[n]++,sessionStorage.setItem(kn,JSON.stringify(this.segmentIndexCounter))),{segmentIndex:c,segmentSize:i.size,segmentTimestamp:On(),sessionCreationDate:r,sessionId:n,snapshotId:o,application:u,subIndex:null!=a?a:-1}},e.prototype.handleSessionRecordingResponse=function(e){(null==e?void 0:e.ok)||this.isErrorOccurred?this.isErrorOccurred=!1:(console.warn("Coralogix Browser SDK - Error while sending record"),this.isErrorOccurred=!0,this.stopRecording(),this.batchTimeout&&clearTimeout(this.batchTimeout))},e.prototype.startBatchingRecords=function(){this.batchingTimeInterval=setInterval(this.prepareRecordEventsBeforeSend,1e4)},e.prototype.initializeSessionWorker=function(e){var t=this;this.isWorkerReady=new Promise((function(n,r){t.workerManager.loadAndCreateWorker(e).then((function(e){t.sessionWorker=e,t.isAutoStartRecording&&t.startRecording(),t.request=new vs({suffix:"/browser/alpha/sessionrecording",headers:wn}),t.registerToWorkerMessages(),n(!0)})).catch((function(e){t.debugMode&&console.warn("Coralogix Browser SDK - Web worker not created due to: ",e),r(e)}))}))},e}(),Fp=function(){function e(e){var t=this;this.idleConfig=e,this._isIdleActive=!1,this.stopCallbacks={},this.resetTimeout=function(){var e,n;null===(n=(e=t.stopCallbacks).clearTimeout)||void 0===n||n.call(e);var r=setTimeout((function(){t._isIdleActive=!0,t.idleConfig.onIdle()}),t.idleConfig.timeoutDelay);t.stopCallbacks.clearTimeout=function(){return clearTimeout(r)}},this.idlenessEventsHandler=function(){t._isIdleActive&&(t._isIdleActive=!1,t.idleConfig.onActive()),t.resetTimeout()}}return Object.defineProperty(e.prototype,"isIdleActive",{get:function(){return this._isIdleActive},enumerable:!1,configurable:!0}),e.prototype.startIdleListener=function(){this.resetTimeout(),this.trackActivity()},e.prototype.stopIdleListener=function(){Object.values(this.stopCallbacks).forEach((function(e){return e()}))},e.prototype.trackActivity=function(){var e,t;if(null===(t=(e=this.stopCallbacks).removeActivityListeners)||void 0===t||t.call(e),"function"==typeof Fn.addEventListener){var n=ma(Fn,[pa.TOUCH_START,pa.KEY_DOWN,pa.MOUSE_MOVE],this.idlenessEventsHandler,{capture:!0,passive:!0}).stop;this.stopCallbacks.removeActivityListeners=n}},e}(),Bp=function(e){function n(t){var n=e.call(this,{timeoutDelay:9e5,onIdle:function(){return n.clearSessionWhenIdle()},onActive:function(){return n.setSession(!0)}})||this;return n._sessionConfig=Wn().sessionConfig,n._sessionHasError=!1,n._cachedLogsSent=!1,n._currentPageTimestamp=On(),n.getPrevSession=function(){var e;return JSON.parse(null===(e=Fn.sessionStorage)||void 0===e?void 0:e.getItem(Nn))},n.getSession=function(){var e,t,r=JSON.parse(null===(e=Fn.sessionStorage)||void 0===e?void 0:e.getItem(An)),o=On();return r&&(r.sessionExpirationDate>o?t=r:(n.clearSessionWhenIdle(),t=n.setSession(!0))),t},n.setSession=function(e){var t,r,o,i;void 0===e&&(e=!1),(null===(t=n._sessionConfig)||void 0===t?void 0:t.keepSessionAfterReload)?n.handleRefreshedSessions():n.createNewSession(),null===(r=Fn.sessionStorage)||void 0===r||r.setItem(An,JSON.stringify(n.activeSession));var a=jn();return(e&&!!(null==a?void 0:a.recordingStopDueToTimeout)&&!!(null===(o=n.sessionRecorderConfig)||void 0===o?void 0:o.enable)||(null==a?void 0:a.getIsAutoStartRecording()))&&(null===(i=n.sessionRecorder)||void 0===i||i.startRecording()),n.activeSession},n.initializeSession(t),n}return t(n,e),Object.defineProperty(n.prototype,"currentPageTimestamp",{get:function(){return this._currentPageTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentPageFragment",{get:function(){return this._currentPageFragment},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sessionConfig",{get:function(){return this._sessionConfig},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onlySessionWithErrorMode",{get:function(){return this._sessionConfig.onlyWithErrorConfig.enable},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxRumEventsForSessionWithError",{get:function(){return this._sessionConfig.onlyWithErrorConfig.maxRumEvents||0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxRecordTimeForSessionWithError",{get:function(){return this._sessionConfig.onlyWithErrorConfig.maxRecordTime||0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"instrumentationsToSend",{get:function(){return this._sessionConfig.onlyWithErrorConfig.instrumentationsToSend},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedLogsSent",{get:function(){return this._cachedLogsSent},set:function(e){this._cachedLogsSent=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sessionHasError",{get:function(){return this._sessionHasError},set:function(e){this._sessionHasError=e},enumerable:!1,configurable:!0}),n.prototype.updateCurrentPage=function(e){this.isIdleActive?this._currentPageFragment=void 0:(this._currentPageFragment=e,this._currentPageTimestamp=On())},n.prototype.getSessionKey=function(){return An},n.prototype.getActiveSession=function(){return this.activeSession},n.prototype.start=function(){this.startIdleListener(),this.clearPrevSession(),this.setSession()},n.prototype.stop=function(){this.stopIdleListener()},n.prototype.initializeSession=function(e){(Fn[Mn]=this,this.sessionRecorderConfig=e,null==e?void 0:e.enable)&&(_s(e.sessionRecordingSampleRate)?this.sessionRecorder=new Up(this,e):Wn().debug&&console.debug("Coralogix Browser SDK - Session recording is disabled"))},n.prototype.clearSessionWhenIdle=function(){var e;(null===(e=this.sessionRecorder)||void 0===e?void 0:e.getSessionHasRecording())&&(this.sessionRecorder.recordingStopDueToTimeout=!0),this.clearSession()},n.prototype.clearPrevSession=function(){var e;null===(e=Fn.sessionStorage)||void 0===e||e.removeItem(Nn)},n.prototype.clearSession=function(){var e,t,n,o,i,a;null===(e=Fn.sessionStorage)||void 0===e||e.setItem(Nn,JSON.stringify(r(r({},this.activeSession),{hasRecording:null===(t=this.sessionRecorder)||void 0===t?void 0:t.getSessionHasRecording(),hasScreenshot:null===(n=this.sessionRecorder)||void 0===n?void 0:n.getSessionHasScreenshot()}))),zn(),this.clearSessionWithErrorMode(),null===(o=Bn())||void 0===o||o.resetSnapshot(),this._currentPageFragment=void 0,null===(i=this.sessionRecorder)||void 0===i||i.stopRecording(),null===(a=Fn.sessionStorage)||void 0===a||a.removeItem(An)},n.prototype.clearSessionWithErrorMode=function(){this.sessionHasError=!1,this.cachedLogsSent=!1},n.prototype.handleRefreshedSessions=function(){var e,t;this.activeSession=this.getSession();var n=JSON.parse((null===(e=Fn.sessionStorage)||void 0===e?void 0:e.getItem(kn))||"{}");this.activeSession?null===(t=jn())||void 0===t||t.updateSegmentIndexCounter(n):this.createNewSession()},n.prototype.createNewSession=function(){var e=On();this.activeSession={sessionId:be(),sessionCreationDate:e,sessionExpirationDate:e+36e5}},n}(Fp),Gp=N("OpenTelemetry Context Key B3 Debug Flag"),jp="b3",Wp="x-b3-traceid",Hp="x-b3-spanid",Vp="x-b3-sampled",Xp="x-b3-flags",Yp=new Set([!0,"true","True","1",1]),zp=new Set([!1,"false","False","0",0]);function Zp(e,t,n){return function(e){return Array.isArray(e)?e[0]:e}(t.get(e,n))}function Kp(e,t){return"1"===Zp(e,t,Xp)?"1":void 0}var Jp=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=Dt.getSpanContext(e);if(r&&wt(r)&&!de(e)){var o=e.getValue(Gp);n.set(t,Wp,r.traceId),n.set(t,Hp,r.spanId),"1"===o?n.set(t,Xp,o):void 0!==r.traceFlags&&n.set(t,Vp,(C.SAMPLED&r.traceFlags)===C.SAMPLED?"1":"0")}},e.prototype.extract=function(e,t,n){var r,o=function(e,t){var n=Zp(e,t,Wp);return"string"==typeof n?n.padStart(32,"0"):""}(t,n),i=function(e,t){var n=Zp(e,t,Hp);return"string"==typeof n?n:""}(t,n),a=function(e,t){var n=Zp(e,t,Vp);return"1"===Kp(e,t)||Yp.has(n)?C.SAMPLED:void 0===n||zp.has(n)?C.NONE:void 0}(t,n),s=Kp(t,n);return Ct(o)&&Ot(i)&&((r=a)===C.SAMPLED||r===C.NONE)?(e=e.setValue(Gp,s),Dt.setSpanContext(e,{traceId:o,spanId:i,isRemote:!0,traceFlags:a})):e},e.prototype.fields=function(){return[Wp,Hp,Xp,Vp,"x-b3-parentspanid"]},e}(),qp=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Qp=/((?:[0-9a-f]{16}){1,2})-([0-9a-f]{16})(?:-([01d](?![0-9a-f])))?(?:-([0-9a-f]{16}))?/,$p="0".repeat(16),ef=new Set(["d","1"]);var tf,nf=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=Dt.getSpanContext(e);if(r&&wt(r)&&!de(e)){var o=e.getValue(Gp)||1&r.traceFlags,i=r.traceId+"-"+r.spanId+"-"+o;n.set(t,jp,i)}},e.prototype.extract=function(e,t,n){var r=n.get(t,jp),o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return e;var i=o.match(Qp);if(!i)return e;var a=qp(i,4),s=a[1],c=a[2],u=a[3],l=function(e){return 32===e.length?e:""+$p+e}(s);if(!Ct(l)||!Ot(c))return e;var d=function(e){return e&&ef.has(e)?C.SAMPLED:C.NONE}(u);return"d"===u&&(e=e.setValue(Gp,u)),Dt.setSpanContext(e,{traceId:l,spanId:c,isRemote:!0,traceFlags:d})},e.prototype.fields=function(){return[jp]},e}();!function(e){e[e.SINGLE_HEADER=0]="SINGLE_HEADER",e[e.MULTI_HEADER=1]="MULTI_HEADER"}(tf||(tf={}));var rf=function(){function e(e){void 0===e&&(e={}),this._b3MultiPropagator=new Jp,this._b3SinglePropagator=new nf,e.injectEncoding===tf.MULTI_HEADER?(this._inject=this._b3MultiPropagator.inject,this._fields=this._b3MultiPropagator.fields()):(this._inject=this._b3SinglePropagator.inject,this._fields=this._b3SinglePropagator.fields())}return e.prototype.inject=function(e,t,n){de(e)||this._inject(e,t,n)},e.prototype.extract=function(e,t,n){var r=n.get(t,jp);return(Array.isArray(r)?r[0]:r)?this._b3SinglePropagator.extract(e,t,n):this._b3MultiPropagator.extract(e,t,n)},e.prototype.fields=function(){return this._fields},e}(),of="x-amzn-trace-id",af=function(){function e(){}return e.prototype.inject=function(e,t,n){var r,o=null===(r=Dt.getSpan(e))||void 0===r?void 0:r.spanContext();if(o&&wt(o)){var i=o.traceId,a="Root=1-"+i.substring(0,8)+"-"+i.substring(8)+";Parent="+o.spanId+";Sampled="+((C.SAMPLED&o.traceFlags)===C.SAMPLED?"1":"0");n.set(t,of,a)}},e.prototype.extract=function(e,t,n){var r=this.getSpanContextFromHeader(t,n);return wt(r)?Dt.setSpan(e,Dt.wrapSpanContext(r)):e},e.prototype.fields=function(){return[of]},e.prototype.getSpanContextFromHeader=function(t,n){var r=n.keys(t).find((function(e){return e.toLowerCase()===of}));if(!r)return ht;var o=n.get(t,r);if(!o||"string"!=typeof o)return ht;for(var i,a=0,s=ft,c=pt,u=null;a<o.length;){var l=o.indexOf(";",a);l>=0?(i=o.substring(a,l).trim(),a=l+1):(i=o.substring(a).trim(),a=o.length);var d=i.indexOf("="),p=i.substring(d+1);i.startsWith("Root")?s=e._parseTraceId(p):i.startsWith("Parent")?c=e._parseSpanId(p):i.startsWith("Sampled")&&(u=e._parseTraceFlag(p))}if(null===u)return ht;var f={traceId:s,spanId:c,traceFlags:u,isRemote:!0};return wt(f)?f:ht},e._parseTraceId=function(e){if(35!==e.length)return ft;if(!e.startsWith("1"))return ft;if("-"!==e.charAt(1)||"-"!==e.charAt(10))return ft;var t=e.substring(2,10)+e.substring(11,35);return Ct(t)?t:ft},e._parseSpanId=function(e){return Ot(e)?e:pt},e._parseTraceFlag=function(e){return"0"===e?C.NONE:"1"===e?C.SAMPLED:null},e}();var sf=function(){function e(e,t){this.config=e,this.internalPropagator=t}return e.prototype.extract=function(e,t,n){return this.internalPropagator.extract(e,t,n)},e.prototype.fields=function(){return this.internalPropagator.fields()},e.prototype.inject=function(e,t,n){var r,o,i=null===(o=null===(r=this.config.traceParentInHeader)||void 0===r?void 0:r.options)||void 0===o?void 0:o.allowedTracingUrls;i?da(Dt.getSpan(e).attributes[dn.URL],i,"allowedTracingUrls")&&this.internalPropagator.inject(e,t,n):this.internalPropagator.inject(e,t,n)},e}();function cf(e){var t,n,o;if(function(e){var t,n;if(e){if(e.proxyUrl||e.public_key){try{for(var r=s(Fa),o=r.next();!o.done;o=r.next()){var i=o.value;if(Ci(e[i]))return void console.error('CoralogixRum: Initialization aborted. Please provide the required property "'.concat(i,'".'))}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return!0}console.warn("CoralogixRum: Public key is missing")}else console.warn("CoralogixRum: Initialization configuration missing")}(e)){var i=e.ignoreUrls,a=e.urlBlueprinters,l=e.proxyUrl,d=[];return i&&d.push.apply(d,u([],c(i),!1)),l&&d.push(new RegExp(l)),Za.ignoreUrls&&d.push.apply(d,u([],c(Za.ignoreUrls),!1)),r(r(r({},Za),e),{maskInputTypes:null!==(t=e.maskInputTypes)&&void 0!==t?t:Xa,maskClass:null!==(n=e.maskClass)&&void 0!==n?n:"cx-mask",ignoreUrls:d,urlBlueprinters:lf(a),sessionSampleRate:null!==(o=e.sessionSampleRate)&&void 0!==o?o:100,sessionConfig:Ss(e.sessionConfig),sessionRecordingConfig:Ts(e.sessionRecordingConfig),memoryUsageConfig:uf(e.memoryUsageConfig),trackSoftNavigations:!!e.trackSoftNavigations,supportMfe:!!e.supportMfe})}}function uf(e){var t;return e?r(r({},e),{interval:null!==(t=e.interval)&&void 0!==t?t:3e5}):{enabled:!1}}function lf(e){if(!e)return Za.urlBlueprinters;var t={pageUrlBlueprinters:[],networkUrlBlueprinters:[]},n=function(e){var n,r,o=e||{},i=o.pageUrlBlueprinters,a=o.networkUrlBlueprinters;i&&(n=t.pageUrlBlueprinters).push.apply(n,u([],c(i),!1)),a&&(r=t.networkUrlBlueprinters).push.apply(r,u([],c(a),!1))};return n(e),Za.urlBlueprinters&&n(Za.urlBlueprinters),t}function df(e,t){return function(e){var t=e||{},n=t.event_context,r=t.error_context;return n.type===un.ERROR&&n.source===nr.DOCUMENT&&!(null==r?void 0:r.error_message)}(e)?(t.debug&&console.warn("Document error without message dropped."),!0):!!function(e,t){if(!e.error_context||!(null==t?void 0:t.length))return!1;var n=e.error_context.error_message||"";return r=n,o=t,void 0===o&&(o=[]),void 0===i&&(i=!1),o.some((function(e){return Ee(r,e,i)}));var r,o,i}(e,t.ignoreErrors)&&(t.debug&&console.warn("Ignored error dropped."),!0)}function pf(e,t){if(!(null==t?void 0:t.beforeSend))return e;var n=e.text.cx_rum,i=function(e){var t=e.session_context,n=t.user_id,i=t.user_name,a=t.user_email,s=t.user_metadata,c=(e.browser_sdk,e.timestamp,o(e,["session_context","browser_sdk","timestamp"]));return r(r({},c),{session_context:{user_id:n,user_email:a,user_name:i,user_metadata:s}})}(n),a=t.beforeSend(i);if(!function(e){if(null==e)return null;var t=["version_metadata","session_context","page_context","event_context"],n=function(){return t.some((function(t){return!(null==e?void 0:e[t])}))};if(!Oi(e)||n())return console.warn("CoralogixRum: beforeSend must return null, undefined or a valid event."),null;return e}(a))return null;var s=a,c=s.version_metadata.app_name,u=s.event_context.severity;return r(r({},e),{applicationName:c,severity:u,text:{cx_rum:ff(a,n)}})}function ff(e,t){return r(r(r({},t),e),{session_context:r(r({},t.session_context),e.session_context)})}var hf=function(){function e(){this.sdkConfig=Wn(),this.isActive=!0}return e.prototype.onEnd=function(e){var t,n;if(!Is(this.isActive)){var r=Gn(),o=r.onlySessionWithErrorMode,i=r.getPrevSession,a=r.getSession,s=r.setSession,c=a()||s(),u=!!(null===(t=jn())||void 0===t?void 0:t.getSessionHasRecording()),l=!!(null===(n=jn())||void 0===n?void 0:n.getSessionHasScreenshot()),d=this._mapToCxSpan(e,c,i(),u,l,o);if(!df(d.text.cx_rum,this.sdkConfig)){var p=pf(d,this.sdkConfig);if(p){var f=p.severity===fn.Error,h=Gn().sessionHasError;o&&(f||h)&&(Gn().sessionHasError=!0,p.text.cx_rum.session_context.hasError=!0),e[Qa]=p}}}},e.prototype.onStart=function(){},e.prototype.shutdown=function(){return this.isActive=!1,Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve(void 0)},e.prototype._mapToCxSpan=function(e,t,n,o,i,a){var s,c,u=t||{},l=u.sessionId,d=u.sessionCreationDate,p=n||{},f=p.sessionId,h=p.sessionCreationDate,m=p.hasRecording,g=p.hasScreenshot,v=e.attributes,y=e.startTime,E=e.parentSpanId,b=e.name,S=e.endTime,T=e.status,_=e.duration,I=e.kind,C=JSON.parse(v[Ja.USER_CONTEXT]),O=JSON.parse(v[Ja.APPLICATION_CONTEXT]),w=O.application,R=O.version,A=v[Ja.EVENT_TYPE]||e[Ja.EVENT_TYPE],N=this._getEventTypeContext(v,A,e),L=e.spanContext(),M=L.spanId,x=L.traceId,k=r(r({},null===(s=e.resource)||void 0===s?void 0:s.attributes),{"service.name":w}),P=JSON.parse(v[Ja.CUSTOM_LABELS]),D=!!(null===(c=null==N?void 0:N.error_context)||void 0===c?void 0:c.original_stacktrace),U={app_name:w,app_version:R},F=(null==v?void 0:v[Ja.SEVERITY])||fn.Info,B=v[Ja.TIMESTAMP]||On();B<d&&(B=On());var G={version_metadata:U,applicationName:w,subsystemName:"cx_rum",isErrorWithStacktrace:D,severity:F,timestamp:B,text:{cx_rum:r(r({platform:"browser",timestamp:B},N),{browser_sdk:{version:"2.1.0"},version_metadata:U,session_context:r(r(r(r({},C),{session_id:l,session_creation_date:d,prev_session:f?{session_id:f,session_creation_date:h,hasRecording:m,hasScreenshot:g}:void 0,hasRecording:o,hasScreenshot:i,user_agent:v[Ja.USER_AGENT]}),ss(v[Ja.USER_AGENT])),{onlyWithErrorMode:a}),page_context:e[Ja.PAGE_CONTEXT],isNavigationEvent:!!e[Ja.IS_NAVIGATION_EVENT],event_context:{type:A,source:v[Ja.SOURCE],severity:F},labels:P,environment:v[Ja.ENVIRONMENT]||""})}};return function(e){return!!e[qn]}(e)&&(G.text.cx_rum.spanId=M,G.text.cx_rum.traceId=x,G.text.cx_rum.parentSpanId=E,G.instrumentation_data={otelSpan:{spanId:M,traceId:x,parentSpanId:E,name:b,attributes:r(r({},ls(v)),this.resolveLabels(G.text.cx_rum)),startTime:y,endTime:S,status:F===fn.Error?r(r({},T),{code:Jn.ERROR}):T,kind:I,duration:_,sessionId:l},otelResource:{attributes:k}}),this.resolveContextFromSpan(G,e,A),G.text.cx_rum.labels=this.resolveLabels(G.text.cx_rum),G},e.prototype.resolveContextFromSpan=function(e,t,n){switch(n){case un.CUSTOM_MEASUREMENT:e.text.cx_rum.custom_measurement_context=t[Ja.CUSTOM_MEASUREMENT_CONTEXT];break;case un.MEMORY_USAGE:e.text.cx_rum.memory_usage_context=t[Ja.MEMORY_USAGE_CONTEXT];break;case un.SCREENSHOT:e.text.cx_rum.screenshot_context=t[Ja.SCREENSHOT_CONTEXT]}},e.prototype._getEventTypeContext=function(e,t,n){var o;switch(t){case un.ERROR:var i=e[Ja.ERROR.MESSAGE],a=n[ir.DATA],s=n[ir.STACK];return{error_context:{error_type:e[Ja.ERROR.TYPE],error_message:i,original_stacktrace:s,error_custom_data:a}};case un.NETWORK_REQUEST:var c=e[dn.URL],u=ps({url:c,blueprinters:null===(o=this.sdkConfig.urlBlueprinters)||void 0===o?void 0:o.networkUrlBlueprinters});return{network_request_context:{method:e[dn.METHOD],status_code:e[dn.STATUS_CODE],url:c,url_blueprint:u,fragments:as(u),host:e[dn.HOST],schema:e[dn.SCHEME],status_text:e[dn.STATUS_TEXT],duration:os(null==n?void 0:n.duration),source:e[Ja.SOURCE],response_content_length:e[dn.RESPONSE_CONTENT_LENGTH],request_headers:n[Yr],request_payload:n[Kr],response_headers:n[zr],response_payload:n[Zr]}};case un.LOG:if(e[Ja.LOG]){var l=JSON.parse(e[Ja.LOG]);return{log_context:{message:l.message,data:null==l?void 0:l.data}}}return{log_context:{message:""}};case un.INTERNAL:var d=JSON.parse(e[Ja.INTERNAL])||{};return{internal_context:{event:d.event,data:d.data}};case un.USER_INTERACTION:return{interaction_context:{target_element:e[Ja.TARGET_ELEMENT],event_name:e[Ja.INTERACTION_EVENT_NAME],target_element_inner_text:e[Ja.ELEMENT_INNER_TEXT],element_id:e[Ja.ELEMENT_ID],element_classes:e[Ja.ELEMENT_CLASSES],target_element_type:e[Ja.TARGET_ELEMENT_TYPE]}};case un.WEB_VITALS:return{web_vitals_context:JSON.parse(e[Ai])};case un.LONG_TASK:return{longtask_context:JSON.parse(e[un.LONG_TASK])};case un.RESOURCES:var p=JSON.parse(e[Li]),f=as(p.name);return{resource_context:r(r({},p),{fragments:f})}}return{}},e.prototype.resolveLabels=function(e){var t,n,o=e.labels,i=null===(t=this.sdkConfig)||void 0===t?void 0:t.labelProviders;if(null==i?void 0:i.length){var a=ts(ja),s=ts(Wa),c=null===(n=e.network_request_context)||void 0===n?void 0:n.fragments,u=r(r({},this.getLabelsByLabelProviders(a,e,e.page_context.page_fragments)),c?this.getLabelsByLabelProviders(s,e,c):{});o=r(r({},o),u)}return o},e.prototype.getLabelsByLabelProviders=function(e,t,n){var o,i,a={},c=fs(t);try{for(var u=s(e),l=u.next();!l.done;l=u.next()){var d=l.value;a=r(r({},a),d.providerFunc(n,c))}}catch(p){o={error:p}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return a},e}(),mf=function(){function e(){this.isActive=!0}return e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.onEnd=function(e){if(!Is(this.isActive)&&e[Qa]){var t=e[Qa];this.isSnapshotPrepared(e)?this.createSnapshot(t):t.text.cx_rum.isSnapshotEvent=!1}},e.prototype.onStart=function(e,t){},e.prototype.shutdown=function(){return this.isActive=!1,Promise.resolve()},e.prototype.createSnapshot=function(e){var t=Bn().currentSnapshot,n=(t.timestamp,o(t,["timestamp"]));e.text.cx_rum.isSnapshotEvent=!0,e.text.cx_rum.snapshot_context=n},e.prototype.isSnapshotPrepared=function(e){var t,n=e.attributes,r=n[Ja.TIMESTAMP],o=n[Ja.EVENT_TYPE],i=n[Ja.SEVERITY],a=!1,s=Bn(),c=s.fragmentsState,u=s.updateSnapshot,l=s.currentSnapshot,d=s.isSnapshotSentDueToRecording,p=l.timestamp,f=l.actionCount,h=l.errorCount,m=e[Ja.PAGE_CONTEXT];return m&&!c.has(m.page_fragments)&&(c.add(m.page_fragments),u({timestamp:On(),viewCount:c.size}),a=!0),i===fn.Error&&(u({timestamp:On(),errorCount:h+1}),a=!0),(null===(t=jn())||void 0===t?void 0:t.getSessionHasRecording())&&!d&&(u({timestamp:On(),hasRecording:!0}),Bn().isSnapshotSentDueToRecording=!0,a=!0),o===un.DOM&&(u({timestamp:On()}),a=!0),o===un.SCREENSHOT&&u({hasScreenshot:!0}),r-p>=Cn&&(u({timestamp:On()}),a=!0),o===un.USER_INTERACTION&&u({actionCount:f+1}),a},e}(),gf=function(){function e(){var e=this;this.updateSnapshot=function(t){e._currentSnapshot=r(r({},e._currentSnapshot),t)},this.resetSnapshot=function(){e._currentSnapshot=r(r({},Dn),{timestamp:On()}),e._fragmentsState=new Set,e._isSnapshotSentDueToRecording=!1},Fn[Pn]=this,this.resetSnapshot()}return Object.defineProperty(e.prototype,"fragmentsState",{get:function(){return this._fragmentsState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentSnapshot",{get:function(){return this._currentSnapshot},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSnapshotSentDueToRecording",{get:function(){return this._isSnapshotSentDueToRecording},set:function(e){this._isSnapshotSentDueToRecording=e},enumerable:!1,configurable:!0}),e}();var vf=function(){function e(){}return e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.onEnd=function(e){},e.prototype.onStart=function(e){var t=function(e){var t,n=ps({url:e,blueprinters:null===(t=Wn().urlBlueprinters)||void 0===t?void 0:t.pageUrlBlueprinters}),r=as(n);return{page_url:e.slice(0,Ua),page_url_blueprint:n,page_fragments:r,referrer:document.referrer}}(location.href);if(t){e[Ja.PAGE_CONTEXT]=t;var n=Gn().currentPageFragment,r=t.page_fragments;n!==r&&(Gn().updateCurrentPage(r),e[Ja.IS_NAVIGATION_EVENT]=!0)}},e.prototype.shutdown=function(){return Promise.resolve()},e}();if(ns.has(ln.LongTask)){var yf=Fn.__tti={e:[]};yf.o=new PerformanceObserver((function(e){yf.e=yf.e.concat(e.getEntries())})),yf.o.observe({type:ln.LongTask,buffered:!0})}var Ef,bf,Sf,Tf,_f,If,Cf,Of,wf,Rf,Af,Nf,Lf,Mf=!1,xf={get isInited(){return Mf},init:function(e){var t,n;if(Mf)console.warn("CoralogixRum already inited.");else if(Fn.sessionStorage)if("function"==typeof Symbol){var o=cf(e);if(o){Fn[Ba]=o;var l=function(e){var t=new ys,n=e.sessionSampleRate,o=e.sessionConfig,i=e.debug,a=e.sessionRecordingConfig;return _s(n)&&_s(o.sessionSampleRate)||((null==o?void 0:o.alwaysTrackSessionsWithErrors)?o.onlyWithErrorConfig=r(r({},o.onlyWithErrorConfig),{enable:!0}):(i&&console.debug("CoralogixRum: Session tracking is disabled due to sampling rate"),t=new Es,a&&(a.enable=!1),e.instrumentations=r(r({},e.instrumentations),{errors:!1,custom:!1,web_vitals:!1,interactions:!1,long_tasks:!1,resources:!1}))),t}(o);o.debug||o.public_key||console.warn("rumAuth will be required in the future"),Lf=new La,new Bp(o.sessionRecordingConfig).start();var d=o.ignoreUrls,p=o.labels,f=o.user_context,h=o.application,m=o.version,g=o.traceParentInHeader,v=o.environment;Cf=new au({sampler:l});var y,E={},b=Ka.map((function(e){var t,n,i,a,s,c=e.Instrument,u=e.confKey,l=e.disable,p=(i=null===(t=null==o?void 0:o.instrumentations)||void 0===t?void 0:t[u],a=E,s=l,!1===i?i:(void 0!==i||!s)&&!1!==(null==i?void 0:i.enabled)&&Object.assign({},a,i));if(p){var f=void 0;switch(u){case"errors":f=new c(p),Sf=f;break;case"fetch":case"xhr":f=new c(r(r({},p),{ignoreUrls:d,traceParentInHeader:g}));break;case Pi:f=new c(p),es(Pi,f);break;case Aa:(null===(n=o.sessionRecordingConfig)||void 0===n?void 0:n.enable)&&(f=new c(p),If=f);break;case Oa:o.memoryUsageConfig.enabled&&(Fn.crossOriginIsolated?performance.measureUserAgentSpecificMemory||(console.debug("Coralogix Browser SDK - measureUserAgentSpecificMemory() is not available in this browser"),0):(console.debug("Coralogix Browser SDK - measureUserAgentSpecificMemory() is only available in cross-origin-isolated pages."),0))&&(f=new c(p),_f=f);break;default:f=new c(p)}return f instanceof co&&(bf=f),f instanceof Ma&&(Tf=f),f}return null})).filter((function(e){return Boolean(e)})),S=r(r({},Za.user_context),f);Of=new gs(r(((t={})[Ja.APPLICATION_CONTEXT]=JSON.stringify({application:h,version:m}),t[Ja.USER_CONTEXT]=JSON.stringify(S),t),v?((n={})[Ja.ENVIRONMENT]=v,n):{})),p&&Of.setCustomLabels(p),y=Of,Fn[Qn]=y,Cf.addSpanProcessor(Of),Af=new vf,Cf.addSpanProcessor(Af),Rf=new hf,Cf.addSpanProcessor(Rf),new gf,wf=new mf,Cf.addSpanProcessor(wf),Cf.addSpanProcessor(new ve(Nf=new ws,{maxExportBatchSize:50,scheduledDelayMillis:2e3})),function(e,t){i(this,void 0,void 0,(function(){var n,r,o,i,s,l,d,p;return a(this,(function(a){return(null===(d=e.traceParentInHeader)||void 0===d?void 0:d.enabled)&&(n=[],r=(null===(p=e.traceParentInHeader)||void 0===p?void 0:p.options)||{},o=r.propagateB3TraceHeader,(i=r.propagateAwsXrayTraceHeader)||o||(n=u(u([],c(n),!1),[new ac,new tc],!1)),i&&n.push(new af),o&&(s=o.singleHeader,l=o.multiHeader,s&&n.push(new rf),l&&n.push(new rf({injectEncoding:tf.MULTI_HEADER}))),t.register({propagator:new sf(e,new Ys({propagators:n}))})),[2]}))}))}(e,Cf),Ef=function(e){var t,n,r=e.tracerProvider||Dt.getTracerProvider(),o=e.meterProvider||on.getMeterProvider(),i=e.loggerProvider||vn.getLoggerProvider(),a=null!==(n=null===(t=e.instrumentations)||void 0===t?void 0:t.flat())&&void 0!==n?n:[];return function(e,t,n,r){for(var o=0,i=e.length;o<i;o++){var a=e[o];t&&a.setTracerProvider(t),n&&a.setMeterProvider(n),r&&a.setLoggerProvider&&a.setLoggerProvider(r),a.getConfig().enabled||a.enable()}}(a,r,o,i),function(){!function(e){e.forEach((function(e){return e.disable()}))}(a)}}({tracerProvider:Cf,instrumentations:b});var T=c(function(e,t){var n,r,o=[],i=[];try{for(var a=s(e),c=a.next();!c.done;c=a.next()){var u=c.value;t(u)?o.push(u):i.push(u)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return[o,i]}(o.labelProviders||[],(function(e){var t=e.urlType;return t===pn.PAGE||!t})),2),_=T[0],I=T[1];es(ja,_),es(Wa,I),Mf=!0,(null==e?void 0:e.debug)&&console.info("CoralogixRum.init() complete"),ip("init")}}else console.warn("CoralogixRum: browser not supported, disabling instrumentation.");else console.warn("CoralogixRum: Non-browser environment detected, aborting")},getCustomTracer:function(e){var t,n;if(Mf)if(null===(n=null===(t=Wn())||void 0===t?void 0:t.traceParentInHeader)||void 0===n?void 0:n.enabled){if(!Fn[Vn]){var r,o=Cf.getTracer("@");return r=o,Fn[Vn]=r,{startGlobalSpan:function(t,n){if(!Yn()){var r;r=(null==e?void 0:e.ignoredInstruments)||[],Fn[Xn]=r;var i=o.startSpan(t);i[Ja.EVENT_TYPE]=un.CUSTOM_SPAN,n&&er(i,n),$n(i);var a={span:i,withContext:function(e){return j.with(Dt.setSpan(j.active(),i),e)},endSpan:function(){null==i||i.end(),zn()},startCustomSpan:function(e,t){var n=o.startSpan(e);return n[Ja.EVENT_TYPE]=un.CUSTOM_SPAN,t&&er(n,t),$n(n),{span:n,endSpan:function(){null==n||n.end()}}}};return function(e){Fn[Hn]=e}(a),a}console.warn("Coralogix Browser SDK  - Global span already exists")}}}console.warn("Coralogix Browser SDK - Custom tracer already exists")}else console.debug("Coralogix Browser SDK - TraceParentInHeader is not enabled");else console.debug("CoralogixRum must be initiated before getting custom tracer")},shutdown:function(){var e;Mf&&(null==Ef||Ef(),Ef=void 0,this.stopSessionRecording(),null===(e=Gn())||void 0===e||e.stop(),null==Of||Of.shutdown(),null==Af||Af.shutdown(),null==Rf||Rf.shutdown(),null==wf||wf.shutdown(),null==Nf||Nf.shutdown(),Mf=!1)},setApplicationContext:function(e){var t;Mf?null==Of||Of.setInternalLabels(r(r({},Of.getInternalLabels()),((t={})[Ja.APPLICATION_CONTEXT]=e,t))):console.debug("CoralogixRum must be initiated before setting application context")},captureError:function(e,t,n){Mf?null==Sf||Sf.reportError(nr.CAPTURED,e,t,n):console.debug("CoralogixRum must be initiated before reporting errors")},sendCustomMeasurement:function(e,t){Mf?null==Tf||Tf.createCustomMeasurement(e,t):console.debug("CoralogixRum must be initiated before sending custom measurement")},addTiming:function(e,t){Mf?this.sendCustomMeasurement(e,function(e){return"number"==typeof e?e:On()-Gn().currentPageTimestamp}(t)):console.debug("CoralogixRum must be initiated before adding timing")},measureUserAgentSpecificMemory:function(){Mf?_f?_f.startTrackingMemoryUsage():console.debug("Memory usage instrumentation is not enabled"):console.debug("CoralogixRum must be initiated before measuring user agent specific memory")},stopSessionRecording:function(){var e;null===(e=jn())||void 0===e||e.stopRecording()},startSessionRecording:function(){var e;null===(e=jn())||void 0===e||e.startRecording()},screenshot:function(e){var t;if(Mf){var n=be();return null==If||If.screenshot(n,e),null===(t=jn())||void 0===t||t.screenshot(n),n}console.debug("CoralogixRum must be initiated before capturing screenshot")},setUserContext:function(e){var t;Mf?null==Of||Of.setInternalLabels(r(r({},Of.getInternalLabels()),((t={})[Ja.USER_CONTEXT]=e,t))):console.debug("CoralogixRum must be initiated before setting user context")},getUserContext:function(){return null==Of?void 0:Of.getUserContext()},setLabels:function(e){null==Of||Of.setCustomLabels(e)},getLabels:function(){return(null==Of?void 0:Of.getCustomLabels())||{}},getSessionId:function(){var e,t;return null===(t=null===(e=Gn())||void 0===e?void 0:e.getSession())||void 0===t?void 0:t.sessionId},log:function(e,t,n){Mf?bf?null==bf||bf.log(e,t,n):console.warn("Log was reported, but custom instrumentation is disabled."):console.debug("CoralogixRum must be initiated before using log")},debug:function(e,t){this.log(fn.Debug,e,t)},verbose:function(e,t){this.log(fn.Verbose,e,t)},info:function(e,t){this.log(fn.Info,e,t)},warn:function(e,t){this.log(fn.Warn,e,t)},error:function(e,t){this.log(fn.Error,e,t)},critical:function(e,t){this.log(fn.Critical,e,t)},startTimeMeasure:function(e,t){Mf?null==Lf||Lf.startMeasurement(e,t):console.debug("CoralogixRum must be initiated before starting time measurement.")},endTimeMeasure:function(e){var t=null==Lf?void 0:Lf.getMeasurement(e);if(t){var n=t.duration,r=t.labels;null==Tf||Tf.createCustomMeasurement(e,n,tr(r))}}};Fn.CoralogixRum=xf;var kf;!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"}(kf||(kf={}))})()})();